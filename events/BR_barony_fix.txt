namespace = meta

# Workaround for barons under generated counts being independent [on_startup]
# See https://forum.paradoxplaza.com/forum/index.php?threads/mod-problems-independent-baronies-and-frames.1056827
character_event = {
   id = meta.3
  
   hide_window = yes
   is_triggered_only = yes
  
   # Note: can't use only_independent = yes, as barons are not only_playable = yes
   only_rulers = yes
  
   trigger = {
       tier = BARON
       independent = yes
	   NOT = { has_global_flag = baronyfix }
   }
  
   immediate = {
       log = "(Startup) Auto-fixing independent barony [Root.PrimaryTitle.GetFullBaseName]."
       set_global_flag = baronyfix
	   dejure_liege_title = {
           holder_scope = {
               ROOT = {
                   set_defacto_liege = PREV
               }
           }
       }
   }
}