decisions = {

	appease_spirits = {
		is_in_society = yes
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 36

		potential = {
			not_casting = yes
			is_playable = yes
			is_landed = yes
			is_adult = yes
			prisoner = no
			OR = {
	      society_rank = {
	        rank >= 1
	        society = emerald_enclave
	      }
				society_rank = {
	        rank >= 1
	        society = shadow_druids
	      }
			}
		}

		allow = {
			war = no
			has_society_currency_minor_trigger = yes
			custom_tooltip = {
				text = UNOCCUPIED_DEMESNE_TITLE
				hidden_tooltip = {
					any_demesne_title = {
						NOT = { higher_tier_than = count }
						is_occupied = no
					}
				}
			}
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			custom_tooltip = {
				text = appease_spirits_cooldown_tooltip
				hidden_tooltip = { NOT = { has_character_modifier = worshipped_spirits_timer } }
			}
		}

		effect = {
			set_character_flag = recent_minor_decision
			set_character_flag = do_not_disturb
			if = {
				limit = { NOT = { has_quest = quest_appease_spirits } }
				detract_society_currency_minor_effect = yes
			}
			if = {
				limit = { has_quest = quest_appease_spirits }
				add_society_currency_minor_effect = yes
				clr_quest = quest_appease_spirits
				sound_effect = monastic_orders_donate_charity
			}
			custom_tooltip = {
				text = prepare_worship_ancestors
				hidden_tooltip = {
					character_event = { id = EME.7000 }
					add_character_modifier = {
						name = worshipped_spirits_timer
						years = 5
						hidden = yes
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.5

			modifier = {
				factor = 0
				has_character_flag = recent_minor_decision
				NOT = {
					had_character_flag = {
						flag = recent_minor_decision
						days = 730
					}
				}
			}
		}
	}

	invite_druid = {
		is_in_society = yes
		only_playable = yes
		ai_check_interval = 36 #check only once every 36 months.
		potential = {
			not_casting = yes
			OR = {
	      society_rank = {
	        rank >= 3
	        society = emerald_enclave
	      }
				society_rank = {
	        rank >= 3
	        society = shadow_druids
	      }
			}
		}
		allow = {
			has_society_currency_medium_trigger = yes
			is_inaccessible_trigger = no
		}
		effect = {
			detract_society_currency_medium_effect = yes
			custom_tooltip = { text = tooltip_summoning_druid }
			hidden_tooltip = {
				create_random_soldier = {
					random_traits = yes
					dynasty = random
					female = no
					attributes = {
						diplomacy = 4
						learning = 14
						stewardship = 4
						intrigue = 4
						martial = 4
					}
				}
			}
			new_character = {
				remove_trait = weak
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_trait = mystic
				remove_trait = socializer
				remove_trait = gamer
				remove_trait = hedonist
				remove_trait = duelist
				remove_trait = hunter
				remove_trait = strategist
				remove_trait = administrator
				remove_trait = architect
				remove_trait = gardener
				remove_trait = schemer
				remove_trait = impaler
				remove_trait = seducer
				remove_trait = seductress
				remove_trait = theologian
				remove_trait = scholar

				remove_education_effect = yes
				random_list = {
					60 = { add_trait = scholarly_theologian }
					40 = { add_trait = mastermind_theologian }
				}

				random_list = {
					15 = {
						change_learning = 2
					}
					15 = {
						add_trait = physician
					}
					20 = {
						add_trait = theologian
					}
					20 = {
						add_trait = mystic
					}
					20 = {
						add_trait = scholar
					}
					5 = {
						add_trait = shrewd
					}
					5 = {
						add_trait = robust
					}
				}

				random_list = {
					60 = { add_trait = expert_druid }
					40 = { add_trait = master_druid }
				}

				if = {
					limit = {
						ROOT = { society_member_of = emerald_enclave }
					}
					join_society = emerald_enclave
				}
				else_if = {
					limit = {
						ROOT = { society_member_of = shadow_druids }
					}
					join_society = shadow_druids
				}

				set_character_flag = invited_lodge_soldier
				set_character_flag = lodge_warrior_original_court_@ROOT
				set_character_flag = no_court_invites
				save_event_target_as = invited_lodge_soldier
			}
			character_event = { id = EME.25000 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 0
				any_courtier = { has_job_title = job_spiritual learning = 20 }
			}
		}
	}

	nature_favor = {
		is_in_society = yes
    only_playable = yes
    ai_check_interval = 6

    potential = {
			not_casting = yes
			OR = {
				society_rank = {
					rank = 4
					society = emerald_enclave
				}
				society_rank = {
					rank = 4
					society = shadow_druids
				}
			}
    }

    allow = {
      prisoner = no
      has_society_currency_major_trigger = yes
			any_war = {
				OR = {
					any_defender = {
						character = ROOT
						is_primary_war_defender = yes
					}
					any_attacker = {
						character = ROOT
						is_primary_war_attacker = yes
					}
				}
			}
      NOR = {
        trait = incapable
        is_inaccessible_trigger = yes
      }
      custom_tooltip = {
        text = nature_favor_cooldown_custom_tooltip
        hidden_tooltip = {
          NOT = { has_character_modifier = nature_favor_timer }
        }
      }
    }

    effect = {
		detract_society_currency_major_effect = yes
		hidden_tooltip = {
			add_character_modifier = {
				modifier = nature_favor_timer
				months = 12
				hidden = yes
			}
		}
		character_event = {	id = EME.300 }
    }

    revoke_allowed = {
      always = no
    }
		ai_will_do = {
      factor = 1
    }
	}

	convert_to_tribal_indep  = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 100

		potential = {
			not_casting = yes
			is_tribal = no
			independent = yes
			society_rank = {
				rank = 4
				society = shadow_druids
			}
		}
		allow = {
			war = no
			OR = {
				government = feudal_government
				government = divine_feudal_government
				government = muslim_government
				government = theocratic_feudal_government
				government = theocracy_government
			}
			primary_title = {
				NOR = {
					has_law = imperial_administration
					has_law = ze_administration_laws_1
					has_law = ze_administration_laws_2
				}
			}
		}

		effect = {
			if = {
				limit = {
					religion = giant_pantheon
					OR = {
						culture_group = giant_group
						culture_group = giantkin_group
					}
				}
				primary_title = {
					set_government_type = ordning_government
				}
			}
			else = {
				set_government_type = tribal_government
			}

			hidden_tooltip = {
				any_demesne_title = {
					limit = {
						tier = baron
						holding_type = castle
						#is_capital = yes
					}
					convert_to = TRIBAL
					add_building = tb_hillfort_4
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 1
						}
						add_building = tb_market_town_1
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 2
						}
						add_building = tb_market_town_2
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 3
						}
						add_building = tb_market_town_3
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 4
						}
						add_building = tb_market_town_4
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 1
						}
						add_building = tb_defensive_fortifications_1
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 2
						}
						add_building = tb_defensive_fortifications_2
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 3
						}
						add_building = tb_defensive_fortifications_3
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 4
						}
						add_building = tb_defensive_fortifications_4
					}
					if = {
						limit = {
							TECH_NAVAL = 1
						}
						add_building = tb_shipyard_1
					}
					if = {
						limit = {
							TECH_NAVAL = 2
						}
						add_building = tb_shipyard_2
					}
					if = {
						limit = {
							TECH_NAVAL = 3
						}
						add_building = tb_shipyard_3
					}
					if = {
						limit = {
							TECH_NAVAL = 4
						}
						add_building = tb_shipyard_4
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 1
						}
						add_building = tb_training_grounds_1
						add_building = tb_war_camp_1
						add_building = tb_practice_range_1
						add_building = tb_arsenal_1
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 2
						}
						add_building = tb_training_grounds_2
						add_building = tb_war_camp_2
						add_building = tb_practice_range_2
						add_building = tb_arsenal_2
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 3
						}
						add_building = tb_training_grounds_3
						add_building = tb_war_camp_3
						add_building = tb_practice_range_3
						add_building = tb_arsenal_3
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 4
						}
						add_building = tb_training_grounds_4
						add_building = tb_war_camp_4
						add_building = tb_practice_range_4
						add_building = tb_arsenal_4
					}
					add_building = tb_beastlairs_1
					add_building = tb_beastlairs_2
					add_building = tb_beastlairs_3
					add_building = tb_beastlairs_4
					add_building = tb_beastlairs_5
					refill_holding_levy = yes
				}
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					trait = arbitrary
					trait = zealous
					trait = cruel
					trait = impaler
					trait = lunatic
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					trait = kind
					trait = content
				}
			}
			modifier = {
				factor = 0
				higher_real_tier_than = DUKE
			}
			modifier = {
				factor = 0
				num_of_vassals >= 6
			}
			modifier = {
				factor = 0
				realm_size >= 10
			}
		}
	}

	convert_to_tribal_vassal  = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 48

		potential = {
			not_casting = yes
			is_tribal = no
			is_ruler = yes
			independent = no
			liege = {
				is_tribal = yes
			}
			society_rank = {
				rank >= 2
				society = shadow_druids
			}
		}
		allow = {
			war = no
			OR = {
				government = feudal_government
				government = divine_feudal_government
				government = muslim_government
				government = theocratic_feudal_government
				government = theocracy_government
			}
			primary_title = {
				NOR = {
					has_law = imperial_administration
					has_law = ze_administration_laws_1
					has_law = ze_administration_laws_2
				}
			}
		}

		effect = {
			if = {
				limit = {
					religion = giant_pantheon
					OR = {
						culture_group = giant_group
						culture_group = giantkin_group
					}
				}
				primary_title = {
					set_government_type = ordning_government
				}
			}
			else = {
				set_government_type = tribal_government
			}

			hidden_tooltip = {
				any_demesne_title = {
					limit = {
						tier = baron
						holding_type = castle
						#is_capital = yes
					}
					convert_to = TRIBAL
					add_building = tb_hillfort_4
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 1
						}
						add_building = tb_market_town_1
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 2
						}
						add_building = tb_market_town_2
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 3
						}
						add_building = tb_market_town_3
					}
					if = {
						limit = {
							TECH_CITY_CONSTRUCTION = 4
						}
						add_building = tb_market_town_4
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 1
						}
						add_building = tb_defensive_fortifications_1
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 2
						}
						add_building = tb_defensive_fortifications_2
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 3
						}
						add_building = tb_defensive_fortifications_3
					}
					if = {
						limit = {
							TECH_FORTIFICATIONS_CONSTRUCTION = 4
						}
						add_building = tb_defensive_fortifications_4
					}
					if = {
						limit = {
							TECH_NAVAL = 1
						}
						add_building = tb_shipyard_1
					}
					if = {
						limit = {
							TECH_NAVAL = 2
						}
						add_building = tb_shipyard_2
					}
					if = {
						limit = {
							TECH_NAVAL = 3
						}
						add_building = tb_shipyard_3
					}
					if = {
						limit = {
							TECH_NAVAL = 4
						}
						add_building = tb_shipyard_4
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 1
						}
						add_building = tb_training_grounds_1
						add_building = tb_war_camp_1
						add_building = tb_practice_range_1
						add_building = tb_arsenal_1
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 2
						}
						add_building = tb_training_grounds_2
						add_building = tb_war_camp_2
						add_building = tb_practice_range_2
						add_building = tb_arsenal_2
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 3
						}
						add_building = tb_training_grounds_3
						add_building = tb_war_camp_3
						add_building = tb_practice_range_3
						add_building = tb_arsenal_3
					}
					if = {
						limit = {
							TECH_CASTLE_CONSTRUCTION = 4
						}
						add_building = tb_training_grounds_4
						add_building = tb_war_camp_4
						add_building = tb_practice_range_4
						add_building = tb_arsenal_4
					}
					add_building = tb_beastlairs_1
					add_building = tb_beastlairs_2
					add_building = tb_beastlairs_3
					add_building = tb_beastlairs_4
					add_building = tb_beastlairs_5
					refill_holding_levy = yes
				}
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0
				higher_real_tier_than = DUKE
			}
			modifier = {
				factor = 0
				num_of_vassals >= 10
			}
			modifier = {
				factor = 0
				realm_size >= 15
			}
		}
	}

}
