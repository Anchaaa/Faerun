decisions = {

	gender_alteration = {
		ai_check_interval = 5000
		only_playable = yes
		potential = {
			age = 16
			is_incapable = no
			is_inaccessible_trigger = no
			OR = {
				religion = joyful
				religion = elven_pantheon
			}
			OR = {
				ai = no
				AND = {
					is_married = no
					has_children = no
				}
			}
		}
		allow = {
			custom_tooltip = {
				text = ONEYEARCD
				OR = {
					NOT = { has_character_flag = gender_change }
					AND = {
						had_character_flag = {
							flag = gender_change
							years = 1
						}
						ai = no
					}
					AND = {
						had_character_flag = {
							flag = gender_change
							years = 10
						}
						ai = yes
					}
				}
			}
			OR = {
				conditional_tooltip = {
					trigger = {
						trait = androgynous
					}
					piety = 30
				}
				conditional_tooltip = {
					trigger = {
						NOT = { trait = androgynous }
					}
					piety = 150
				}
			}
		}
		
		effect = {
			clr_character_flag = gender_change
			set_character_flag = gender_change
			set_gender = opposite
			if = {
				limit = {
					trait = androgynous
				}
				piety = -30
			}
			else = {
				piety = -150
			}
			else
			if = {
				limit = {
					NOR = {
						trait = asexual
						trait = bisexual
					}
				}
				if = {
					limit = {
						NOT = { trait = homosexual }
					}
					add_trait = homosexual # sexuality doesn't change, but has to be re-labeled based on current gender
				}
				else = {
					remove_trait = homosexual
				}
			}
			if = {
				limit = { is_married = yes }
				any_spouse = {
					if = {
						limit = {
							NOR = {
								trait = bisexual
								trait = asexual
							}
						}
						if = {
							limit = {
								opinion = {
									who = ROOT
									value = 40
								}
							}
							remove_trait = homosexual
							add_trait = bisexual # finds they're bi, at least for the spouse
						}
						else = {
							remove_spouse = ROOT
							ROOT = {
								character_event = { id = generalmisc.29 }
							}
						}
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.01
				NOT = { trait = androgynous }
			}
			modifier = {
				factor = 1.2
				trait = creature_elf
			}
		}
	}

	joyful_etiquette_lessons = {
		ai_check_interval = 600
		only_playable = yes
		potential = {
			is_incapable = no
			age = 16
			religion = joyful
		}
		allow = {
			custom_tooltip = {
				text = FIVEYEARCD
				OR = {
					NOT = { has_character_flag = joyful_etiquette }
					had_character_flag = {
						flag = joyful_etiquette
						years = 5
					}
				}
			}
			piety = 50
			scaled_wealth = { value = 0.02 min = 15 max = 200 }
		}
		effect = {
			clr_character_flag = joyful_etiquette
			set_character_flag = joyful_etiquette
			piety = -50
			scaled_wealth = { value = -0.02 min = -15 max = -200 }
			add_character_modifier = {
				name = joyful_etiquette_mod
				years = 3
			}
		}
		
		ai_will_do = {
			factor = 0.2
		}
	}

	joyful_improve_appearance = {
		ai_check_interval = 600
		
		potential = {
			NOR = {
				trait = creature_hag
				trait = groomed
			}
			is_incapable = no
			age = 16
			religion = joyful
		}
		
		allow = {
			prestige = 30
			piety = 50
			custom_tooltip = {
				text = ONEYEARCD
				OR = {
					NOT = { has_character_flag = joyful_improve_app }
					had_character_flag = {
						flag = joyful_improve_app
						years = 1
					}
				}
			}
		}
		
		effect = {
			clr_character_flag = joyful_improve_app
			set_character_flag = joyful_improve_app
			prestige = -30
			piety = -50
			if = {
				limit = {
					trait = uncouth
				}
				remove_trait = uncouth
			}
			else_if = {
				limit = {
					NOT = { trait = uncouth }
				}
				add_trait = groomed
			}
		}
		
		ai_will_do = {
			factor = 0.2
		}
	}

	abyssal_bind_demon = { # Character
		only_playable = yes
		ai_check_interval = 300
		potential = {
			religion = abyssal_cult
			not_casting = yes
		}
		allow = {
			piety = 150
			custom_tooltip = {
				text = ABYSSBINDING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = abyss_demon_binding }
						had_character_flag = {
							flag = abyss_demon_binding
							years = 5
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = abyss_demon_binding
			set_character_flag = abyss_demon_binding
			create_character = {
				age = 666
				trait = creature_fiend
				random_traits = yes
				female = random
				religion = abyssal_cult
				culture = tanarri
				dynasty = culture
				immortal_age = 30
			}
			new_character = {
				random_list = {
					65 = {
						# do nothing - vrock gfx is correct
					}
					20 = {
						set_graphical_culture = succubus
					}
					10 = {
						set_graphical_culture = nalfeshnee
						add_trait = greater_fiend
					}
					10 = {
						set_graphical_culture = succubus
						add_trait = greater_fiend # marilith
					}
					2 = {
						set_graphical_culture = baatezu # balors look a lot like pit fiends
						add_trait = greater_fiend
					}
					2 = {
						set_graphical_culture = yugoloth # or nycaloths
						add_trait = greater_fiend
					}
					2 = {
						set_graphical_culture = cambion
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.2
		}
	}

	abyssal_summon_demons = { # Army
		only_playable = yes
		ai_check_interval = 20
		potential = {
			religion = abyssal_cult
			not_casting = yes
		}
		allow = {
			war = yes
			custom_tooltip = {
				text = ANIMATEDEADCD
				hidden_tooltip = {
					NOT = { has_character_flag = abyss_summon_demons }
				}
			}
			piety = 250
		}
		effect = {
			piety = -250
			hidden_tooltip = {
				set_character_flag = abyss_summon_fiends
				character_event = { id = wizinit.37 days = 1000 }
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = abysssummonedfiends
						troops = {
							light_infantry = { 1000 1000 }
							beast_troops = { 200 200 }
						}
						attrition = 0.5
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.5
			modifier = { #I am losing an offensive war
				factor = 10
				any_war = {
					attacker = { character = ROOT }
					NOT = { war_score = -19 }
				}
			}
			modifier = { #I am losing a defensive war
				factor = 10
				any_war = {
					defender = { character = ROOT }
					war_score = 20
				}
			}
		}
	}
	
	restore_magister = {
		ai_check_interval = 1000
		
		potential = {
			is_adult = yes
			is_playable = yes
			religion = arcane
			d_magister = {
				has_holder = no
			}
			not_casting = yes
		}
		
		allow = {
			OR = {
				trait = renowned_wizard
				trait = renowned_sorcerer
				trait = renowned_bard
				trait = renowned_warlock
				trait = legendary_wizard
				trait = legendary_sorcerer
				trait = legendary_barbarian
				trait = legendary_warlock
				AND = {
					z_cleric = yes
					trait = patron_mystra
				}
			}
			higher_tier_than = COUNT
			piety = 750
			is_tribal = no
			is_republic = no
			capital_scope = {
				OR = {
					AND = {
						capital_holding = {
							NOT = { holding_type = temple }
						}
						OR = {
							has_temple = yes
							z_cleric = yes
							z_paladin = yes
						}
					}
					AND = {
						capital_holding = {
							holding_type = temple
						}
						any_province_holding = {
							count = 2
							holding_type = temple
						}
					}
				}
			}
		}
		
		effect = {
			piety = -750
			character_event = { id = generalmisc.20 }
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}	
	}
	
	restore_black_altar = {
		ai_check_interval = 1000
		
		potential = {
			is_adult = yes
			is_playable = yes
			religion = dead_three
			k_black_altar = {
				has_holder = no
			}
			not_casting = yes
		}
		
		allow = {
			higher_tier_than = DUKE
			wealth = 1000
			is_tribal = no
			is_republic = no
			capital_scope = {
				OR = {
					AND = {
						capital_holding = {
							NOT = { holding_type = temple }
						}
						OR = {
							has_temple = yes
							z_cleric = yes
							z_paladin = yes
						}
					}
					AND = {
						capital_holding = {
							holding_type = temple
						}
						any_province_holding = {
							count = 2
							holding_type = temple
						}
					}
				}
			}
		}
		
		effect = {
			wealth = -1000
			character_event = { id = generalmisc.19 }
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}	
	}

	ilsensine_awaken_psi = {
		ai_check_interval = 1000
		
		potential = {
			is_adult = yes
			religion = illithid_pantheon
			NOR = {
				trait = psi_potential
				trait = creature_illithid
				trait = creature_ulitharid
				trait = creature_elder_brain
				trait = creature_aboleth
				AND = {
					trait = creature_dragon
					gfx_culture_scope = {
						OR = {
							culture = amethyst_dragon
							culture = sapphire_dragon
							culture = topaz_dragon
							culture = emerald_dragon
							culture = crystal_dragon
						}
					}
				}
				z_psion = yes
			}
		}
		allow = {
			piety = 300
			is_incapable = no
			NOR = {
				z_monk = yes
				trait = dim
				trait = dumb
				trait = slow
				trait = idiot
				trait = imbecile
				trait = inbred
			}
		}
		
		effect = {
			piety = -300
			character_event = { id = generalmisc.16 }
		}
		
		ai_will_do = {
			factor = 0.2
		}
	}

	# Religion Change Player Decision
	rlg_chg_player_dec = {
		ai = no

		potential = {
			reforming_gov = yes
			not_casting = yes
			NOR = {
				trait = avatar
				evilcat_is_chosen = yes
				mercenary = yes
				holy_order = yes
				controls_religion = yes
				has_society_landed_title = yes
				culture = monster
				religion = monster_pantheon
				has_character_flag = rlg_chg_dec_flag
			}
			has_game_rule = {
				name = diversity
				value = on
			}
		}

		allow = {
			age >= 18
			is_incapable = no
			prisoner = no
			NOT = { trait = zealous }
			piety = 250
		}

		effect = {
			piety = -250
			set_character_flag = rlg_chg_dec_flag
			clr_character_flag = rlg_chg_1_flag
			character_event = { id = rlg_chg.1 }
		}
	}

	hire_helmite_bodyguards = {
		ai_check_interval = 20
		only_playable = yes

		potential = {
			not_casting = yes
			OR = {
				religion = triadic
				religion = mercantile
				religion = ten_thousand_gods
				religion = muhjari
			}
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			OR = {
				AND = {
					NOT = { trait = patron_helm }
					#wealth = 50
					scaled_wealth = {
						value = 0.4
						min = 25
						max = 100
					}
				}
				AND = {
					trait = patron_helm
					#wealth = 30
					scaled_wealth = {
						value = 0.2
						min = 15
						max = 60
					}
				}
			}
			NOT = { has_character_modifier = helmite_bodyguards }
		}

		effect = {
			if = {
				limit = {
					trait = patron_helm
				}
				#wealth = -30
				scaled_wealth = { value = -0.25 min = -20 max = -65 }
			}
			else = {
				#wealth = -50
				scaled_wealth = { value = -0.45 min = -30 max = -110 }
			}
			add_character_modifier = {
				name = helmite_bodyguards
				years = 3
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.7
				intrigue = 10
			}
			modifier = {
				factor = 3
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = patron_helm
			}
		}
	}

	summon_spectator = {
		ai_check_interval = 20
		only_playable = yes

		potential = {
			not_casting = yes
			trait = patron_helm
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			piety = 50
			NOT = { has_character_modifier = summoned_spectator }
		}

		effect = {
			piety = -50
			add_character_modifier = {
				name = summoned_spectator
				months = 30
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.7
				intrigue = 10
			}
			modifier = {
				factor = 3
				trait = paranoid
			}
		}
	}

	recruit_helmite_commander = {
		ai = no
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_helm
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = bloodline_inspire_commanders bloodline_is_active_for = PREV } }
					random_list = {
						95 = {
							spawn_great_helm_commander_effect = yes
						}
						5 = {
							spawn_fantastic_helm_commander_effect = yes
							new_character = {
								opinion = {
			 						modifier = opinion_legendary_commander
			 						years = 50
			 		  				who = ROOT
			 					}
							}
						}
					}
				}
				else = {
					spawn_good_helm_commander_effect = yes
				}
			}
			custom_tooltip = { text = promoted_commander_TT }
			character_event = { id = NE.1 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}

	ceremony_of_honor_to_helm = {
		is_high_prio = yes
		ai_check_interval = 40
		only_playable = yes

		potential = {
			trait = patron_helm
			not_casting = yes
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = SHIELDMEET
				hidden_tooltip = { has_global_flag = shieldmeet_year }
			}
			custom_tooltip = {
				text = SHIELDMET
				hidden_tooltip = {
					NOT = { has_character_modifier = shieldmet }
				}
			}
			month = 6
			NOT = { month = 7 }
		}

		effect = {
			hidden_tooltip = {
				add_character_modifier = {
					name = shieldmet
					months = 4
				}
			}
			character_event = { id = divrel.1 }
		}

		ai_will_do = {
			factor = 0.7
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.3
				trait = cynical
			}
			modifier = {
				factor = 1.3
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}


	resplendent_youth = {
		ai_check_interval = 200
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_tyr
			age = 50
			faerun_immortal_race_trigger = no
			NOT = { trait = longevity }
		}

		allow = {
			piety = 800
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = RESPYCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = respy }
						had_character_flag = {
							flag = respy
							years = 30
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = respy
			set_character_flag = respy
			piety = -800
			character_event = { id = divrel.2 }
		}

		ai_will_do = {
			factor = 0.05
		}
	}

	recruit_torm_paladin = {
		ai = no
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_torm
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = bloodline_inspire_commanders bloodline_is_active_for = PREV } }
					random_list = {
						95 = {
							spawn_great_paladin_effect = yes
						}
						5 = {
							spawn_fantastic_paladin_effect = yes
							new_character = {
								opinion = {
			 						modifier = opinion_legendary_commander
			 						years = 50
			 		  				who = ROOT
			 					}
							}
						}
					}
				}
				else = {
					spawn_good_paladin_effect = yes
				}
			}
			custom_tooltip = { text = promoted_commander_TT }
			character_event = { id = NE.1 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}

	torm_tactics = {
		ai_check_interval = 20

		potential = {
			reforming_gov = yes
			not_casting = yes
			can_have_more_leadership_traits = yes
			NOR = {
				trait = shield_of_torm
				trait = sword_of_torm
			}
			trait = patron_torm
			is_adult = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			piety = 40
		}

		effect = {
			piety = -40
			character_event = { id = divrel.3 }
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				z_paladin = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	torm_divine_death = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_torm
			has_global_flag = tot_ended
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 8
			NOT = { month = 9 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = divine_death }
						had_character_flag = {
							flag = divine_death
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = divine_death
			set_character_flag = divine_death
			character_event = { id = divrel.7 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}
	torm_true_resurrection = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_torm
			has_global_flag = tot_ended
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 10
			NOT = { month = 11 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = truerez }
						had_character_flag = {
							flag = truerez
							months = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = truerez
			set_character_flag = truerez
			character_event = { id = divrel.8 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	dragonborn_transformation = {
		ai_check_interval = 300

		potential = {
			reforming_gov = yes
			not_casting = yes
			OR = {
				religion = bahamut
				trait = patron_bahamut
			}
			NOR = {
				faerun_immortal_race_trigger = yes
				trait = creature_kobold
				trait = creature_dragonborn
				trait = creature_illithid
				trait = creature_ulitharid
			}
		}

		allow = {
			piety = 800
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
		}

		effect = {
			piety = -800
			character_event = { id = divrel.9 }
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	bahamut_attract_dragon = {
		ai = no
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			OR = {
				trait = patron_bahamut
				religion = bahamut
			}
		}
		allow = {
			piety = 250
			scaled_wealth = 1
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = BAHDRGCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = bahdrg }
						had_character_flag = {
							flag = bahdrg
							years = 20
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = bahdrg
			set_character_flag = bahdrg
			piety = -250
			scaled_wealth = -1
			hidden_tooltip = {
				create_character = {
					age = 150
					trait = creature_dragon
					random_traits = yes
					female = random
					employer = ROOT
					culture = draconic
					religion = draconic_pantheon
					dynasty = actually_culture
					immortal_age = 30
				}
				new_character = {
					random_list = {
						1 = {
							add_age = 50
						}
						1 = {
							add_age = 100
						}
						1 = {
							add_age = 150
						}
						1 = {
							add_age = 200
						}
						1 = {
							add_age = 250
						}
						1 = {
							add_age = 300
						}
						1 = {
							add_age = 350
						}
					}
					random_list = {
						10 = {
							culture = brass_dragon
							set_graphical_culture = brass_dragon
						}
						10 = {
							culture = bronze_dragon
							set_graphical_culture = bronze_dragon
						}
						10 = {
							culture = copper_dragon
							set_graphical_culture = copper_dragon
						}
						3 = {
							culture = gold_dragon
							set_graphical_culture = gold_dragon
						}
						1 = {
							culture = silver_dragon
							set_graphical_culture = silver_dragon
						}
					}
					religion = ROOT
					if = {
						limit = {
							NOT = { religion = bahamut }
						}
						add_trait = patron_bahamut
					}
					opinion = {
						modifier = servant_of_bahamut
						who = ROOT
						years = 10
					}
				}
			}
			custom_tooltip = { text = BAHDRG }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}

	ilmater_health = {
		only_rulers = yes
		ai_check_interval = 20

		potential = {
			not_casting = yes
			trait = patron_ilmater
		}

		allow = {
			NOT = { has_character_modifier = ilmater_health_mod }
			piety = 80
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
		}

		effect = {
			piety = -80
			add_character_modifier = {
				name = ilmater_health_mod
				years = 2
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 3
				NOT = { health = 3 }
			}
			modifier = {
				factor = 0.4
				health = 6
			}
		}
	}

	hoar_penultimate_thunder = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_hoar
			has_global_flag = tot_ended
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 8
			NOT = { month = 9 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = penultimate_thunder }
						had_character_flag = {
							flag = penultimate_thunder
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = penultimate_thunder
			set_character_flag = penultimate_thunder
			character_event = { id = divrel.14 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	hoar_impending_doom = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_hoar
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 9
			NOT = { month = 10 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = impending_doom }
						had_character_flag = {
							flag = impending_doom
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = impending_doom
			set_character_flag = impending_doom
			character_event = { id = divrel.15 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	siamorphe_divine_pageantry = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_siamorphe
		}

		allow = {
			scaled_wealth = 0.1
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 6
			NOT = { month = 7 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = pageantry }
						had_character_flag = {
							flag = pageantry
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = pageantry
			scaled_wealth = -0.1
			set_character_flag = pageantry
			character_event = { id = divrel.16 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	employ_siamorphe_steward = {
		ai = no
		only_playable = yes

		potential = {
			trait = patron_siamorphe
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			scaled_wealth = 0.25
			piety = 35
			NOT = {
				has_character_modifier = in_seclusion
			}
		}
		effect = {
			piety = -35
			scaled_wealth = -0.25
			if = {
				limit = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_patriarchal
						#religion = loviatar
						religion = lolth_cult
						NOT = { has_law = status_of_women_4 }
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = random
					female = 50
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
			if = {
				limit = {
					OR = {
						has_religion_feature = religion_matriarchal
						#religion = loviatar
						religion = lolth_cult
						#religion = kiaransalee
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = random
					female = yes
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
			if = {
				limit = {
					OR = {
						has_religion_feature = religion_patriarchal
						#religion = vhaeraun
						NOT = { has_law = status_of_women_4 }
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = random
					female = no
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}

	loyal_vassalage = {
		ai_check_interval = 100
		only_playable = yes

		potential = {
			trait = patron_siamorphe
			reforming_gov = yes
			not_casting = yes
		}

		allow = {
			piety = 50
			custom_tooltip = {
				text = VASSCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = loyvass }
						had_character_flag = {
							flag = loyvass
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = loyvass
			piety = -100
			set_character_flag = loyvass
			add_character_modifier = {
				name = loyal_vassals
				years = 2
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
		}
	}

	divine_bloodline = {
		ai_check_interval = 500
		only_playable = yes

		potential = {
			trait = patron_siamorphe
			reforming_gov = yes
			not_casting = yes
			NOT = {
				any_owned_bloodline = {
					OR = {
						has_bloodline_flag = historical_bloodline
						has_bloodline_flag = created_bloodline
						has_bloodline_flag = saintly_bloodline
					}
				}
			}
			NOT = {
				any_dynasty_member = { # No active created bloodline in dynasty
					any_owned_bloodline = {
						OR = {
							has_bloodline_flag = historical_bloodline
							has_bloodline_flag = created_bloodline
							has_bloodline_flag = saintly_bloodline
						}
					}
				}
			}
		}
		allow = {
			piety = 350
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
		}
		effect = {
			piety = -350
			character_event = { id = divrel.17 }
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.7
				trait = humble
			}
		}
	}

	auril_midwinter = {
		only_rulers = yes
		ai_check_interval = 36

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_auril
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			month = 0
			NOT = { month = 1 }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = auril_midwinter }
						had_character_flag = {
							flag = auril_midwinter
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = auril_midwinter
			set_character_flag = auril_midwinter
			character_event = { id = divrel.19 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	auril_winter_soldier = {
		ai_check_interval = 120

		potential = {
			trait = patron_auril
			can_have_more_leadership_traits = yes
			NOT = { trait = winter_soldier }
			reforming_gov = yes
			not_casting = yes
		}

		allow = {
			wealth = 20
			piety = 35
			NOT = { trait = incapable }
			NOT = { trait = infirm }
		}

		effect = {
			wealth = -20
			piety = -35
			add_trait = winter_soldier
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				martial = 6
			}
			modifier = {
				factor = 2
				OR = {
					z_fighter = yes
					z_paladin = yes
					z_barbarian = yes
					z_ranger = yes
				}
			}
			modifier = {
				factor = 0.2
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
	}

	auril_embrace = {
		ai_check_interval = 500

		potential = {
			trait = patron_auril
			NOT = { has_character_modifier = embraced_by_auril }
			NOT = { has_character_flag = embraced_by_auril }
			reforming_gov = yes
			not_casting = yes
		}

		allow = {
			character_disease_trigger = no
			has_symptom_trigger = no
			has_injury_trigger = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
		}

		effect = {
			set_character_flag = embraced_by_auril
			hidden_tooltip = {
				random = {
					chance = 35
					modifier = {
						factor = 0.7
						trait = zealous
					}
					modifier = {
						factor = 1.3
						trait = cynical
					}
					modifier = {
						factor = 0.5
						is_strong_trigger = yes
					}
					modifier = {
						factor = 2
						is_weak_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_injury_trigger = yes
					}
					modifier = {
						factor = 2
						is_maimed_trigger = yes
					}
					modifier = {
						factor = 4
						has_severe_disability_trigger = yes
					}
					modifier = {
						factor = 2.5
						has_medium_disability_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_minor_disability_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_mental_disorder_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_negative_congenital_trigger = yes
					}
					modifier = {
						factor = 0.7
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 0.5
						OR = {
							z_cleric = yes
							z_paladin = yes
							z_druid = yes
						}
					}
					modifier = {
						factor = 0.8
						OR = {
							z_barbarian = yes
							z_monk = yes
							z_ranger = yes
							z_fighter = yes
						}
					}
					modifier = {
						factor = 0.5
						trait = winter_soldier
					}
					set_character_flag = died_to_embrace
				}
			}
			character_event = { id = divrel.20 }
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 0.1
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.2
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
	}

	garagos_tactics = {
		ai_check_interval = 20

		potential = {
			reforming_gov = yes
			not_casting = yes
			can_have_more_leadership_traits = yes
			NOT = { trait = slaughterer }
			trait = patron_garagos
			is_adult = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			piety = 40
		}

		effect = {
			piety = -40
			add_trait = slaughterer
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				z_fighter = yes
			}
			modifier = {
				factor = 2
				z_barbarian = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	garagos_berserker = {
		ai_check_interval = 50

		potential = {
			reforming_gov = yes
			not_casting = yes
			NOT = { trait = berserker }
			trait = patron_garagos
			is_adult = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = patient }
			NOT = { trait = craven }
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			piety = 30
		}

		effect = {
			piety = -30
			add_trait = berserker
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				z_fighter = yes
			}
			modifier = {
				factor = 4
				z_barbarian = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	garagos_corner_foe = {
		ai_check_interval = 300

		potential = {
			reforming_gov = yes
			not_casting = yes
			trait = patron_garagos
			is_adult = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = GARAGOSDUEL
				hidden_tooltip = {
					location = {
						owner = {
							OR = {
								is_foe = yes
								war_with = ROOT
							}
						}
					}
				}
			}
			custom_tooltip = {
				text = GARAGOSDUEL2
				hidden_tooltip = {
					location = {
						any_province_character = {
							ai = yes
							prisoner = no
							NOT = { trait = incapable }
							NOT = { trait = infirm }
							NOT = { is_inaccessible_trigger = yes }
							is_adult = yes
							NOT = { character = ROOT }
							NOT = { same_realm = ROOT }
							NOT = { same_liege = ROOT }
						}
					}
				}
			}
			custom_tooltip = {
				text = GARAGOSDUELCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = garagosduel }
						had_character_flag = {
							flag = garagosduel
							months = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = garagosduel
			set_character_flag = garagosduel
			save_event_target_as = combatant_1
			location = {
				random_province_character = {
					limit = {
						ai = yes
						prisoner = no
						NOT = { trait = incapable }
						NOT = { trait = infirm }
						NOT = { is_inaccessible_trigger = yes }
						is_adult = yes
						NOT = { character = ROOT }
						NOT = { same_realm = ROOT }
						NOT = { same_liege = ROOT }
					}
					save_event_target_as = combatant_2
				}
			}
			character_event = { id = divrel.24 }
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 1.2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = berserker
			}
			modifier = {
				factor = 2
				trait = duelist
			}
			modifier = {
				factor = 2
				z_fighter = yes
			}
			modifier = {
				factor = 2
				z_barbarian = yes
			}
			modifier = {
				factor = 2
				z_ranger = yes
			}
			modifier = {
				factor = 2
				z_paladin = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	blood_festival = {
		ai_check_interval = 100
		only_playable = yes

		potential = {
			trait = patron_garagos
			reforming_gov = yes
			not_casting = yes
			is_adult = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = BLOODFESTIVALCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = bloodfestival }
						had_character_flag = {
							flag = bloodfestival
							years = 3
						}
					}
				}
			}
			scaled_wealth = {
				value = 0.2
				min = 10
				max = 60
			}
		}

		effect = {
			clr_character_flag = bloodfestival
			set_character_flag = bloodfestival
			scaled_wealth = {
				value = -0.2
				min = -10
				max = -60
			}
			clr_character_flag = blood_festival
			set_character_flag = blood_festival
			character_event = { id = divrel.25 }
		}
	}

	malar_become_werebeast = {
		ai_check_interval = 500

		potential = {
			is_adult = yes
			NOR = {
				trait = natural_lycanthrope
				trait = afflicted_lycanthrope
				trait = vampire
				trait = vampire_spawn
				trait = undead
				trait = lich
				trait = archlich
				trait = lich_baelnorn
				trait = avatar
			}
			OR = {
				trait = creature_drow
				trait = creature_elf
				trait = creature_half_elf
				trait = creature_feyri
				trait = creature_draegloth
				trait = creature_spirit_folk
				trait = creature_dwarf
				trait = creature_half_dwarf
				trait = creature_giant
				trait = creature_half_giant
				trait = creature_ogre
				trait = creature_half_ogre
				trait = creature_ogrillon
				trait = creature_troll
				trait = creature_goliath
				trait = creature_gnome
				trait = creature_gith
				trait = creature_goblin
				trait = creature_hobgoblin
				trait = creature_bugbear
				trait = creature_hagspawn
				trait = creature_halfling
				trait = creature_human
				trait = creature_deep_imaskari
				trait = creature_orc
				trait = creature_half_orc
				trait = creature_tanarukk
				trait = creature_genasi
				trait = creature_tiefling
				trait = creature_aasimar
			}
			trait = patron_malar
			reforming_gov = yes
			not_casting = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			piety = 50
		}

		effect = {
			piety = -50
			add_trait = afflicted_lycanthrope
			random_list = {
				1 = {
					add_trait = werewolf
				}
				1 = {
					add_trait = wererat
				}
				1 = {
					add_trait = weretiger
				}
			}
		}

		ai_will_do = {
			factor = 0.3
		}
	}

	get_claws_of_malar = {
		ai_check_interval = 50

		potential = {
			is_adult = yes
			trait = patron_malar
			reforming_gov = yes
			not_casting = yes
			NOT = {
				any_artifact = {
					artifact_type = claws_of_malar
				}
			}
		}

		allow = {
			piety = 25
			wealth = 50
		}

		effect = {
			piety = -25
			wealth = -50
			add_artifact = claws_of_malar
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 3
				OR = {
					z_fighter = yes
					z_barbarian = yes
					z_ranger = yes
				}
			}
		}
	}

	celebrate_feast_of_the_stags = {
		ai_check_interval = 24
		only_rulers = yes

		potential = {
			is_adult = yes
			trait = patron_malar
			reforming_gov = yes
			not_casting = yes
		}

		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = STAGFEASTCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = stagfeast }
						had_character_flag = {
							flag = stagfeast
							years = 3
						}
					}
				}
			}
			month = 8
			NOT = { month = 9 }
		}

		effect = {
			clr_character_flag = stagfeast
			set_character_flag = stagfeast
			character_event = { id = divrel.26 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	patrons_fae_cf = {
		is_high_prio = yes
		ai = no
		potential = {
			reforming_gov = yes
			not_casting = yes
			OR = {
				is_ruler = yes
				has_job_title = yes
				has_minor_title = yes
				z_cleric = yes
				z_druid = yes
				z_paladin = yes
			}
			age = 16
			NOR = {
				trait = incapable
				#trait = infirm
				trait = possessed
				trait = avatar
			}
			has_patron_god = no
			OR = {
				religion = calishite_faith
				religion = triadic
				religion = arcane
				religion = rasallesian
				religion = chessic
				religion = mercantile
				religion = inventive
				religion = joyful
				religion = solar
				religion = lapal_faith
				religion = untheric_faith
				religion = mulhorandi_faith
				religion = halfling_pantheon
				religion = dead_three
				religion = shadow_gods
				religion = abyssal_cult
				religion = scale_cult
				religion = deities_of_fury
				religion = tuigan_shamanism
				religion = natural
				religion = primordial
				religion = martial_faith
				#religion = ten_thousand_gods
				#religion = kahin
				religion = qisma
				religion = pantheist_league
				religion = muhjari
				religion = adama
				religion = elven_pantheon
				religion = dwarven_pantheon
				religion = gnome_pantheon
				religion = orc_pantheon
				religion = orc_reformed
				#religion = draconic_pantheon
				#religion = ulutiuan
				#religion = ulutiuan_reformed
				religion = yuir
				religion = yuir_reformed
				religion = toteteohuan
				religion = toteteohuan_reformed
			}
		}
		effect = {
			if = {
				limit = {
					religion = calishite_faith
				}
				character_event = { id = PATRONS_FAE_CF.1 }
			}
			else_if = {
				limit = {
					religion = triadic
				}
				character_event = { id = PATRONS_FAE_TRIAD.1 }
			}
			else_if = {
				limit = {
					religion = arcane
				}
				character_event = { id = PATRONS_FAE_ARCANE.1 }
			}
			else_if = {
				limit = {
					religion = rasallesian
				}
				character_event = { id = PATRONS_FAE_RAS.1 }
			}
			else_if = {
				limit = {
					religion = chessic
				}
				character_event = { id = PATRONS_FAE_CHESSIC.1 }
			}
			else_if = {
				limit = {
					religion = mercantile
				}
				character_event = { id = PATRONS_FAE_MERC.1 }
			}
			else_if = {
				limit = {
					religion = inventive
				}
				character_event = { id = PATRONS_FAE_INVENT.1 }
			}
			else_if = {
				limit = {
					religion = joyful
				}
				character_event = { id = PATRONS_FAE_JOY.1 }
			}
			else_if = {
				limit = {
					religion = solar
				}
				character_event = { id = PATRONS_FAE_SOLAR.1 }
			}
			else_if = {
				limit = {
					religion = lapal_faith
				}
				character_event = { id = PATRONS_FAE_LAPAL.1 }
			}
			else_if = {
				limit = {
					religion = untheric_faith
				}
				character_event = { id = PATRONS_FAE_UNTH.1 }
			}
			else_if = {
				limit = {
					religion = mulhorandi_faith
				}
				character_event = { id = PATRONS_FAE_MUL.1 }
			}
			else_if = {
				limit = {
					religion = halfling_pantheon
				}
				character_event = { id = PATRONS_FAE_HALF.1 }
			}
			else_if = {
				limit = {
					religion = dead_three
				}
				character_event = { id = PATRONS_FAE_DEAD.1 }
			}
			else_if = {
				limit = {
					religion = shadow_gods
				}
				character_event = { id = PATRONS_FAE_SHADOW.1 }
			}
			else_if = {
				limit = {
					religion = abyssal_cult
				}
				character_event = { id = PATRONS_FAE_ABYSS.1 }
			}
			else_if = {
				limit = {
					religion = scale_cult
				}
				character_event = { id = PATRONS_FAE_SCALE.1 }
			}
			else_if = {
				limit = {
					religion = deities_of_fury
				}
				character_event = { id = PATRONS_FAE_DOF.1 }
			}
			else_if = {
				limit = {
					religion = tuigan_shamanism
				}
				character_event = { id = PATRONS_FAE_TUI.1 }
			}
			else_if = {
				limit = {
					religion = natural
				}
				character_event = { id = PATRONS_FAE_NATURAL.1 }
			}
			else_if = {
				limit = {
					religion = primordial
				}
				character_event = { id = PATRONS_FAE_PRIMO.1 }
			}
			else_if = {
				limit = {
					religion = martial_faith
				}
				character_event = { id = PATRONS_FAE_MARTIAL.1 }
			}
			else_if = {
				limit = {
					OR = {
						religion = ten_thousand_gods
						religion = kahin
						religion = qisma
						religion = pantheist_league
						religion = muhjari
					}
				}
				character_event = { id = PATRONS_FAE_ZAKH.1 }
			}
			else_if = {
				limit = {
					religion = adama
				}
				character_event = { id = PATRONS_FAE_ADAMA.1 }
			}
			else_if = {
				limit = {
					religion = elven_pantheon
				}
				character_event = { id = PATRONS_FAE_ELF.1 }
			}
			else_if = {
				limit = {
					religion = dwarven_pantheon
				}
				character_event = { id = PATRONS_FAE_DWARF.1 }
			}
			else_if = {
				limit = {
					religion = gnome_pantheon
				}
				character_event = { id = PATRONS_FAE_GNOME.1 }
			}
			else_if = {
				limit = {
					orc_religion_trigger = yes
				}
				character_event = { id = PATRONS_FAE_ORC.1 }
			}
			#else_if = {
			#	limit = {
			#		religion = draconic_pantheon
			#	}
			#	character_event = { id = PATRONS_FAE_DRAGON.1 }
			#}
			else_if = {
				limit = {
					OR = {
						religion = ulutiuan
						religion = ulutiuan_reformed
					}
				}
				character_event = { id = PATRONS_FAE_ULU.1 }
			}
			else_if = {
				limit = {
					OR = {
						religion = yuir
						religion = yuir_reformed
					}
				}
				character_event = { id = PATRONS_FAE_YUIR.1 }
			}
			else_if = {
				limit = {
					OR = {
						religion = toteteohuan
						religion = toteteohuan_reformed
					}
				}
				character_event = { id = PATRONS_FAE_MAZTICA.1 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0.2
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
			modifier = {
				factor = 1.1
				trait = zealous
			}
			modifier = {
				factor = 100
				OR = {
					z_cleric = yes
					z_druid = yes
					z_paladin = yes
				}
			}
		}
	}

	find_runecaster = {
		only_playable = yes
		ai_check_interval = 36
		potential = {
			reforming_gov = yes
			not_casting = yes
			religion = giant_pantheon
			is_adult = yes
			prisoner = no
			NOT = { has_character_flag = looking_for_guru }
			NOT = { has_character_flag = found_guru }
			NOT = {
				any_courtier = {
					has_minor_title = title_runecaster
				}
			}
		}
		allow = {
			prisoner = no
			wealth = 50
			prestige = 300
		}
		effect = {
			wealth = -50
			set_character_flag = looking_for_guru
			character_event = { id = Ordning.0001 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 0
				NOT = { wealth = 200 }
			}
		}
	}

	restore_delzoun = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = silver_marches_region
			}
			e_delzoun = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = DUKE
			wealth = 600
			piety = 400
			custom_tooltip = {
				text = DELZOUN_CONDITIONS
				c_adbar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_sundabar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_felbarr = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_the_fork = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_arn_forest = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -400
			wealth = -600
			grant_title = e_delzoun
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_ammarindar = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = northern_heartlands_region
			}
			k_ammarindar = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = AMMARINDAR_CONDITIONS
				d_ammarindar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				d_greypeaks = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_ammarindar
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_besilmer = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = sword_coast_north_region
			}
			k_besilmer = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = BESILMER_CONDITIONS
				c_beliard = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_red_larch = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_uluvin = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_horn_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_westwood = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_besilmer
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_dareth = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				OR = {
					region = sossal_region
					region = pelvuria_region
				}
			}
			k_dareth = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = { # NOTE: Rework this when underdark provinces are around!
				text = DARETH_CONDITIONS
				d_ushar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				c_dharvil = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_dareth
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_gharraghaur = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = savage_frontier_region
			}
			k_gharraghaur = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = GHARRAGHAUR_CONDITIONS
				d_mirabar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				c_mirabar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_starmetal_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_mt_hotenow = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_lyntara = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_khedrun_valley = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_gharraghaur
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_haunghdannar = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = sword_coast_north_region
			}
			d_haunghdannar = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = BARON
			wealth = 250
			custom_tooltip = {
				text = HAUNGHDANNAR_CONDITIONS
				c_leilon = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_kryptgarden_forest = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_cony_gap = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			wealth = -250
			grant_title = d_haunghdannar
			c_leilon = {
				de_jure_liege = d_haunghdannar
			}
			c_kryptgarden_forest = {
				de_jure_liege = d_haunghdannar
			}
			c_cony_gap = {
				de_jure_liege = d_haunghdannar
			}
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_ironstar = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = savage_frontier_region
			}
			d_ironstar = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = BARON
			wealth = 250
			custom_tooltip = {
				text = IRONSTAR_CONDITIONS
				c_valley_of_klaidson = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_dark_arrow = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_frost_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			wealth = -250
			grant_title = d_ironstar
			c_frost_hills = {
				de_jure_liege = d_ironstar
			}
			c_dark_arrow = {
				de_jure_liege = d_ironstar
			}
			c_valley_of_klaidson = {
				de_jure_liege = d_ironstar
			}
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_oghrann = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = western_heartlands_region
			}
			k_oghrann = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = OGHRANN_CONDITIONS
				c_darkhold = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_veilstone = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_tun = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_marsh_of_tun = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_storm_horns = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_oghrann
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 4
				dynasty = 4953 # The Iron House
			}
		}
	}

	restore_sarphil = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = moonsea_region
			}
			k_sarphil = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = SARPHIL_CONDITIONS
				c_hulburg = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_galenarr = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_hillsfar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_mulmaster = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_sarphil
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	restore_tethyamar = {
		ai_check_interval = 50
		only_playable = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
			any_realm_province = {
				region = anauroch_region
			}
			k_tethyamar = {
				has_holder = no
			}
			reforming_gov = yes
			not_casting = yes
		}
		allow = {
			independent = yes
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = TETHYAMAR_CONDITIONS
				c_tethyamar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_miir = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				OR = {
					c_lost_vale = {
						owner = {
							OR = {
								character = ROOT
								any_liege = {
									character = ROOT
								}
							}
						}
						location = {
							religion = ROOT
						}
					}
					c_mhaelos = {
						owner = {
							OR = {
								character = ROOT
								any_liege = {
									character = ROOT
								}
							}
						}
						location = {
							religion = ROOT
						}
					}
				}
			}
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_tethyamar
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 4
				dynasty = 4953 # The Iron House
			}
		}
	}

	cure_wound_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 12
		potential = {
			OR = {
				has_injury_trigger = yes
				trait = mangled
			}
			prisoner = no
			not_casting = yes
			reforming_gov = yes
			NOR = {
				religion = faithless
				religion = blue_flame
			}
		}
		allow = {
			OR = {
				AND = {
					wealth = 50
					piety = 50
				}
				AND = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
					wealth = 25
					piety = 25
				}
			}
			NOT = { has_character_modifier = took_wounds }
		}
		effect = {
			if = {
				limit = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
				}
				wealth = -25
				piety = -25
			}
			else = {
				wealth = -50
				piety = -50
			}
			if = {
				limit = {
					trait = mangled
				}
				remove_trait = mangled
				break = yes
			}
			else_if = {
				limit = {
					trait = severely_injured
				}
				remove_trait = severely_injured
				add_trait = wounded
				break = yes
			}
			remove_trait = wounded
		}
	}

	regenerate_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 36
		potential = {
			OR = {
				has_character_modifier = rel_diversity_mod
				has_character_modifier = total_diversity_mod
			}
			is_maimed_trigger = yes
			NOT = { trait = mangled }
			prisoner = no
			not_casting = yes
			reforming_gov = yes
			NOR = {
				religion = faithless
				religion = blue_flame
			}
		}
		allow = {
			wealth = 100
			piety = 50
			NOT = { has_character_modifier = took_wounds }
		}
		effect = {
			wealth = -100
			piety = -50
			custom_tooltip = {
				text = ALLREGENERATED
				hidden_tooltip = {
					remove_trait = wounded
					remove_trait = mangled
					remove_trait = severely_injured
					remove_trait = disfigured
					remove_trait = one_legged
					remove_trait = one_handed
					remove_trait = eunuch
					remove_character_modifier = phantom_pain
					if = {
						limit = {
							AND = {
								trait = creature_beholder
								OR = {
									z_wizard = yes
									z_bard = yes
									z_warlock = yes
								}
							}
						}
						remove_trait = blinded
						add_trait = one_eyed
					}
					else = {
						remove_trait = one_eyed
						remove_trait = blinded
					}
				}
			}
		}
	}

	cure_disease_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 12
		potential = {
			OR = {
				character_disease_trigger = yes
				trait = ill
				trait = sickly
			}
			prisoner = no
			not_casting = yes
			reforming_gov = yes
			NOR = {
				religion = faithless
				religion = blue_flame
			}
		}
		allow = {
			OR = {
				AND = {
					wealth = 100
					piety = 50
				}
				AND = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
					wealth = 50
					piety = 25
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
				}
				wealth = -50
				piety = -25
			}
			else = {
				wealth = -100
				piety = -50
			}
			custom_tooltip = {
				text = ONEDISEASECURED
				hidden_tooltip = {
					remove_symptoms_effect = yes
					remove_trait = sickly
					remove_character_modifier = mild_illness
					remove_character_modifier = severe_illness
					remove_character_modifier = bedridden_illness
					#remove treatments
					remove_character_modifier = mystic_treatment_decent
					remove_character_modifier = mystic_treatment_poor
					remove_character_modifier = mystic_treatment_terrible
					remove_character_modifier = symptom_treatment_1
					remove_character_modifier = symptom_treatment_2
					remove_character_modifier = symptom_treatment_3
					remove_character_modifier = symptom_treatment_4
					remove_character_modifier = successful_treatment_1
					remove_character_modifier = successful_treatment_2
					remove_character_modifier = successful_treatment_3
					remove_character_modifier = failed_treatment_1
					remove_character_modifier = failed_treatment_2
					#to avoid unintended permanent regency
					remove_trait = sick_incapable
					if = {
						limit = {
							NOT = { has_dlc = "Reapers" }
						}
						remove_trait = ill
					}
					else_if = {
						limit = {
							has_dlc = "Reapers"
						}
						random_list = {
							40 = {
								modifier = {
									NOT = { trait = flu }
									factor = 0
								}
								remove_trait = flu
								clr_character_flag = manifest_flu
							}
							20 = {
								modifier = {
									NOT = { trait = dysentery }
									factor = 0
								}
								remove_trait = dysentery
							}
							10 = {
								modifier = {
									NOT = { trait = rabies }
									factor = 0
								}
								remove_trait = rabies
							}
							20 = {
								modifier = {
									NOT = { trait = has_measles }
									factor = 0
								}
								remove_trait = has_measles
							}
							40 = {
								modifier = {
									NOT = {
										trait = food_poisoning
									}
									factor = 0
								}
								remove_trait = food_poisoning
							}
							20 = {
								modifier = {
									NOT = { trait = gout }
									factor = 0
								}
								remove_trait = gout
							}
							40 = {
								modifier = {
									NOT = { trait = scurvy }
									factor = 0
								}
								remove_trait = scurvy
							}
							20 = {
								modifier = {
									NOT = { trait = lovers_pox }
									factor = 0
								}
								remove_trait = lovers_pox
							}
							5 = {
								modifier = {
									NOT = { trait = cancer }
									factor = 0
								}
								remove_trait = cancer
							}
							10 = {
								modifier = {
									NOT = { trait = pneumonic }
									factor = 0
								}
								remove_trait = pneumonic
							}
							10 = {
								modifier = {
									NOT = { trait = syphilitic }
									factor = 0
								}
								remove_trait = syphilitic
							}
							5 = {
								modifier = {
									NOT = { trait = leper }
									factor = 0
								}
								remove_trait = leper
							}
							10 = {
								modifier = {
									NOT = { trait = has_tuberculosis}
									factor = 0
								}
								remove_trait = has_tuberculosis
							}
							10 = {
								modifier = {
									NOT = { trait = has_aztec_disease}
									factor = 0
								}
								remove_trait = has_aztec_disease
							}
							10 = {
								modifier = {
									NOT = { trait = has_small_pox}
									factor = 0
								}
								remove_trait = has_small_pox
							}
							10 = {
								modifier = {
									NOT = { trait = has_bubonic_plague}
									factor = 0
								}
								remove_trait = has_bubonic_plague
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhus}
									factor = 0
								}
								remove_trait = has_typhus
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhoid_fever}
									factor = 0
								}
								remove_trait = has_typhoid_fever
							}
						}
					}
				}
			}
		}
	}

	money_to_piety = {
		only_playable = yes
		ai_check_interval = 6
		potential = {
			not_casting = yes
			reforming_gov = yes
			NOR = {
				religion = adama
				religion = padhran
				religion = monster_pantheon
				religion = pagan
				religion = faithless
				religion = qukoku
			}
		}
		allow = {
			#wealth = 50
			scaled_wealth = { value = 0.25 min = 10 max = 250 }
			custom_tooltip = {
				text = MtPCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = money_to_piety }
						had_character_flag = {
							flag = money_to_piety
							months = 6
						}
					}
				}
			}
		}
		effect = {
			set_character_flag = money_to_piety
			character_event = { id = divrel.18 }
		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.5
				NOT = { wealth = 75 }
			}
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}

	dof_weak_abdicate = {
		ai_check_interval = 100

		only_playable = yes

		potential = {
			dof_is_weak_ruler = yes
			religion = deities_of_fury
			not_casting = yes
			hidden_tooltip = {
				OR = {
					ai = no
					age = 35
				}
			}
		}

		allow = {
			is_incapable = no
		}

		effect = {
			if = {
				limit = {
					tier = COUNT
				}
				player_heir = {
					piety = 50
				}
			}
			else_if = {
				limit = {
					tier = DUKE
				}
				player_heir = {
					piety = 100
				}
			}
			else_if = {
				limit = {
					tier = KING
				}
				player_heir = {
					piety = 200
				}
			}
			else_if = {
				limit = {
					tier = EMPEROR
				}
				player_heir = {
					piety = 300
				}
			}
			player_heir = {
				add_character_modifier = {
					name = dof_abdicated
					years = 2
				}
			}
			player_heir = {
				ROOT = {
					transfer_scaled_wealth = {
						from = THIS
						to = PREV
						value = all
					}
					any_artifact = {
						transfer_artifact = {
							from = PREV
							to = PREVPREV
						}
					}
					abdicate_to = PREV
					move_character = PREV
				}
			}
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.3
				player_heir = {
					NOT = { dynasty = ROOT }
				}
			}
		}
	}

	highmagic_celestial_army = {
		only_playable = yes
		ai_check_interval = 100
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			piety = 400
			scaled_wealth = {
				value = 0.05
				min = 100
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = celestial_army }
						had_character_flag = { flag = celestial_army years = 5 }
					}
				}
			}
			OR = {
				is_primary_war_defender = yes
				AND = {
					is_primary_war_attacker = yes
					any_current_enemy = {
						is_primary_war_defender = yes
						custom_tooltip = {
							text = enemy_of_seldarine
							OR = {
								trait = patron_malar
								trait = patron_ghaunadaur
								religion = ghaunadaur
								religion = vhaeraun
								religion = kiaransalee
								trait = patron_talos
								trait = patron_auppenser
								religion = lolth_cult
								orc_religion_trigger = yes
								goblin_religion_trigger = yes
								religion = vaprak
								religion = infernal
								religion = abyssal_cult
								religion = entropy
								religion = faithless
								trait = patron_hyrsam
							}
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = celestial_army
			set_character_flag = celestial_army
			piety = -400
			scaled_wealth = {
				value = -0.05
				min = -100
			}
			set_character_flag = celestial_army_roll_flag
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							earmark = celestial_army
							troops = {
								warpriests = { 100 100 }
								mages_troops = { 100 100 }
								light_infantry = { 1250 1250 }
								heavy_infantry = { 500 500 }
								archers = { 500 500 }
							}
							disband_on_peace = yes
							attrition = 0
							maintenance_multiplier = 0
							can_toggle_looting = no
							cannot_inherit = yes
							reinforces = no
						}
					}
				}
				hidden_tooltip = {
					character_event = { id = seldarine.1 months = 12 }
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.7
		}
	}

	highmagic_reverend_one = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 10
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			OR = {
				is_primary_war_defender = yes
				AND = {
					is_primary_war_attacker = yes
					any_current_enemy = {
						is_primary_war_defender = yes
						custom_tooltip = {
							text = enemy_of_seldarine
							OR = {
								trait = patron_malar
								trait = patron_ghaunadaur
								religion = ghaunadaur
								religion = vhaeraun
								religion = kiaransalee
								trait = patron_talos
								trait = patron_auppenser
								religion = lolth_cult
								orc_religion_trigger = yes
								goblin_religion_trigger = yes
								religion = vaprak
								religion = infernal
								religion = abyssal_cult
								religion = entropy
								religion = faithless
								trait = patron_hyrsam
							}
						}
					}
				}
			}
		}
		allow = {
			piety = 100
			scaled_wealth = {
				value = 0.01
				min = 50
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = reverend_one_cd }
						had_character_flag = { flag = reverend_one_cd years = 5 }
					}
				}
			}
		}
		effect = {
			clr_character_flag = reverend_one_cd
			set_character_flag = reverend_one_cd
			piety = -100
			scaled_wealth = {
				value = -0.01
				min = -50
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				create_character = {
					age = 500
					attributes = {
						martial = 7
					}
					trait = creature_elf
					trait = skilled_tactician
					trait = celibate
					trait = tb_sterile # Just in case
					trait = duelist
					random_traits = yes
					female = random
					religion = elven_pantheon
					culture = ROOT
					dynasty = actually_culture
					immortal_age = 30
				}
				new_character = {
					set_character_flag = reverend_one
					culture = einheriar
					add_character_modifier = {
						name = reverend_one_mod
						duration = -1
					}
					random_list = {
						1 = {
							remove_trait = skilled_tactician
							add_trait = brilliant_strategist
						}
						5 = {
						}
					}
					random_list = {
						1 = {
							add_trait = master_fighter
						}
						1 = {
							add_trait = master_ranger
						}
						1 = {
							add_trait = master_paladin
						}
						5 = {
							add_trait = expert_fighter
						}
						5 = {
							add_trait = expert_ranger
						}
						5 = {
							add_trait = expert_paladin
						}
						9 = {
							add_trait = journeyman_fighter
						}
						9 = {
							add_trait = journeyman_ranger
						}
						9 = {
							add_trait = journeyman_paladin
						}
					}
					random_list = {
						1 = {
							add_trait = aggressive_leader
						}
						1 = {
							add_trait = narrow_flank_leader
						}
						1 = {
							add_trait = defensive_leader
						}
						1 = {
							add_trait = experimenter
						}
						1 = {
							add_trait = flanker
						}
						1 = {
							add_trait = holy_warrior
						}
						1 = {
							add_trait = inspiring_leader
						}
						1 = {
							add_trait = trickster
						}
						1 = {
							add_trait = unyielding_leader
						}
						1 = {
							add_trait = winter_soldier
						}
						1 = {
							add_trait = light_foot_leader
						}
					}
					give_minor_title = title_commander
				}
			}
			hidden_tooltip = {
				character_event = { id = seldarine.6 months = 12 }
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.7
		}
	}

	highmagic_nymphs_aura = {
		only_playable = yes
		ai_check_interval = 10
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			NOR = {
				trait = creature_hag
				trait = beautiful
			}
			piety = 50
			scaled_wealth = {
				value = 0.01
				min = 50
				max = 150
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = nymph_aura_cd }
						had_character_flag = { flag = nymph_aura_cd years = 5 }
					}
				}
			}
		}
		effect = {
			clr_character_flag = nymph_aura_cd
			set_character_flag = nymph_aura_cd
			piety = -50
			scaled_wealth = {
				value = -0.01
				min = -50
				max = -150
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				if = {
					limit = {
						NOR = {
							trait = pretty
							trait = fair
							trait = beautiful
							trait = plain
							trait = ugly
							trait = unsightly
						}
					}
					add_trait = fair
				}
				else_if = {
					limit = {
						OR = {
							trait = pretty
							trait = fair
							trait = plain
							trait = ugly
							trait = unsightly
						}
					}
					trigger_switch = {
						on_trigger = trait
						unsightly = {
							remove_trait = unsightly
							add_trait = ugly
						}
						ugly = {
							remove_trait = ugly
							add_trait = plain
						}
						plain = {
							remove_trait = plain
						}
						pretty = {
							remove_trait = pretty
							add_trait = beautiful
						}
						fair = {
							remove_trait = fair
							add_trait = pretty
						}
					}
				}
			}
			clr_character_flag = high_magic_success
		}
	}

	highmagic_baelnorn = {
		only_playable = yes
		ai_check_interval = 200
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			piety = 250
			scaled_wealth = {
				value = 0.05
				min = 50
				max = 300
			}
			age = 500
			learning = 7
			trait = creature_elf
			is_undead = no
			NOR = {
				trait = immortal
				trait = avatar
			}
			custom_tooltip = {
				text = HIGHCLASSLEVEL
				OR = {
					trait = master_bard
					trait = master_wizard
					trait = master_sorcerer
					trait = master_warlock
					trait = master_cleric
					trait = master_druid
					trait = master_ranger
					trait = master_monk
					trait = master_fighter
					trait = master_barbarian
					trait = master_rogue
					trait = master_shadow
					trait = master_paladin
					trait = renowned_bard
					trait = renowned_wizard
					trait = renowned_sorcerer
					trait = renowned_warlock
					trait = renowned_cleric
					trait = renowned_druid
					trait = renowned_ranger
					trait = renowned_monk
					trait = renowned_fighter
					trait = renowned_barbarian
					trait = renowned_rogue
					trait = renowned_shadow
					trait = renowned_paladin
					trait = legendary_bard
					trait = legendary_wizard
					trait = legendary_sorcerer
					trait = legendary_warlock
					trait = legendary_cleric
					trait = legendary_druid
					trait = legendary_ranger
					trait = legendary_monk
					trait = legendary_fighter
					trait = legendary_barbarian
					trait = legendary_rogue
					trait = legendary_shadow
					trait = legendary_paladin
				}
			}
			is_pregnant = no
		}
		effect = {
			piety = -250
			scaled_wealth = {
				value = -0.05
				min = -50
				max = -300
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				add_trait = lich_baelnorn
				add_trait = disinherited
				set_graphical_culture = lichelf
				player_heir = {
					if = {
						limit = {
							OR = {
								dynasty = ROOT
								is_close_relative = ROOT
							}
						}
						add_character_modifier = {
							name = mod_baelnorn_predecessor
							years = 10
						}
					}
				}
				abdicate = { move = no }
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
	}

	highmagic_worldweave = {
		only_playable = yes
		ai_check_interval = 50
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			piety = 500
			scaled_wealth = {
				value = 0.1
				min = 300
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = worldweave }
						had_character_flag = { flag = worldweave years = 5 }
					}
				}
			}
			custom_tooltip = {
				text = WORLDWEAVE_NUM
				any_demesne_province = {
					num_of_max_settlements < 7
				}
			}
		}
		effect = {
			piety = -500
			scaled_wealth = {
				value = -0.1
				min = -300
			}
			clr_character_flag = worldweave
			set_character_flag = worldweave
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				random_demesne_province = {
					limit = {
						num_of_max_settlements < 7
					}
					province_event = { id = seldarine.8 }
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.33
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}


	highmagic_mythal = {
		only_playable = yes
		ai_check_interval = 150
		potential = {
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
			has_character_flag = has_high_mage
			is_adult = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			piety = 350
			scaled_wealth = {
				value = 0.07
				min = 150
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = mythal }
						had_character_flag = { flag = mythal years = 5 }
					}
				}
			}
			any_demesne_province = {
				NOT = {
					has_province_modifier = mythal_mod
				}
			}
		}
		effect = {
			piety = -350
			scaled_wealth = {
				value = -0.07
				min = -150
			}
			clr_character_flag = mythal
			set_character_flag = mythal
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				capital_scope = {
					add_province_modifier = {
						name = mythal_mod
						duration = -1
					}
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}

	seld_invite_fey = {
		ai_check_interval = 30
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			religion = elven_pantheon
		}

		allow = {
			piety = 15
			custom_tooltip = {
				text = INVITEFEY_CD
				OR = {
					NOT = { has_character_flag = invitefey }
					had_character_flag = { flag = invitefey months = 18 }
				}
			}
		}
		effect = {
			clr_character_flag = invitefey
			set_character_flag = invitefey
			piety = -15
			random_list = {
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = sylvan
						culture = satyr
						female = random
						age = 35
						trait = creature_satyr
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = sylvan
						culture = treant
						female = random
						age = 150
						trait = creature_treant
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = sylvan
						culture = centaur
						female = random
						age = 35
						trait = creature_centaur
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = sylvan
						culture = eladrin
						female = random
						age = 150
						trait = creature_elf
						trait = feytouched
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = sylvan
						culture = hengeyokai
						female = random
						age = 35
						trait = creature_hengeyokai
						immortal_age = 30
					}
				}
			}
			new_character = {
				random_list = {
					1 = {
						religion = elven_pantheon
					}
					1 = {
						# empty!
					}
				}
				opinion = {
					modifier = invited_fey
					who = ROOT
					years = 5
				}
				character_event = { id = seldarine.11 }
			}
		}
		ai_will_do = {
			factor = 0.1
		}
	}

	invite_high_mage = {
		ai_check_interval = 30
		only_playable = yes

		potential = {
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			religion = elven_pantheon
			higher_tier_than = DUKE
			any_courtier_or_vassal = {
				has_minor_title = title_high_mage
			}
		}

		allow = {
			piety = 100
			scaled_wealth = {
				value = 0.2
				min = 250
				max = 1000
			}
			custom_tooltip = {
				text = NOHIGHMAGE
				any_courtier_or_vassal = {
					NOT = { has_character_flag = invited_selutaar }
				}
			}
		}
		effect = {
			piety = -100
			scaled_wealth = {
				value = -0.2
				min = -250
				max = -1000
			}
			random_list = {
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = elven_pantheon
						culture = sun_elf
						female = random
						age = 550
						trait = creature_elf
						trait = scholarly_theologian
						attributes = { learning = 8 }
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = actually_culture
						religion = elven_pantheon
						culture = moon_elf
						female = random
						age = 550
						trait = creature_elf
						trait = scholarly_theologian
						attributes = { learning = 8 }
						immortal_age = 30
					}
				}
			}
			new_character = {
				set_character_flag = invited_selutaar
				give_minor_title = title_high_mage
				random = {
					chance = 20
					remove_trait = scholarly_theologian
					add_trait = mastermind_theologian
				}
				random_list = {
					1 = {
						add_trait = legendary_sorcerer
					}
					3 = {
						add_trait = legendary_wizard
					}
					10 = {
						add_trait = renowned_sorcerer
					}
					30 = {
						add_trait = renowned_wizard
					}
					50 = {
						add_trait = master_sorcerer
					}
					150 = {
						add_trait = master_wizard
					}
				}
				ROOT = {
					character_event = { id = seldarine.10 }
				}
			}
		}
		ai_will_do = {
			factor = 0.05
		}
	}

	join_retreat = {
		only_playable = yes
		ai_check_interval = 150
		potential = {
			reforming_gov = yes
			not_casting = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			religion = elven_pantheon
			is_adult = yes
			NOT = {
				location = {
					region = evermeet_region
				}
			}
		}
		allow = {
			trait = creature_elf
			custom_tooltip = {
				text = ELVENEVERMEET
				e_evermeet = { # to avoid any_title
					any_de_jure_vassal_title = {
						region = evermeet_region
						holder_scope = {
							religion = elven_pantheon
							OR = {
								culture_group = high_elf_group
								culture_group = sylvan_elf_group
								culture_group = eladrin_group
							}
						}
					}
				}
			}
		}
		effect = {
			player_heir = {
				prestige = 30
				piety = 30
			}
			abdicate = yes
			add_trait = disinherited
			random_landed_title = {
				limit = {
					has_holder = yes
					capital_scope = { region = evermeet_region }
					holder_scope = {
						religion = elven_pantheon
						OR = {
							culture_group = high_elf_group
							culture_group = sylvan_elf_group
							culture_group = eladrin_group
						}
					}
				}
				holder_scope = {
					ROOT = { move_character = PREV }
				}
			}
		}
		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 3
				trait = content
			}
			modifier = {
				factor = 10
				trait = depressed
			}
			modifier = {
				factor = 3
				age = 700
			}
		}
	}

	take_vow_of_poverty = {
		ai_check_interval = 40
		only_playable = yes

		potential = {
			not_casting = yes
			religion = triadic
			NOT = { has_character_modifier = vow_of_poverty }
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			NOT = { trait = greedy }
		}

		effect = {
			add_character_modifier = {
				name = vow_of_poverty
				duration = -1
			}
		}

		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	remove_vow_of_poverty = {
		ai_check_interval = 40
		only_playable = yes

		potential = {
			not_casting = yes
			religion = triadic
			has_character_modifier = vow_of_poverty
		}

		allow = {
			piety = 50
		}

		effect = {
			piety = -50
			remove_character_modifier =  vow_of_poverty
		}

		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = cynical
			}
		}
	}

	pick_beast_totem = {
		ai_check_interval = 12
		is_high_prio = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			uthgardt_faith_trigger = yes
			NOT = { has_uthgardt_totem = yes }
			OR = {
				ai = no
				AND = {
					ai = yes
					OR = {
						independent = yes
						NOT = {
							any_liege = {
								uthgardt_faith_trigger = yes
							}
						}
						any_liege = {
							uthgardt_faith_trigger = yes
							has_uthgardt_totem = yes
						}
					}
				}
			}
		}
		allow = {
			always = yes
		}
		effect = {
			character_event = { id = uthgar.1 }
		}
		ai_will_do = {
			factor = 1
		}
	}

	uthgar_emulate_beast = {
		ai_check_interval = 24
		only_playable = yes

		potential = {
			reforming_gov = yes
			not_casting = yes
			uthgardt_faith_trigger = yes
			has_uthgardt_totem = yes
		}
		allow = {
			custom_tooltip = {
				text = EMUBEASTCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = emulated_beast }
						had_character_flag = {
							flag = emulated_beast
							years = 3
						}
					}
				}
			}
			piety = 30
		}
		effect = {
			piety = -30
			trigger_switch = {
				on_trigger = trait
				uthgar_black_lion = {
					add_character_modifier = {
						name = emulate_black_lion
						months = 18
					}
				}
				uthgar_black_raven = {
					add_character_modifier = {
						name = emulate_black_raven
						months = 18
					}
				}
				uthgar_blue_bear = {
					add_character_modifier = {
						name = emulate_blue_bear
						months = 18
					}
				}
				uthgar_elk = {
					add_character_modifier = {
						name = emulate_elk
						months = 18
					}
				}
				uthgar_gray_wolf = {
					add_character_modifier = {
						name = emulate_gray_wolf
						months = 18
					}
				}
				uthgar_great_worm = {
					add_character_modifier = {
						name = emulate_great_worm
						months = 18
					}
				}
				uthgar_griffon = {
					add_character_modifier = {
						name = emulate_griffon
						months = 18
					}
				}
				uthgar_red_tiger = {
					add_character_modifier = {
						name = emulate_red_tiger
						months = 18
					}
				}
				uthgar_sky_pony = {
					add_character_modifier = {
						name = emulate_sky_pony
						months = 18
					}
				}
				uthgar_thunderbeast = {
					add_character_modifier = {
						name = emulate_thunderbeast
						months = 18
					}
				}
				uthgar_tree_ghost = {
					add_character_modifier = {
						name = emulate_tree_ghost
						months = 18
					}
				}
			}
		}
	}

	uthgar_runemeet = {
		ai_check_interval = 12
		only_playable = yes # for optimization
		potential = {
			reforming_gov = yes
			not_casting = yes
			uthgardt_faith_trigger = yes
			is_adult = yes
		}
		allow = {
			custom_tooltip = {
				text = UTHOBSRUNE
				hidden_tooltip = {
					NOT = { has_character_flag = attending_runemeet }
				}
			}
			custom_tooltip = {
				text = MUSTBEELEINT
				hidden_tooltip = {
					month = 8
					NOT = { month = 9 }
				}
			}
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uth_runemeet }
						had_character_flag = {
							flag = uth_runemeet
							years = 3
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = uth_runemeet
			set_character_flag = uth_runemeet
			character_event = {
				id = uthgar.11
			}
			character_event = { # to purge the flags after a little bit
				id = uthgar.10 months = 2
			}
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0.25
				trait = cynical
			}
		}
	}

	mound_burial_decision = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 12
		potential = {
			not_casting = yes
			reforming_gov = yes
			is_playable = yes
			has_character_flag = mound_burial
			NOT = { has_character_flag = performed_mound_burial }
			uthgardt_faith_trigger = yes
		}
		allow = {
			is_adult = yes
			in_command = no
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		effect = {
			custom_tooltip = { text = mound_burial_custom_tooltip }
			hidden_tooltip = {
				character_event = { id = uthgar.28 }
				clr_character_flag = mound_burial
				set_character_flag = performed_mound_burial
			}
		}
		ai_will_do = {
			factor = 0.75
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = zealous
			}
		}
	}

	uthgardt_ancestral_host = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 10
		potential = {
			not_casting = yes
			reforming_gov = yes
			uthgardt_faith_trigger = yes
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			is_primary_war_defender = yes
		}
		allow = {
			piety = 70
			custom_tooltip = {
				text = ANCESTRALHOST_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uthgardt_ancestral_host }
						had_character_flag = { flag = uthgardt_ancestral_host years = 3 }
					}
				}
			}
		}
		effect = {
			clr_character_flag = uthgardt_ancestral_host
			set_character_flag = uthgardt_ancestral_host
			piety = -70
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						earmark = ancestral_host
						troops = {
							undead_troops = { 1000 1000 }
						}
						disband_on_peace = yes
						attrition = 0
						maintenance_multiplier = 0
						can_toggle_looting = no
						cannot_inherit = yes
						reinforces = no
					}
				}
			}
			hidden_tooltip = {
				character_event = { id = uthgar.30 months = 12 }
			}
		}
		ai_will_do = {
			factor = 0.7
		}
	}

	uthgardt_ancestral_champion = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 10
		potential = {
			not_casting = yes
			reforming_gov = yes
			uthgardt_faith_trigger = yes
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
			is_primary_war_defender = yes
		}
		allow = {
			piety = 35
			custom_tooltip = {
				text = ANCESTRALHOST_CD
				hidden_tooltip = {
					NOT = { had_character_flag = { flag = uthgardt_ancestral_champ years = 3 } }
				}
			}
		}
		effect = {
			set_character_flag = uthgardt_ancestral_champ
			piety = -35
			create_character = {
				age = 50
				attributes = {
					martial = 7
				}
				trait = creature_human
				trait = undead
				trait = skilled_tactician
				random_traits = yes
				female = random
				religion = uthgardt_faith
				culture = undead_human
				dynasty = none
			}
			new_character = {
				set_character_flag = uthgar_champ
				culture = uthgardt
				add_character_modifier = {
					name = sacred_uthgar_ancestor
					duration = -1
				}
				random_list = {
					1 = {
						remove_trait = skilled_tactician
						add_trait = brilliant_strategist
					}
					10 = {
					}
				}
				random_list = {
					1 = {
						add_trait = expert_fighter
					}
					1 = {
						add_trait = expert_barbarian
					}
					5 = {
						add_trait = journeyman_fighter
					}
					5 = {
						add_trait = journeyman_barbarian
					}
					9 = {
						add_trait = trained_fighter
					}
					9 = {
						add_trait = trained_barbarian
					}
				}
				random_list = {
					1 = {
						add_trait = aggressive_leader
					}
					1 = {
						add_trait = narrow_flank_leader
					}
					1 = {
						add_trait = defensive_leader
					}
					1 = {
						add_trait = experimenter
					}
					1 = {
						add_trait = flanker
					}
					1 = {
						add_trait = holy_warrior
					}
					1 = {
						add_trait = inspiring_leader
					}
					1 = {
						add_trait = trickster
					}
					1 = {
						add_trait = unyielding_leader
					}
					1 = {
						add_trait = winter_soldier
					}
					1 = {
						add_trait = light_foot_leader
					}
				}
				give_minor_title = title_commander
				hidden_tooltip = {
					character_event = { id = uthgar.31 months = 16 }
				}
			}
		}
		ai_will_do = {
			factor = 0.7
		}
	}

	uthgardt_great_beast = {
		only_playable = yes
		ai_check_interval = 50
		potential = {
			not_casting = yes
			reforming_gov = yes
			uthgardt_faith_trigger = yes
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		allow = {
			NOT = { trait = cynical }
			NOT = { trait = avatar }
			custom_tooltip = {
				text = GREATBEASTCD
				hidden_tooltip = {
					NOT = { has_character_flag = uthgreatbeast }
				}
			}
			piety = 450
			has_uthgardt_totem = yes
		}
		effect = {
			piety = -450
			set_character_flag = uthgreatbeast
			character_event = { id = uthgar.34 days = 10 }
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
		}
	}

	hold_uthgar_season_feast = {
		only_playable = yes
		ai_check_interval = 3
		potential = {
			reforming_gov = yes
			not_casting = yes
			is_playable = yes
			is_adult = yes
			prisoner = no
			has_dlc = "The Old Gods"
			uthgardt_faith_trigger = yes
			NOT = { has_character_modifier = held_uthfeast_timer }
			NOT = {	has_character_flag = holding_uthfeast }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		allow = {
			war = no
			custom_tooltip = {
				text = UNOCCUPIED_DEMESNE_TITLE
				hidden_tooltip = {
					any_demesne_title = {
						NOT = { higher_tier_than = count }
						is_occupied = no
					}
				}
			}
			OR = {
				AND = {
					month = 3
					NOT = { month = 4 }
				}
				AND = {
					month = 6
					NOT = { month = 7 }
				}
				month = 12
			}
			wealth = 50
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uth_seasonfest }
						had_character_flag = {
							flag = uth_seasonfest
							years = 3
						}
					}
				}
			}
		}
		effect = {
			wealth = -50
			clr_character_flag = uth_seasonfest
			set_character_flag = uth_seasonfest
			set_character_flag = holding_uthfeast
			set_character_flag = recent_minor_decision
			set_character_flag = do_not_disturb
			hidden_tooltip = { character_event = { id = uthgar.36 days = 150 } } # Safety catch flag clearing
			custom_tooltip = {
				text = prepare_uthfeast
				hidden_tooltip = {
					character_event = { id = uthgar.37 }
				}
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				random = {
					chance = 40
					custom_tooltip = {
						text = capital_prospers_custom_tooltip
						hidden_tooltip = {
							capital_scope = {
								change_variable = { which = prosperity_value value = 8 }
							}
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				NOT = {
					wealth = 300
				}
			}
			modifier = {
				factor = 0
				trait = shy
			}
			modifier = {
				factor = 0
				NOT = { diplomacy = 10 }
			}
			modifier = {
				factor = 0
				has_character_flag = recent_minor_decision
				NOT = {
					had_character_flag = {
						flag = recent_minor_decision
						days = 730
					}
				}
			}
		}
	}

}

targeted_decisions = {

	possess_prisoner = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		ai_check_interval = 400
		
		from_potential = {
			religion = abyssal_cult
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
		}
		
		potential = {
			NOR = {
				trait = creature_fiend
				trait = creature_construct
				trait = creature_angel
				trait = creature_genie
				is_undead = yes
				trait = construct
				trait = creature_monster
			}
			prisoner = yes
			hidden_tooltip = {
				ai = yes
			}
		}
		
		allow = {
			NOT = { trait = possessed }
			FROM = { piety = 70 }
		}
		
		effect = {
			FROM = {
				piety = -70
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
			}
			add_trait = possessed
			opinion = {
				modifier = opinion_tortured_me
				who = FROM
			}
			imprison = no
		}
		ai_will_do = {
			factor = 0.3	
		}
	}
	
	steal_knowledge = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		ai_check_interval = 400
		
		from_potential = {
			religion = illithid_pantheon
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
		}
		
		potential = {
			NOR = {
				trait = creature_illithid
				trait = creature_ulitharid
				trait = creature_elder_brain
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
				AND = {
					trait = creature_dwarf
					gfx_culture_scope = {
						culture = derro
					}
				}
			}
			prisoner = yes
			hidden_tooltip = {
				ai = yes
			}
		}
		
		allow = {
			FROM = {
				piety = 200
				NOR = {
					has_character_modifier = stolen_thoughts_diplo
					has_character_modifier = stolen_thoughts_intrigue
					has_character_modifier = stolen_thoughts_learn
					has_character_modifier = stolen_thoughts_martial
					has_character_modifier = stolen_thoughts_steward
				}
			}
		}
		
		effect = {
			FROM = {
				piety = -200
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
				random_list = {
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_diplo
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_martial
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_steward
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_intrigue
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_learn
							years = 2
						}
					}
				}
			}
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3	
		}
	}
	
	shatter_mind = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		ai_check_interval = 400
		
		from_potential = {
			religion = illithid_pantheon
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
		}
		
		potential = {
			NOR = {
				trait = creature_illithid
				trait = creature_ulitharid
				trait = creature_elder_brain
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
				AND = {
					trait = creature_dwarf
					gfx_culture_scope = {
						culture = derro
					}
				}
			}
			prisoner = yes
			hidden_tooltip = {
				ai = yes
			}
		}
		
		allow = {
			NOT = { trait = lunatic }
			FROM = { piety = 70 }
		}
		
		effect = {
			FROM = {
				piety = -70
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						NOT = { trait = genius }
					}
					remove_trait = genius
					add_trait = brilliant
				}
				1 = {
					modifier = {
						factor = 0
						NOT = { trait = brilliant }
					}
					remove_trait = brilliant
					add_trait = quick
				}
				1 = {
					modifier = {
						factor = 0
						NOT = { trait = quick }
					}
					remove_trait = quick
					add_trait = smart
				}
				1 = {
					modifier = {
						factor = 0
						NOT = { trait = smart }
					}
					remove_trait = smart
					add_trait = bright
				}
				1 = {
					modifier = {
						factor = 0
						NOT = { trait = bright }
					}
					remove_trait = bright
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = diligent }
					}
					remove_trait = diligent
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = just }
					}
					remove_trait = just
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = just
							trait = arbitrary
						}
					}
					add_trait = arbitrary
				}
				15 = {
					modifier = {
						factor = 0
						NOT = { trait = brave }
					}
					remove_trait = brave
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = brave
							trait = craven
						}
					}
					add_trait = craven
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = trusting
							trait = paranoid
						}
					}
					add_trait = paranoid
				}
				5 = {
					add_trait = lunatic
				}
				1 = {
					change_diplomacy = -1
				}
				1 = {
					change_martial = -1
				}
				1 = {
					change_stewardship = -1
				}
				1 = {
					change_learning = -1
				}
			}
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3	
		}
	}
	
	extract_secret = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		ai_check_interval = 400
		
		from_potential = {
			religion = illithid_pantheon
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
		}
		
		potential = {
			NOR = {
				trait = creature_illithid
				trait = creature_ulitharid
				trait = creature_elder_brain
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
			}
			prisoner = yes
			hidden_tooltip = {
				ai = yes
			}
		}
		
		allow = {
			NOT = { owes_favor_to = FROM }
			FROM = { piety = 150 }
		}
		
		effect = {
			FROM = {
				piety = -150
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 25
					add_trait = cruel
				}
			}
			add_favor =	FROM
			imprison = no
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3	
		}
	}

	torm_join_war = {
		only_rulers = yes
		ai_check_interval = 30
		filter = independent_rulers
		ai_target_filter = independent_rulers

		from_potential = {
			always = no
			trait = patron_torm
			is_adult = yes
			is_landed = yes
		}

		potential = {
			olrox_is_good_religion_trigger = yes
		}

		allow = {
			FROM = {
				prisoner = no
				NOT = { trait = incapable }
				NOT = { trait = infirm }
				NOT = { is_inaccessible_trigger = yes }
			}
			war = yes
			is_primary_war_defender = yes
		}

		effect = {
			save_event_target_as = tormtarget
			FROM = {
				join_defender_wars = ROOT
				piety = 50
				ROOT = {
					letter_event = { id = divrel.4 }
				}
				character_event = { id = divrel.5 months = 3 }
			}
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 3
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 2
				FROM = { trait = brave }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = craven }
			}
			modifier = {
				factor = 3
				FROM = {
					opinion = {
						who = ROOT
						value = 25
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
				}
			}
			modifier = {
				factor = 3
				FROM = { is_friend = ROOT }
			}
			modifier = {
				factor = 0
				FROM = { is_rival = ROOT }
			}
		}
	}

	take_on_pain = {
		ai_check_interval = 120
		filter = realm
		ai_target_filter = court

		from_potential = {
			trait = patron_ilmater
		}

		potential = {
			has_injury_trigger = yes
		}

		allow = {
			FROM = {
				custom_tooltip = {
					text = ILMWOUND1
					hidden_tooltip = {
						has_injury_trigger = no
					}
				}
			}
		}

		effect = {
			custom_tooltip = {
				text = ILMWOUND2
				hidden_tooltip = {
					FROM = {
						add_character_modifier = {
							name = took_wounds
							months = 16
						}
					}
					if = {
						limit = {
							trait = severely_injured
						}
						remove_trait = severely_injured
						FROM = {
							add_trait_severely_injured_effect = yes
							piety = 75
						}
					}
					else_if = {
						limit = {
							trait = wounded
						}
						remove_trait = wounded
						FROM = {
							add_trait_wounded_effect = yes
							piety = 30
						}
					}
					opinion = {
						modifier = healed_me
						who = FROM
						years = 2
					}
					character_event = { id = divrel.10 }
				}
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				FROM = { is_friend = ROOT }
			}
			modifier = {
				factor = 0
				FROM = { is_foe = ROOT }
			}
		}

	}

	hoar_declare_rival = {
		ai_check_interval = 200
		ai_target_filter = independent_rulers
		filter = all
		only_playable = yes

		from_potential = {
			not_casting = yes
			trait = patron_hoar
			OR = {
				ai = no
				AND = {
					ai = yes
					NOT = {
						opinion = {
							who = ROOT
							value = -49
						}
					}
				}
			}
		}

		potential = {
			OR = {
				ai = yes
				AND = {
					ai = no
					NOT = {
						opinion = {
							who = FROM
							value = -49
						}
					}
				}
			}
		}

		allow = {
			FROM = {
				piety = 35
				custom_tooltip = {
					text = HOARRIVCD
					hidden_tooltip = {
						OR = {
							NOT = { has_character_flag = hoarriv }
							had_character_flag = {
								flag = hoarriv
								years = 3
							}
						}
					}
				}
				is_adult = yes
				prisoner = no
				NOT = { trait = incapable }
				NOT = { trait = infirm }
				NOT = { is_inaccessible_trigger = yes }
			}
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
		}

		effect = {
			FROM = { piety = -30 }
			FROM = { add_rival = ROOT }
			character_event = { id = divrel.11 }
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0.5
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				FROM = { trait = wroth }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = trusting }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = content }
			}
		}
	}

	revenance = {
		ai_check_interval = 500
		filter = rivals
		ai_target_filter = rivals
		only_playable = yes

		from_potential = {
			trait = patron_hoar
			not_casting = yes
		}

		potential = {
			any_kill_list_character = {
				count = 1
			}
		}

		allow = {
			FROM = {
				piety = 350
				is_adult = yes
				prisoner = no
				NOT = { trait = incapable }
				NOT = { trait = infirm }
				NOT = { is_inaccessible_trigger = yes }
			}
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = REVENANCED
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = revenanced }
						had_character_flag = {
							flag = revenanced
							years = 10
						}
					}
				}
			}
		}

		effect = {
			FROM = { piety = -350 }
			character_event = { id = divrel.12 }
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				FROM = { trait = wroth }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = content }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = zealous }
			}
		}
	}

	# "Demand Religious Conversion"
	# Note: need to disable DEMAND_RELIGIOUS_CONVERSION_INTERACTION_ENABLED in defines.lua
	# - Split in 2 decisions as there is no ai_target_filter for both direct vassals and courtiers.

	demand_courtier_religious_conversion = {
		ai_target_filter = home_court
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			trait = zealous
			OR = {
				is_evil_religion = yes
				}
			NOR = {
				government = democratic_feudal_government
				government = magocratic_feudal_government
				government = chinese_imperial_government
				government = celestial_government
				government = celestial_bureaucracy
				government = nomadic_tribal_government
				}
		}
		potential = {
			NOT = { religion = FROM }
			vassal_of = FROM
			is_ruler = no
			NOT = { trait = avatar }
		}
		allow = {
			# opinion = { who = FROM value = 5 }
			NOT = { controls_religion = yes }
			NOT = { trait = zealous }
			NOT = { has_character_flag = ai_flag_refuse_conversion }
			is_incapable = no
			is_adult = yes
		}
		effect = {
			# Fire any event that would normally be fired by the on_action on_vassal_accepts_religious_conversion
			custom_tooltip = {
				text = "demand_religious_conversion_tooltip"
				hidden_tooltip = {
					FROM = {
						character_event = { id = conv.1 }
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
		ai_acceptance = {
			factor = 0	# The base score
			yes_threshold = 0
			show_maybe_for_human = yes

			additive_modifier = {			# Custom localizations are located in traits_religious
				value = -20
				localisation_key = AIREASON_BASE_RELUCTANCE
				always = yes
				}
			additive_modifier = {
				value = 25
				trait = cynical
				}
			additive_modifier = {
				value = 5
				trait = arbitrary
				}
			additive_modifier = {
				value = 5
				trait = cruel
				}
			additive_modifier = {
				value = 5
				trait = lunatic
				}
			additive_modifier = {
				value = 5
				trait = content
				}
			additive_modifier = {
				value = 5
				trait = trusting
				}
			additive_modifier = {
				value = 5
				trait = craven
				}
			additive_modifier = {
				value = 5
				trait = deceitful
				}
			additive_modifier = {
				value = 5
				trait = envious
				}
			additive_modifier = {
				value = 5
				trait = greedy
				}
			additive_modifier = {
				value = 5
				trait = slothful
				}
			additive_modifier = {
				value = 5
				trait = dull
				}
			additive_modifier = {
				value = 5
				trait = dim
				}
			additive_modifier = {
				value = 10
				trait = dumb
				}
			additive_modifier = {
				value = 15
				trait = slow
				}
			additive_modifier = {
				value = 20
				trait = idiot
				}
			additive_modifier = {
				value = 25
				trait = imbecile
				}
			additive_modifier = {
				value = 5
				trait = pagan_branch_1
				}
			additive_modifier = {
				value = 10
				trait = cannibal_trait
				}
			additive_modifier = {
				value = 10
				trait = impaler
				}
			additive_modifier = {
				value = -20
				trait = brave
				}
			additive_modifier = {
				value = -5
				trait = paranoid
				}
			additive_modifier = {
				value = -5
				trait = just
				}
			additive_modifier = {
				value = -5
				trait = proud
				}
			additive_modifier = {
				value = -5
				trait = wroth
				}
			additive_modifier = {
				value = -5
				trait = stubborn
				}
			additive_modifier = {
				value = -5
				trait = kind
				}
			additive_modifier = {
				value = -5
				trait = humble
				}
			additive_modifier = {
				value = -5
				trait = patient
				}
			additive_modifier = {
				value = -5
				trait = charitable
				}
			additive_modifier = {
				value = -5
				trait = diligent
				}
			additive_modifier = {
				value = -5
				trait = temperate
				}
			additive_modifier = {
				value = -5
				trait = pagan_branch_3
				}
			additive_modifier = {
				value = -10
				trait = monk
				}
			additive_modifier = {
				value = -10
				trait = nun
				}
			additive_modifier = {
				value = -5
				trait = warlock
				}
			additive_modifier = {
				value = -10
				trait = trained_warlock
				}
			additive_modifier = {
				value = -15
				trait = journeyman_warlock
				}
			additive_modifier = {
				value = -20
				trait = expert_warlock
				}
			additive_modifier = {
				value = -25
				trait = master_warlock
				}
			additive_modifier = {
				value = -30
				trait = renowned_warlock
				}
			additive_modifier = {
				value = -35
				trait = legendary_warlock
				}
			additive_modifier = {
				value = -5
				trait = cleric
				}
			additive_modifier = {
				value = -10
				trait = trained_cleric
				}
			additive_modifier = {
				value = -15
				trait = journeyman_cleric
				}
			additive_modifier = {
				value = -20
				trait = expert_cleric
				}
			additive_modifier = {
				value = -25
				trait = master_cleric
				}
			additive_modifier = {
				value = -30
				trait = renowned_cleric
				}
			additive_modifier = {
				value = -35
				trait = legendary_cleric
				}
			additive_modifier = {
				value = -5
				trait = paladin
				}
			additive_modifier = {
				value = -10
				trait = trained_paladin
				}
			additive_modifier = {
				value = -15
				trait = journeyman_paladin
				}
			additive_modifier = {
				value = -20
				trait = expert_paladin
				}
			additive_modifier = {
				value = -25
				trait = master_paladin
				}
			additive_modifier = {
				value = -30
				trait = renowned_paladin
				}
			additive_modifier = {
				value = -35
				trait = legendary_paladin
				}
			additive_modifier = {
				value = -5
				trait = druid
				}
			additive_modifier = {
				value = -10
				trait = trained_druid
				}
			additive_modifier = {
				value = -15
				trait = journeyman_druid
				}
			additive_modifier = {
				value = -20
				trait = expert_druid
				}
			additive_modifier = {
				value = -25
				trait = master_druid
				}
			additive_modifier = {
				value = -30
				trait = renowned_druid
				}
			additive_modifier = {
				value = -35
				trait = legendary_druid
				}
			additive_modifier = {
				value = -5
				trait = class_monk
				}
			additive_modifier = {
				value = -10
				trait = trained_monk
				}
			additive_modifier = {
				value = -15
				trait = journeyman_monk
				}
			additive_modifier = {
				value = -20
				trait = expert_monk
				}
			additive_modifier = {
				value = -25
				trait = master_monk
				}
			additive_modifier = {
				value = -30
				trait = renowned_monk
				}
			additive_modifier = {
				value = -35
				trait = legendary_monk
				}
			additive_modifier = {
				value = -20
				trait = sympathy_many
				}
			additive_modifier = {
				value = -5
				localisation_key = sympathy_for_good_alignment_reason
				OR = {
				trait = sympathy_good_human_pantheon_group
				trait = sympathy_wild_human_pantheon_group
				trait = sympathy_qismaite_group
				trait = sympathy_karaturan_group
				trait = sympathy_elven_pantheon_group
				trait = sympathy_dwarven_pantheon_group
					}
				}
			additive_modifier = {
				value = 5
				localisation_key = sympathy_for_evil_alignment_reason
				OR = {
				trait = sympathy_evil_human_pantheon_group
				trait = sympathy_drow_pantheon
					}
				}
			additive_modifier = {
				value = -10
				trait = theologian
				}
			additive_modifier = {
				value = -10
				trait = lich_baelnorn
				}
			additive_modifier = {
				value = -10
				localisation_key = opposing_religious_alignment_reason
				OR = {
					religion_group = good_human_pantheon_group
					religion_group = qismaite_group
					religion_group = karaturan_group
					religion_group = elven_pantheon_group
					religion = dwarven_pantheon
					religion = gnome_pantheon
					religion_group = humanoid_group
					religion = adama
					religion = faithless
					religion = vhaeraun
					religion = kiaransalee
					}
				}
			additive_modifier = {
				value = -20
				trait = creature_dragon
				}
			additive_modifier = {
				value = -20
				trait = creature_fiend
			}
			additive_modifier = {
				value = -20
				trait = greater_fiend
				}
			additive_modifier = {
				value = -20
				trait = creature_genie
				}
			additive_modifier = {
				value = -20
				trait = creature_angel
				}
			additive_modifier = {
				value = -1000
				localisation_key = chosen_reason
				evilcat_is_chosen = yes
				}
			additive_modifier = {
				value = -1000
				trait = avatar
				}
			additive_modifier = {
				value = -70
				localisation_key = resilient_worshipper_reason
				has_character_flag = ai_flag_refuse_conversion
				}
			additive_modifier = {
				value = -5
				localisation_key = different_culture_reason
				NOT = { culture = FROM }
				}
			additive_modifier = {
				value = 5
				localisation_key = same_culture_reason
				culture = FROM
				}
			additive_opinion_modifier = {
				localisation_key = opinion_of_liege_reason
				factor = 0.20 # +100 Opinion = +20 points
				who = FROM
				this = ROOT # The target's opinion of the demander.
				}
			additive_modifier = {
				value = -15
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 0
					hidden_trigger = {
						NOT = { diplomacy = 3 }
					}
				}
			}
			additive_modifier = {
				value = -10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 3
					hidden_trigger = {
						NOT = { diplomacy = 8 }
					}
				}
			}
			additive_modifier = {
				value = -5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 8
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 0
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 10
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 12
					hidden_trigger = {
						NOT = { diplomacy = 16 }
					}
				}
			}
			additive_modifier = {
				value = 10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 16
					hidden_trigger = {
						NOT = { diplomacy = 20 }
					}
				}
			}
			additive_modifier = {
				value = 15
				localisation_key = liege_diplomacy_reason
				FROM = {
					show_scope_change = no
					diplomacy = 20
				}
			}
			additive_modifier = {
				value = -20
				ROOT = { is_powerful_vassal = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = { is_hard_to_convert = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = {
					OR = {
						# society_member_of = harpers  # might reveal hidden agents
						society_member_of = lord_alliance
						}
					}
			}
			additive_modifier = {
				value = 5
				localisation_key = POPE_AIREASON_MODIFIER_CLOSE_RELATIVE
				ROOT = { is_close_relative = FROM }
				}
			additive_modifier = {
				value = 15
				localisation_key = POPE_AIREASON_MODIFIER_MY_FRIEND
				ROOT = { is_friend = FROM }
			}
			additive_modifier = {
				value = 10
				localisation_key = POPE_AIREASON_MODIFIER_MY_LOVER
				ROOT = { is_lover = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = POPE_AIREASON_MODIFIER_MY_RIVAL_TARGET
				ROOT = { is_rival = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = foe_reason
				ROOT = { is_foe = FROM }
			}
		}
	}
	demand_vassal_religious_conversion = {
		ai_target_filter = vassals
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			trait = zealous
			OR = {
				religion_group = evil_human_pantheon_group
				religion_group = aberration_group
				religion_group = drow_pantheon
				religion = laduguer
				religion = entropy
				religion = faithless
				religion = urdlen
				religion = vaprak
				religion = tiamat
				}
			NOR = {
				government = democratic_feudal_government
				government = magocratic_feudal_government
				government = chinese_imperial_government
				government = celestial_government
				government = celestial_bureaucracy
				government = nomadic_tribal_government
				}
		}
		potential = {
			NOT = { religion = FROM }
			vassal_of = FROM
			is_ruler = yes
			NOT = { trait = avatar }
		}
		allow = {
			# opinion = { who = FROM value = 5 }
			NOT = { controls_religion = yes }
			NOT = { trait = zealous }
			NOT = { has_character_flag = ai_flag_refuse_conversion }
			is_incapable = no
			is_adult = yes
		}
		effect = {
			# Fire any event that would normally be fired by the on_action on_vassal_accepts_religious_conversion
			custom_tooltip = {
				text = "demand_religious_conversion_tooltip"
				hidden_tooltip = {
					FROM = {
						character_event = { id = conv.1 }
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
		ai_acceptance = {
			factor = 0	# The base score
			yes_threshold = 0
			show_maybe_for_human = yes

			additive_modifier = {			# Custom localizations are located in traits_religious
				value = -20
				localisation_key = AIREASON_BASE_RELUCTANCE
				always = yes
				}
			additive_modifier = {
				value = 25
				trait = cynical
				}
			additive_modifier = {
				value = 5
				trait = arbitrary
				}
			additive_modifier = {
				value = 5
				trait = cruel
				}
			additive_modifier = {
				value = 5
				trait = lunatic
				}
			additive_modifier = {
				value = 5
				trait = content
				}
			additive_modifier = {
				value = 5
				trait = trusting
				}
			additive_modifier = {
				value = 5
				trait = craven
				}
			additive_modifier = {
				value = 5
				trait = deceitful
				}
			additive_modifier = {
				value = 5
				trait = envious
				}
			additive_modifier = {
				value = 5
				trait = greedy
				}
			additive_modifier = {
				value = 5
				trait = slothful
				}
			additive_modifier = {
				value = 5
				trait = dull
				}
			additive_modifier = {
				value = 5
				trait = dim
				}
			additive_modifier = {
				value = 10
				trait = dumb
				}
			additive_modifier = {
				value = 15
				trait = slow
				}
			additive_modifier = {
				value = 20
				trait = idiot
				}
			additive_modifier = {
				value = 25
				trait = imbecile
				}
			additive_modifier = {
				value = 5
				trait = pagan_branch_1
				}
			additive_modifier = {
				value = 10
				trait = cannibal_trait
				}
			additive_modifier = {
				value = 10
				trait = impaler
				}
			additive_modifier = {
				value = -20
				trait = brave
				}
			additive_modifier = {
				value = -5
				trait = paranoid
				}
			additive_modifier = {
				value = -5
				trait = just
				}
			additive_modifier = {
				value = -5
				trait = proud
				}
			additive_modifier = {
				value = -5
				trait = wroth
				}
			additive_modifier = {
				value = -5
				trait = stubborn
				}
			additive_modifier = {
				value = -5
				trait = kind
				}
			additive_modifier = {
				value = -5
				trait = humble
				}
			additive_modifier = {
				value = -5
				trait = patient
				}
			additive_modifier = {
				value = -5
				trait = charitable
				}
			additive_modifier = {
				value = -5
				trait = diligent
				}
			additive_modifier = {
				value = -5
				trait = temperate
				}
			additive_modifier = {
				value = -5
				trait = pagan_branch_3
				}
			additive_modifier = {
				value = -10
				trait = monk
				}
			additive_modifier = {
				value = -10
				trait = nun
				}
			additive_modifier = {
				value = -5
				trait = warlock
				}
			additive_modifier = {
				value = -10
				trait = trained_warlock
				}
			additive_modifier = {
				value = -15
				trait = journeyman_warlock
				}
			additive_modifier = {
				value = -20
				trait = expert_warlock
				}
			additive_modifier = {
				value = -25
				trait = master_warlock
				}
			additive_modifier = {
				value = -30
				trait = renowned_warlock
				}
			additive_modifier = {
				value = -35
				trait = legendary_warlock
				}
			additive_modifier = {
				value = -5
				trait = cleric
				}
			additive_modifier = {
				value = -10
				trait = trained_cleric
				}
			additive_modifier = {
				value = -15
				trait = journeyman_cleric
				}
			additive_modifier = {
				value = -20
				trait = expert_cleric
				}
			additive_modifier = {
				value = -25
				trait = master_cleric
				}
			additive_modifier = {
				value = -30
				trait = renowned_cleric
				}
			additive_modifier = {
				value = -35
				trait = legendary_cleric
				}
			additive_modifier = {
				value = -5
				trait = paladin
				}
			additive_modifier = {
				value = -10
				trait = trained_paladin
				}
			additive_modifier = {
				value = -15
				trait = journeyman_paladin
				}
			additive_modifier = {
				value = -20
				trait = expert_paladin
				}
			additive_modifier = {
				value = -25
				trait = master_paladin
				}
			additive_modifier = {
				value = -30
				trait = renowned_paladin
				}
			additive_modifier = {
				value = -35
				trait = legendary_paladin
				}
			additive_modifier = {
				value = -5
				trait = druid
				}
			additive_modifier = {
				value = -10
				trait = trained_druid
				}
			additive_modifier = {
				value = -15
				trait = journeyman_druid
				}
			additive_modifier = {
				value = -20
				trait = expert_druid
				}
			additive_modifier = {
				value = -25
				trait = master_druid
				}
			additive_modifier = {
				value = -30
				trait = renowned_druid
				}
			additive_modifier = {
				value = -35
				trait = legendary_druid
				}
			additive_modifier = {
				value = -5
				trait = class_monk
				}
			additive_modifier = {
				value = -10
				trait = trained_monk
				}
			additive_modifier = {
				value = -15
				trait = journeyman_monk
				}
			additive_modifier = {
				value = -20
				trait = expert_monk
				}
			additive_modifier = {
				value = -25
				trait = master_monk
				}
			additive_modifier = {
				value = -30
				trait = renowned_monk
				}
			additive_modifier = {
				value = -35
				trait = legendary_monk
				}
			additive_modifier = {
				value = -20
				trait = sympathy_many
				}
			additive_modifier = {
				value = -5
				localisation_key = sympathy_for_good_alignment_reason
				OR = {
				trait = sympathy_good_human_pantheon_group
				trait = sympathy_wild_human_pantheon_group
				trait = sympathy_qismaite_group
				trait = sympathy_karaturan_group
				trait = sympathy_elven_pantheon_group
				trait = sympathy_dwarven_pantheon_group
				trait = sympathy_giant_pantheon_group
					}
				}
			additive_modifier = {
				value = 5
				localisation_key = sympathy_for_evil_alignment_reason
				OR = {
				trait = sympathy_evil_human_pantheon_group
				trait = sympathy_drow_pantheon
					}
				}
			additive_modifier = {
				value = -10
				trait = theologian
				}
			additive_modifier = {
				value = -10
				trait = lich_baelnorn
				}
			additive_modifier = {
				value = -10
				localisation_key = opposing_religious_alignment_reason
				OR = {
					religion_group = good_human_pantheon_group
					religion_group = qismaite_group
					religion_group = karaturan_group
					religion_group = elven_pantheon_group
					religion = dwarven_pantheon
					religion = gnome_pantheon
					religion_group = humanoid_group
					religion = adama
					religion = faithless
					religion = vhaeraun
					religion = kiaransalee
					}
				}
			additive_modifier = {
				value = -20
				trait = creature_dragon
				}
			additive_modifier = {
				value = -20
				trait = creature_fiend
				}
			additive_modifier = {
				value = -20
				trait = greater_fiend
				}
			additive_modifier = {
				value = -20
				trait = creature_genie
				}
			additive_modifier = {
				value = -20
				trait = creature_angel
				}
			additive_modifier = {
				value = -1000
				localisation_key = chosen_reason
				evilcat_is_chosen = yes
				}
			additive_modifier = {
				value = -1000
				trait = avatar
				}
			additive_modifier = {
				value = -70
				localisation_key = resilient_worshipper_reason
				has_character_flag = ai_flag_refuse_conversion
				}
			additive_modifier = {
				value = -5
				localisation_key = different_culture_reason
				NOT = { culture = FROM }
				}
			additive_modifier = {
				value = 5
				localisation_key = same_culture_reason
				culture = FROM
				}
			additive_opinion_modifier = {
				localisation_key = opinion_of_liege_reason
				factor = 0.20 # +100 Opinion = +20 points
				who = FROM
				this = ROOT # The target's opinion of the demander.
				}
			additive_modifier = {
				value = -15
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 0
					hidden_trigger = {
						NOT = { diplomacy = 3 }
					}
				}
			}
			additive_modifier = {
				value = -10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 3
					hidden_trigger = {
						NOT = { diplomacy = 8 }
					}
				}
			}
			additive_modifier = {
				value = -5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 8
					hidden_trigger = {
						NOT = { diplomacy = 10 }
					}
				}
			}
			additive_modifier = {
				value = 0
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 10
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 12
					hidden_trigger = {
						NOT = { diplomacy = 16 }
					}
				}
			}
			additive_modifier = {
				value = 10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 16
					hidden_trigger = {
						NOT = { diplomacy = 20 }
					}
				}
			}
			additive_modifier = {
				value = 15
				localisation_key = liege_diplomacy_reason
				FROM = {
					show_scope_change = no
					diplomacy = 20
				}
			}
			additive_modifier = {
				value = -20
				ROOT = { is_powerful_vassal = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = { is_hard_to_convert = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = {
					OR = {
						# society_member_of = harpers  # might reveal hidden agents
						society_member_of = lord_alliance
						}
					}
			}
			additive_modifier = {
				value = 5
				localisation_key = POPE_AIREASON_MODIFIER_CLOSE_RELATIVE
				ROOT = { is_close_relative = FROM }
				}
			additive_modifier = {
				value = 15
				localisation_key = POPE_AIREASON_MODIFIER_MY_FRIEND
				ROOT = { is_friend = FROM }
			}
			additive_modifier = {
				value = 10
				localisation_key = POPE_AIREASON_MODIFIER_MY_LOVER
				ROOT = { is_lover = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = POPE_AIREASON_MODIFIER_MY_RIVAL_TARGET
				ROOT = { is_rival = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = foe_reason
				ROOT = { is_foe = FROM }
			}
		}
	}

	vassal_evil_sacrifice_decision = {
		only_playable = yes
		ai_check_interval = 12 #check only once every 12 months.
		diplomacy_icon = GFX_sacrifice_decision

		ai_target_filter = home_court

		from_potential = {
			is_playable = yes
			NOT = { has_religion_feature = religion_peaceful } # Keeping this in case reformations affect this
			OR = {
				religion = abyssal_cult
				religion = lolth_cult
				religion = infernal
				religion = church_of_cyric
				religion = loviatar
				religion = faceless_god
				religion = illithid_pantheon
				religion = deities_of_fury
				religion = dead_three
			}
		}

		potential = {
			NOT = { trait = avatar } #so AI doesn't sacrifice Xvim in the dungeon
			prisoner = yes
			host = { character = FROM }
		}

		allow = {
			ROOT = {
				NOT = { diplomatic_immunity = yes }
				prisoner = yes
			}
		}

		effect = {
			if = {
				limit = {
					FROM = { religion = abyssal_cult }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = abyssother.1 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = abyssother.2 }
					}
				}
				death = {
					death_reason = death_execution_abyss_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = lolth_cult }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.1 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.2 }
					}
				}
				death = {
					death_reason = death_execution_lolth_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = infernal }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.3 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.4 }
					}
				}
				death = {
					death_reason = death_execution_infernal_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = church_of_cyric }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.5 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.6 }
					}
				}
				death = {
					death_reason = death_execution_cyric_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = loviatar }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.7 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.8 }
					}
				}
				death = {
					death_reason = death_execution_loviatar_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = faceless_god }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.9 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.10 }
					}
				}
				death = {
					death_reason = death_execution_faceless_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = illithid_pantheon }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.11 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.12 }
					}
				}
				death = {
					death_reason = death_execution_ilsensine_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = deities_of_fury }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.13 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.14 }
					}
				}
				death = {
					death_reason = death_execution_dof_sacrifice
					killer = FROM
				}
			}
			else_if = {
				limit = {
					FROM = { religion = dead_three }
				}
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
					}
					character_event = { id = sacrifice.13 }
				}
				hidden_tooltip = {
					FROM = {
						character_event = { id = sacrifice.14 }
					}
				}
				death = {
					death_reason = death_execution_dead_three_sacrifice
					killer = FROM
				}
			}
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = impaler
			}
		}
	}

}

settlement_decisions = {
	
	ilsensine_force_efficiency = {
		only_rulers = yes
		ai_check_interval = 300
		
		from_potential = {
			religion = illithid_pantheon
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
		}
		
		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 130
			}
			location = {
				NOR = {
					has_province_modifier = undead_province
					has_province_modifier = forced_efficiency
					culture = illithid
					culture = thoon
					culture = aboleth
				}
			}
		}
		effect = {
			FROM = {
				piety = -130
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 40
					add_trait = cruel
				}
			}
			location = {
				add_province_modifier = {
					name = forced_efficiency
					months = 18
				}
			}
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0.5
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 3
				wealth = 100
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}	
		}
	}
	
	ilsensine_dominate_mob = {
		only_rulers = yes
		ai_check_interval = 300
		
		from_potential = {
			religion = illithid_pantheon
			is_incapable = no
			prisoner = no
			age = 16
			is_dumb_trigger = no
			hidden_tooltip = {
				OR = {
					ai = no
					war = yes
				}
			}
		}
		
		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 200
			}
			location = {
				NOR = {
					has_province_modifier = undead_province
					has_province_modifier = depopulated_3
					has_province_modifier = population_missing
					culture = illithid
					culture = thoon
					culture = aboleth
				}
			}
		}
		effect = {
			FROM = {
				piety = -200
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 40
					add_trait = cruel
				}
			}
			location = {
				if = {
					limit = {
						has_province_modifier = prosperity_modifier_3
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 3
							cannot_inherit = yes
							attrition = 1.5
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						has_province_modifier = prosperity_modifier_2
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 1.5
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						has_province_modifier = prosperity_modifier_1
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 1
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						NOR = {
							has_province_modifier = prosperity_modifier_3
							has_province_modifier = prosperity_modifier_2
							has_province_modifier = prosperity_modifier_1
						}
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 0.65
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					increase_depopulation_effect = yes
				}
				else = {
					add_province_modifier = {
						name = population_missing
						years = 5
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}	
		}
	}

	ilmater_prov_health = {
		ai_check_interval = 40
		only_playable = yes
		filter = owned
		ai_target_filter = owned

		from_potential = {
			trait = patron_ilmater
		}

		potential = {
			always = yes
		}

		allow = {
			NOT = { has_province_modifier = ilmater_prov_health_mod }
			FROM = {
				piety = 70
				hidden_tooltip = {
					OR = {
						ai = no
						AND = {
							ai = yes
							any_neighbor_province = {
								has_disease = yes
							}
						}
					}
				}
			}
		}

		effect = {
			FROM = { piety = -70 }
			add_province_modifier = {
				name = ilmater_prov_health_mod
				years = 2
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 3
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 0.8
				FROM = {
					any_demesne_province = {
						has_province_modifier = ilmater_prov_health_mod
					}
				}
			}
		}
	}

	auril_winter_protection = {
		ai_check_interval = 100
		only_playable = yes
		filter = owned
		ai_target_filter = owned

		from_potential = {
			trait = patron_auril
		}

		potential = {
			location = {
				NOT = { has_province_modifier = auril_winter_protection_mod }
				OR = {
					climate = mild_winter
					climate = normal_winter
					climate = severe_winter
				}
			}
		}

		allow = {
			location = {
				is_winter = yes
			}
			FROM = { piety = 50 }
		}

		effect = {
			location = {
				add_province_modifier = {
					name = auril_winter_protection_mod
					years = 2
				}
			}
			FROM = {
				piety = -50
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				location = { climate = severe_winter }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 2
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cruel }
			}
		}
	}

	establish_dwarfhold = {
		ai_check_interval = 100
		only_playable = yes
		filter = sub_realm_owned
		ai_target_filter = sub_realm_owned
		potential = {
			location = {
				holder_scope = {
					OR = {
						character = FROM
						any_liege = {
							character = FROM
						}
					}
				}
			}
			NOT = {
				location = {
					OR = {
						has_province_modifier = ruined_dwarfhold
						has_province_modifier = dwarfhold_mod
					}
				}
			}
			location = {
				OR = {
					terrain = mountain
					terrain = subterranean
				}
				religion = FROM
			}
		}
		from_potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
		}
		allow = {
			FROM = {
				scaled_wealth = {
					value = 0.05
					min = 150
				}
			}
			is_tribal = no
		}
		effect = {
			FROM = {
				scaled_wealth = {
					value = -0.05
					min = -150
				}
			}
			location = {
				add_province_modifier = {
					name = dwarfhold_mod
					duration = -1
				}
			}
		}
		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 0.3
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 2
				FROM = {
					higher_tier_than = DUKE
				}
			}
		}
	}

	restore_dwarfhold = {
		is_high_prio = yes
		ai_check_interval = 100
		only_playable = yes
		filter = sub_realm_owned
		ai_target_filter = sub_realm_owned
		potential = {
			location = {
				has_province_modifier = ruined_dwarfhold
				holder_scope = {
					OR = {
						character = FROM
						any_liege = {
							character = FROM
						}
					}
				}
			}
		}
		from_potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			culture_group = dwarf_group
		}
		allow = {
			location = {
				OR = {
					AND = {
						any_province_holding = {
							OR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
						FROM = {
							scaled_wealth = {
								value = 0.03
								min = 75
							}
						}
					}
					FROM = {
						scaled_wealth = {
							value = 0.1
							min = 250
						}
					}
				}
			}
			is_tribal = no
		}
		effect = {
			location = {
				if = {
					limit = {
						any_province_holding = {
							OR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
					}
					FROM = {
						scaled_wealth = {
							value = -0.03
							min = -75
						}
					}
				}
				else = {
					FROM = {
						scaled_wealth = {
							value = -0.1
							min = -250
						}
					}
				}
				remove_province_modifier = ruined_dwarfhold
				add_province_modifier = {
					name = dwarfhold_mod
					duration = -1
				}
				if = {
					limit = {
						any_province_holding = {
							NOR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
					}
					any_province_holding = {
						limit = {
							tier = baron
							holding_type = tribal
						}
						convert_to = CASTLE
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 0.3
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 2
				FROM = {
					higher_tier_than = DUKE
				}
			}
		}
	}

	dof_ravage_territory = {
		only_playable = yes
		ai_check_interval = 400

		filter = owned
		ai_target_filter = owned

		from_potential = {
			religion = deities_of_fury
		}

		potential = {
			location = {
				NOT = { religion = deities_of_fury }
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			location = {
				any_province_holding = {
					NOT = { holding_type = tribal }
				}
			}
		}

		effect = {
			location = {
				any_province_holding = {
					limit = {
						is_capital = no
					}
					destroy_settlement = THIS
					FROM = { piety = 50 }
				}
				capital_holding = {
					FROM = { piety = 100 }
					convert_to = tribal
				}
				religion = deities_of_fury
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = greedy }
			}
			modifier = {
				factor = 0.2
				location = {
					culture = FROM
				}
			}
		}
	}

}

title_decisions = {

	orc_claim = {
		ai_check_interval = 300
		only_playable = yes
		filter = all
		ai_target_filter = all
		
		from_potential = {
			orc_religion_trigger = yes
			higher_tier_than = BARON
			is_incapable = no
			is_inaccessible_trigger = no
			age = 16
		}
		
		potential = {
			holder_scope = {
				orc_religion_trigger = yes
				is_within_diplo_range = FROM
				independent = yes
			}
			OR = {
				tier = COUNT
				AND = {
					tier = DUKE
					FROM = { higher_tier_than = COUNT }
				}
				AND = {
					tier = KING
					FROM = { higher_tier_than = DUKE }
				}
				AND = {
					tier = EMPEROR
					FROM = { higher_tier_than = KING }
				}
			}
			NOT = { claimed_by = FROM }
		}
		
		allow = {
			OR = {
				conditional_tooltip = {
					trigger = { tier = COUNT }
					FROM = { piety = 50 }
				}
				conditional_tooltip = {
					trigger = { tier = DUKE }
					FROM = { piety = 150 }
				}
				conditional_tooltip = {
					trigger = { tier = KING }
					FROM = { piety = 300 }
				}
				conditional_tooltip = {
					trigger = { tier = EMPEROR }
					FROM = { piety = 500 }
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					tier = COUNT
				}
				FROM = { piety = -50 }
			}
			else_if = {
				limit = {
					tier = DUKE
				}
				FROM = { piety = -150 }
			}
			else_if = {
				limit = {
					tier = KING
				}
				FROM = { piety = -300 }
			}
			else_if = {
				limit = {
					tier = EMPEROR
				}
				FROM = { piety = -500 }
			}
			FROM = {
				add_claim = ROOT
			}
			holder_scope = {
				FROM = {
					PREV = { character_event = { id = generalmisc.26 } }
				}
			}
		}
	}
}