#This file is for decisions that can be used by owning specific artifacts

decisions = {

	onyx_conjure_servants = {
		ai_check_interval = 6
		potential = {
			AND = {
				is_adult = yes
				OR = {
					is_undead = yes
					trait = master_wizard
					trait = renowned_wizard
					trait = legendary_wizard
					trait = master_warlock
					trait = renowned_warlock
					trait = legendary_warlock
					trait = master_cleric
					trait = renowned_cleric
					trait = legendary_cleric
				}
			}
			any_artifact = {
				artifact_type = onyx_tower
				is_artifact_equipped = yes
			}
			OR = {
				ai = no
				higher_tier_than = BARON
			}
		}
		allow = {
			war = yes
			custom_tooltip = {
				text = NOSUMMONEDDEMONS
				hidden_tooltip = {
					NOT = { has_earmarked_regiments = onyx_servants }
				}
			}
			custom_tooltip = {
				text = SPELL_ON_COOLDOWN
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = onyx_servants_cooldown }
						had_character_flag = { flag = onyx_servants_cooldown months = 1 }
					}
				}
			}
		}
		effect = {
			set_character_flag = onyx_servants_cooldown
			location = {
				ROOT = {
					random_list = {
						33 = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = THIS
								earmark = onyx_servants
								troops = {
									elemental_troops = { 900 900 }
								}
								cannot_inherit = yes
								attrition = 0
								maintenance_multiplier = 0
								can_toggle_looting = no
								reinforces = no
							}
						}
						33 = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = THIS
								earmark = onyx_servants
								troops = {
									undead_troops = { 1500 1500 }
								}
								cannot_inherit = yes
								attrition = 0
								maintenance_multiplier = 0
								can_toggle_looting = no
								reinforces = no
							}
						}
						33 = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = THIS
								earmark = onyx_servants
								troops = {
									animated_objects = { 900 900 }
								}
								cannot_inherit = yes
								attrition = 0
								maintenance_multiplier = 0
								can_toggle_looting = no
								reinforces = no
							}
						}
					}
				}
			}
			hidden_tooltip = { character_event = { id = spellaux.40 months = 5 } }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				war = no
			}
		}
	}

}
