namespace = govmaint # Keeping the namespace to avoid problems

character_event = { # Is a placeholder workaround
	id = govmaint.1
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		government = baron_theocracy_government
		NOT = { has_law = succ_open_elective }
	}
	
	immediate = {
		primary_title = {
			add_law = succ_open_elective
		}
	}
}

character_event = {
	id = govmaint.2
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		is_save_game = no
	}
	
	immediate = {
		trigger_switch = {
			on_trigger = date
			1370.1.1 = {
				set_global_flag = daemonfey_released
			}
		}
	}
}

character_event = {
	id = govmaint.3
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		has_character_flag = undead_court
		higher_tier_than = BARON
	}

	immediate = {
		any_demesne_province = {
			religion = ROOT
			add_province_modifier = {
				name = undead_province
				duration = -1
			}
		}
		add_character_modifier = {
			name = undead_realm_lord
			duration = -1
		}
	}
}

character_event = {
	id = govmaint.4
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		ROOT = {
			higher_tier_than = BARON
			NOT = { has_character_flag = undead_court }
			NOT = { has_character_modifier = undead_realm_lord }
		}
		any_demesne_province = {
			has_province_modifier = undead_province
		}
	}

	immediate = {
		any_demesne_province = {
			limit = {
				has_province_modifier = undead_province
			}
			religion = ROOT
			remove_province_modifier = undead_province
			set_variable = { which = prosperity_value value = 0 }
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_3
				}
				remove_province_modifier = prosperity_modifier_3
			}
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_2
				}
				remove_province_modifier = prosperity_modifier_2
			}
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_1
				}
				remove_province_modifier = prosperity_modifier_1
			}
			if = {
				limit = {
					has_province_modifier = depopulated_1
				}
				remove_province_modifier = depopulated_1
			}
			if = {
				limit = {
					has_province_modifier = depopulated_2
				}
				remove_province_modifier = depopulated_2
			}
			add_province_modifier = {
				name = depopulated_3
				duration = -1
			}
		}
	}
}

character_event = { # Is a placeholder workaround
	id = govmaint.5
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { tier = BARON }
		any_demesne_title = {
			has_law = succ_open_elective
		}
	}
	
	immediate = {
		any_demesne_title = {
			limit = {
				has_law = succ_open_elective
			}
			primary_title = {
				PREV = {
					copy_title_laws = PREV
				}
			}
		}
	}
}
