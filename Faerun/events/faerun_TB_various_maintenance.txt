namespace = govmaint # Keeping the namespace to avoid problems

character_event = { # Is a placeholder workaround
	id = govmaint.1
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		government = baron_theocracy_government
		NOT = { has_law = succ_open_elective }
	}
	
	immediate = {
		primary_title = {
			add_law = succ_open_elective
		}
	}
}

character_event = {
	id = govmaint.2
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		is_save_game = no
	}
	
	immediate = {
		trigger_switch = {
			on_trigger = date
			1370.1.1 = {
				set_global_flag = daemonfey_released
			}
		}
	}
}

character_event = {
	id = govmaint.3
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		has_character_flag = undead_court
		higher_tier_than = BARON
	}

	immediate = {
		any_demesne_province = {
			religion = ROOT
			add_province_modifier = {
				name = undead_province
				duration = -1
			}
		}
		add_character_modifier = {
			name = undead_realm_lord
			duration = -1
		}
	}
}

character_event = {
	id = govmaint.4
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		ROOT = {
			higher_tier_than = BARON
			NOT = { has_character_flag = undead_court }
			NOT = { has_character_modifier = undead_realm_lord }
		}
		any_demesne_province = {
			has_province_modifier = undead_province
		}
	}

	immediate = {
		any_demesne_province = {
			limit = {
				has_province_modifier = undead_province
			}
			religion = ROOT
			remove_province_modifier = undead_province
			set_variable = { which = prosperity_value value = 0 }
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_3
				}
				remove_province_modifier = prosperity_modifier_3
			}
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_2
				}
				remove_province_modifier = prosperity_modifier_2
			}
			if = {
				limit = {
					has_province_modifier = prosperity_modifier_1
				}
				remove_province_modifier = prosperity_modifier_1
			}
			if = {
				limit = {
					has_province_modifier = depopulated_1
				}
				remove_province_modifier = depopulated_1
			}
			if = {
				limit = {
					has_province_modifier = depopulated_2
				}
				remove_province_modifier = depopulated_2
			}
			add_province_modifier = {
				name = depopulated_3
				duration = -1
			}
		}
	}
}

character_event = { # Is a placeholder workaround
	id = govmaint.5
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { tier = BARON }
		any_demesne_title = {
			has_law = succ_open_elective
		}
	}
	
	immediate = {
		any_demesne_title = {
			limit = {
				has_law = succ_open_elective
			}
			primary_title = {
				PREV = {
					copy_title_laws = PREV
				}
			}
		}
	}
}

character_event = { # Is a placeholder workaround
	id = govmaint.6
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { tier = baron }
		capital_holding = {
			holding_type = temple
		}
		NOR = {
			government = muslim_government
			government = theocracy_government
			government = divine_feudal_government
			government = yikaria_government
		}
	}
	
	immediate = {
		if = {
			limit = {
				is_government_potential = muslim_government
			}
			set_government_type = muslim_government
		}
		else_if = {
			limit = {
				is_government_potential = divine_feudal_government
			}
			set_government_type = divine_feudal_government
		}
		else_if = {
			limit = {
				NOR = {
					is_government_potential = muslim_government
					is_government_potential = divine_feudal_government
				}
			}
			set_government_type = theocracy_government
		}
	}
}

character_event = {
	id = govmaint.7
	hide_window = yes
	
	trigger = {
		religion = uthgardt
		NOT = { has_uthgardt_totem = yes }
		OR = {
			has_landed_title = d_black_lion
			has_landed_title = d_black_raven
			has_landed_title = d_blue_bear
			has_landed_title = d_elk
			has_landed_title = d_gray_wolf
			has_landed_title = d_great_worm
			has_landed_title = d_griffon
			has_landed_title = d_red_tiger
			has_landed_title = d_sky_pony
			has_landed_title = d_tree_ghost
			has_landed_title = d_thunderbeast
			d_black_lion = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_black_raven = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_blue_bear = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_elk = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_gray_wolf = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_great_worm = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_griffon = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_red_tiger = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_sky_pony = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_tree_ghost = {
				any_realm_character = {
					character = ROOT
				}
			}
			d_thunderbeast = {
				any_realm_character = {
					character = ROOT
				}
			}
		}
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					has_landed_title = d_black_lion
					d_black_lion = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_black_lion
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_black_raven
					d_black_raven = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_black_raven
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_blue_bear
					d_blue_bear = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_blue_bear
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_elk
					d_elk = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_elk
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_gray_wolf
					d_gray_wolf = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_gray_wolf
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_great_worm
					d_great_worm = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_great_worm
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_griffon
					d_griffon = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_griffon
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_red_tiger
					d_red_tiger = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_red_tiger
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_sky_pony
					d_sky_pony = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_sky_pony
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_tree_ghost
					d_tree_ghost = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_tree_ghost
		}
		else_if = {
			limit = {
				OR = {
					has_landed_title = d_thunderbeast
					d_ = {
						any_realm_character = {
							character = ROOT
						}
					}
				}
			}
			add_trait = uthgar_thunderbeast
		}
	}
}