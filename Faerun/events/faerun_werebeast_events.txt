namespace = frwerebeast

character_event = { # decide what type of werebeast to infect the player
	id = frwerebeast.1
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = natural_lycanthrope
			trait = afflicted_lycanthrope
			trait = vampire
			trait = vampire_spawn
			trait = undead
			trait = lich
			trait = archlich
			trait = lich_baelnorn
			trait = avatar
		}
		OR = {
			trait = creature_drow
			trait = creature_elf
			trait = creature_half_elf
			trait = creature_feyri
			trait = creature_draegloth
			trait = creature_spirit_folk
			trait = creature_dwarf
			trait = creature_half_dwarf
			trait = creature_giant
			trait = creature_half_giant
			trait = creature_ogre
			trait = creature_half_ogre
			trait = creature_ogrillon
			trait = creature_troll
			trait = creature_goliath
			trait = creature_gnome
			trait = creature_gith
			trait = creature_goblin
			trait = creature_hobgoblin
			trait = creature_bugbear
			trait = creature_hagspawn
			trait = creature_halfling
			trait = creature_human
			trait = creature_deep_imaskari
			trait = creature_orc
			trait = creature_half_orc
			trait = creature_tanarukk
			trait = creature_genasi
			trait = creature_tiefling
			trait = creature_aasimar
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				modifier = {
					factor = 0
					location = {
						OR = {
							region = sea_fallen_stars_region
							region = great_rift_region
							region = chultan_peninsula_region
							region = the_anvil_region
							region = haunted_lands_region
							region = corsair_domains_region
							region = southern_zakhara_region
						}
					}
				}
				set_character_flag = werewolf_attack
			}
			1 = {
				set_character_flag = wererat_attack
			}
			1 = {
				modifier = {
					factor = 0
					location = {
						NOR = {
							region = calimshan_region
							region = mulhorand_region
							region = thay_region
							region = unther_region
							region = semphar_region
							region = murghom_region
							region = shou_lung_region
							region = tabot_region
							region = salju_shan_region
							region = lake_of_steam_region
							region = halruaa_region
							region = lapaliiya_region
							region = chultan_peninsula_region
							region = southeast_faerun_region
							region = utter_east_region
							region = zakhara_region
							region = nimbral_region
						}
					}
				}
				set_character_flag = weretiger_attack
			}
			1 = {
				modifier = {
					factor = 0
					location = {
						NOR = {
							region = chondath_region
							region = sea_fallen_stars_region
							region = chessenta_region
							region = mulhorand_region
							region = thay_region
							region = unther_region
							region = sespech_region 
							region = semphar_region
							region = murghom_region
							region = lake_of_steam_region
							region = the_shining_lands_region
						}
					}
				}
				set_character_flag = werecrocodile_attack
			}
		}
		
		character_event = { id = frwerebeast.2 }
	}
}

character_event = {
	id = frwerebeast.2
	desc = {
		limit = {
			has_character_flag = werewolf_attack
		}
		text = FRWEREBEAST.2a
	}
	desc = {
		limit = {
			has_character_flag = wererat_attack
		}
		text = FRWEREBEAST.2b
	}
	desc = {
		limit = {
			has_character_flag = weretiger_attack
		}
		text = FRWEREBEAST.2c
	}
	desc = {
		limit = {
			has_character_flag = werecrocodile_attack
		}
		text = FRWEREBEAST.2d
	}
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		name = FRWEREBEAST.2e
		random = {
			chance = 20
			add_trait = wounded
		}
		hidden_tooltip = {
			character_event = { id = frwerebeast.3 days = 10 random = 3 }
		}
	}
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = patron_malar
					AND = {
						trait = patron_sebek
						has_character_flag = werecrocodile_attack
					}
				}
			}
			modifier = {
				factor = 0.2
				trait = patron_selune
			}
		}
		tooltip_info_custom = isdivinecaster
		trigger = {
			OR = {
				z_cleric = yes
				z_ranger = yes
				z_paladin = yes
				z_druid = yes
			}
		}
		name = FRWEREBEAST.2f
		clr_character_flag = werewolf_attack
		clr_character_flag = wererat_attack
		clr_character_flag = weretiger_attack
		clr_character_flag = werecrocodile_attack
	}
}

character_event = {
	id = frwerebeast.3
	desc = FRWEREBEAST.3
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.3a
		hidden_tooltip = {
			character_event = { id = frwerebeast.4 days = 10 random = 3 }
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.3b
		hidden_tooltip = {
			character_event = { id = frwerebeast.4 days = 10 random = 3 }
		}
	}
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = patron_malar
					AND = {
						trait = patron_sebek
						has_character_flag = werecrocodile_attack
					}
				}
			}
			modifier = {
				factor = 0.2
				trait = patron_selune
			}
		}
		tooltip_info_custom = isdivinecaster
		trigger = {
			OR = {
				z_cleric = yes
				z_ranger = yes
				z_paladin = yes
				z_druid = yes
			}
		}
		name = FRWEREBEAST.3c
		clr_character_flag = werewolf_attack
		clr_character_flag = wererat_attack
		clr_character_flag = weretiger_attack
		clr_character_flag = werecrocodile_attack
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = patron_malar
					AND = {
						trait = patron_sebek
						has_character_flag = werecrocodile_attack
					}
				}
			}
			modifier = {
				factor = 0.2
				trait = patron_selune
			}
		}
		piety = -10
		wealth = -10
		name = FRWEREBEAST.3d
		clr_character_flag = werewolf_attack
		clr_character_flag = wererat_attack
		clr_character_flag = weretiger_attack
		clr_character_flag = werecrocodile_attack
	}
}

character_event = {
	id = frwerebeast.4
	desc = {
		limit = {
			has_character_flag = werewolf_attack
		}
		text = FRWEREBEAST.4a
	}
	desc = {
		limit = {
			has_character_flag = wererat_attack
		}
		text = FRWEREBEAST.4b
	}
	desc = {
		limit = {
			has_character_flag = weretiger_attack
		}
		text = FRWEREBEAST.4c
	}
	desc = {
		limit = {
			has_character_flag = werecrocodile_attack
		}
		text = FRWEREBEAST.4d
	}
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.4e
		add_trait = afflicted_lycanthrope
		if = {
			limit = {
				has_character_flag = werewolf_attack
			}
			add_trait = werewolf
		}
		else_if = {
			limit = {
				has_character_flag = wererat_attack
			}
			add_trait = wererat
		}
		else_if = {
			limit = {
				has_character_flag = weretiger_attack
			}
			add_trait = weretiger
		}
		else_if = { # Not a simple else just in case I messed up
			limit = {
				has_character_flag = werecrocodile_attack
			}
			add_trait = werecrocodile
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOR = {
						religion = abyssal_cult
						religion = infernal
						religion_group = karaturan_group
						religion_group = atheist_group
						religion_group = aberration_group
						trait = zealous
						evilcat_is_chosen = yes
					}
				}
				character_event = { id = frwerebeast.5 }
			}
		}
	}
	option = {
		trigger = {
			OR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.4f
		piety = 20
		add_trait = afflicted_lycanthrope
		if = {
			limit = {
				has_character_flag = werewolf_attack
			}
			add_trait = werewolf
		}
		else_if = {
			limit = {
				has_character_flag = wererat_attack
			}
			add_trait = wererat
		}
		else_if = {
			limit = {
				has_character_flag = weretiger_attack
			}
			add_trait = weretiger
		}
		else_if = { # Not a simple else just in case I messed up
			limit = {
				has_character_flag = werecrocodile_attack
			}
			add_trait = werecrocodile
		}
	}
}

character_event = {
	id = frwerebeast.5
	desc = FRWEREBEAST.5
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				OR = {
					trait = chaste
					trait = temperate
					trait = charitable
					trait = kind
					trait = humble
					trait = content
					trait = honest
					trait = just
					trait = trusting
				}
			}
		}
		name = FRWEREBEAST.5a
		if = {
			limit = {
				religion = rasallesian
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = rasallesian
		}
		else_if = {
			limit = {
				religion = lapal_faith
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = lapal_faith
		}
		else_if = {
			limit = {
				religion = tuigan_shamanism
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = tuigan_shamanism
		}
		else_if = {
			limit = {
				religion = ten_thousand_gods
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = ten_thousand_gods
		}
		else_if = {
			limit = {
				OR = {
					religion = qisma
					religion = kahin
				}
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = qisma
		}
		else_if = {
			limit = {
				religion = pantheist_league
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = pantheist_league
		}
		else = {
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = joyful
		}
		add_trait = patron_selune
	}
	
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				NOT = { trait = werecrocodile }
				OR = {
					trait = hunter
					trait = impaler
					trait = gluttonous
					trait = greedy
					trait = wroth
					trait = envious
					trait = ambitious
					trait = arbitrary
					trait = cruel
					trait = deceitful
				}
			}
		}
		name = FRWEREBEAST.5b
		if = {
			limit = {
				religion = tuigan_shamanism
			}
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = tuigan_shamanism
		}
		else = {
			hidden_tooltip = {
				religion = faithless # to clear all religion traits and such
			}
			religion = deities_of_fury
		}
		add_trait = patron_malar
	}
	
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				trait = werecrocodile
				OR = {
					trait = hunter
					trait = impaler
					trait = gluttonous
					trait = greedy
					trait = wroth
					trait = envious
					trait = ambitious
					trait = arbitrary
					trait = cruel
					trait = deceitful
				}
			}
		}
		name = FRWEREBEAST.5c
		hidden_tooltip = {
			religion = faithless # to clear all religion traits and such
		}
		religion = scale_cult
		add_trait = patron_sebek
	}
	
	option = {
		name = FRWEREBEAST.5d
		ai_chance = {
			factor = 20
		}
		piety = 30
		random = {
			chance = 30
			add_trait = zealous
		}
	}
}

character_event = {
	id = frwerebeast.6
	desc = FRWEREBEAST.6
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.3a
		hidden_tooltip = {
			character_event = { id = frwerebeast.4 days = 10 random = 3 }
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.3b
		hidden_tooltip = {
			character_event = { id = frwerebeast.7 days = 10 random = 3 }
		}
	}
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = patron_malar
					AND = {
						trait = patron_sebek
						has_character_flag = werecrocodile_attack
					}
				}
			}
			modifier = {
				factor = 0.2
				trait = patron_selune
			}
		}
		tooltip_info_custom = isdivinecaster
		trigger = {
			OR = {
				z_cleric = yes
				z_ranger = yes
				z_paladin = yes
				z_druid = yes
			}
		}
		name = FRWEREBEAST.3c
		clr_character_flag = werewolf_attack
		clr_character_flag = wererat_attack
		clr_character_flag = weretiger_attack
		clr_character_flag = werecrocodile_attack
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = patron_malar
					AND = {
						trait = patron_sebek
						has_character_flag = werecrocodile_attack
					}
				}
			}
			modifier = {
				factor = 0.2
				trait = patron_selune
			}
		}
		piety = -10
		wealth = -10
		name = FRWEREBEAST.3d
		clr_character_flag = werewolf_attack
		clr_character_flag = wererat_attack
		clr_character_flag = weretiger_attack
		clr_character_flag = werecrocodile_attack
	}
}

character_event = {
	id = frwerebeast.7
	desc = {
		limit = {
			has_character_flag = werewolf_attack
		}
		text = FRWEREBEAST.7a
	}
	desc = {
		limit = {
			has_character_flag = wererat_attack
		}
		text = FRWEREBEAST.7b
	}
	desc = {
		limit = {
			has_character_flag = weretiger_attack
		}
		text = FRWEREBEAST.7c
	}
	desc = {
		limit = {
			has_character_flag = werecrocodile_attack
		}
		text = FRWEREBEAST.7d
	}
	picture = GFX_evt_werewolf
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.4e
		add_trait = afflicted_lycanthrope
		if = {
			limit = {
				has_character_flag = werewolf_attack
			}
			add_trait = werewolf
		}
		else_if = {
			limit = {
				has_character_flag = wererat_attack
			}
			add_trait = wererat
		}
		else_if = {
			limit = {
				has_character_flag = weretiger_attack
			}
			add_trait = weretiger
		}
		else_if = { # Not a simple else just in case I messed up
			limit = {
				has_character_flag = werecrocodile_attack
			}
			add_trait = werecrocodile
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOR = {
						religion = abyssal_cult
						religion = infernal
						religion_group = karaturan_group
						religion_group = atheist_group
						religion_group = aberration_group
						trait = zealous
						evilcat_is_chosen = yes
					}
				}
				character_event = { id = frwerebeast.5 }
			}
		}
	}
	option = {
		trigger = {
			OR = {
				trait = patron_malar
				trait = patron_selune
				AND = {
					trait = patron_sebek
					has_character_flag = werecrocodile_attack
				}
			}
		}
		name = FRWEREBEAST.4f
		piety = 20
		add_trait = afflicted_lycanthrope
		if = {
			limit = {
				has_character_flag = werewolf_attack
			}
			add_trait = werewolf
		}
		else_if = {
			limit = {
				has_character_flag = wererat_attack
			}
			add_trait = wererat
		}
		else_if = {
			limit = {
				has_character_flag = weretiger_attack
			}
			add_trait = weretiger
		}
		else_if = { # Not a simple else just in case I messed up
			limit = {
				has_character_flag = werecrocodile_attack
			}
			add_trait = werecrocodile
		}
	}
}