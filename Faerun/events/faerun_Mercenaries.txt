namespace = FaerunMercenaries


# Ping event when vassalizing the Flaming Fists
character_event = {
	id = FaerunMercenaries.1
	
	hide_window = yes

	
	is_triggered_only = yes
	
	immediate = {
		set_defacto_liege = FROM
		FROM = {
			letter_event = {
				id = FaerunMercenaries.2
			}
		}
	}
}

# Notification event when vassalizing the Flaming Fists
letter_event = {
	id = FaerunMercenaries.2
	desc = EVTDESC_FaerunMercenary_2
	border = GFX_event_letter_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
	}
}

# maintenance event where we correct mercenaries gender for special mercenary titles
character_event = {
	id = FaerunMercenaries.1000
	hide_window = yes
	is_triggered_only = yes

	only_men = yes
	min_age = 16
	friends = no
	rivals = no
	prisoner = no
	is_married = no

	trigger = {
		OR = {
			mercenary = yes
			liege = {
				mercenary = yes
			}
		}

		OR = {
			has_law = enatic_succession
			has_law = enatic_cognatic_succession
			has_law = true_cognatic_succession
		}

		NOR = {
			father = { always = yes }
			mother = { always = yes }
		}

		faerun_any_race = no

		trigger_if = {
			limit = { is_ruler = no }

			is_lowborn = yes
			is_immune_to_pruning = no
		}

		historical = no
		has_children = no
	}

	immediate = {
		random = {
			chance = 50 # 50% chance of nothing in case the succession law is not strictly enatic
			additive_modifier = {
				value = 50

				has_law = enatic_succession
			}

			set_gender = female
			if = {
				limit = { trait = seducer }

				remove_trait = seducer
				add_trait = seductress
			}
			random_character = {
				limit = {
					culture = ROOT
					is_female = yes
					NOT = { character = ROOT }
					historical = no # no unique name stealing
				}
				preferred_limit = { # avoid same names if possible
					NOT = { same_liege = ROOT }
				}

				ROOT = { set_name = PREV }
			}
		}
	}
}