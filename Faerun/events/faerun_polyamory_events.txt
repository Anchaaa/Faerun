# Faerun - polyamory events - by neutrondecay

namespace = polyam

# Meet the lover - two metamours are introduced as such for the first time

# begin by setting the scopes

character_event = {
	id = polyam.1
	hide_window = yes
	is_triggered_only = yes
	capable_only = yes
	prisoner = no
	min_age = 16
	trigger = {
		any_lover = {
			NOT = {	character = event_target:polyam_newcomer }
		}
		NOT = { is_inaccessible_trigger = yes }
	}
	immediate = {
		any_lover = {
			limit = {
				NOT = { character = event_target:polyam_newcomer }
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			character_event = {
				id = polyam.2
				days = 15
				random = 15
			}
		}
	}
}

character_event = {
	id = polyam.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		save_event_target_as = polyam_established
		FROM = {
			character_event = { id = polyam.3 }
		}
	}
}

character_event = {
	id = polyam.3
	is_triggered_only = yes
	desc = {
		text = EVTDESC_POLYAM_3
	}
	picture = GFX_evt_gossip_1
	immediate = {
		event_target:polyam_established = {
			opinion = {
				name = opinion_accepted_metamour
				who = event_target:polyam_newcomer
			}
		}
		event_target:polyam_newcomer = {
			opinion = {
				name = opinion_accepted_metamour
				who = event_target:polyam_established
			}
		}
	}
	option = {
		name = EVTOPTA_POLYAM_3
	}
}
