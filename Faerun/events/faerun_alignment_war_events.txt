namespace = ALWAR

#first event: checks for a suitable target ruler. If cooldowns are up and a target is found, there's a chance next event fires.
character_event = {
	id = ALWAR.1
	hide_window = yes
	only_playable = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			NOT = { has_global_flag = recent_align_war }
			had_global_flag = {
				flag = recent_align_war
				years >= 50
			}
		}
		total_years_played >= 10 #no invasions right away
		has_landed_title = c_waterdeep #just somebody
	}

	immediate = {
		random_independent_ruler = {
			limit = {
				higher_real_tier_than = COUNT
				NOT = { culture = monster }
				AND = {
					realm_size >= 50
					num_of_count_titles_in_realm >= 20
				}
			}
			random = {
				chance = 10
				save_event_target_as = target_ruler
				random_realm_province = {
					preferred_limit = {
						is_capital = no
						is_island = no
					}
					preferred_limit = {
						is_island = no
					}
					preferred_limit = {
						is_capital = no
					}
					save_event_target_as = invasion_province
				}
				character_event = { id = ALWAR.2 }

				mult_modifier = {
					factor = 0.5
					real_tier = DUKE
				}
				#mult_modifier = { #used for testing
				#	factor = 100
				#	has_landed_title = k_thay
				#}
				mult_modifier = {
					factor = 1.25
					real_tier = EMPEROR
				}
				mult_modifier = {
					factor = 2
					realm_size >= 150
					num_of_count_titles_in_realm >= 60
				}
				mult_modifier = {
					factor = 2
					realm_size >= 250
					num_of_count_titles_in_realm >= 100
				}
			}
		}
	}
}
#second event: an invader character is created.
character_event = {
	id = ALWAR.2
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				event_target:target_ruler = {
					is_evil_religion = yes
				}
			}
			create_character = { #Zealous Crusader
				random_traits = yes
				female = random
				attributes = {
					diplomacy = 8
					martial = 10
					stewardship = 6
					intrigue = 8
					learning = 6
				}
				trait = brilliant_strategist
				trait = holy_warrior
				trait = zealous
				trait = brave
			}
			new_character = {
				wealth = 1000
				save_event_target_as = invader_char
				remove_trait = weak
				remove_trait = delicate
				remove_trait = soft
				remove_trait = imbecile
				remove_trait = idiot
				remove_trait = slow
				remove_trait = clubfooted
				remove_trait = craven
				remove_trait = cruel
				remove_trait = cynical
				random_list = {
					10 = { #angel
						remove_all_race_traits = yes
						add_trait = creature_angel
						add_trait = master_fighter
						add_trait = master_cleric
						random_list = { #religion, culture, gfx
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = triadic
								culture = angel
								set_graphical_culture = angel
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = solar
								culture = angel
								set_graphical_culture = angel
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = joyful
								culture = angel
								set_graphical_culture = angel
								set_character_flag = chaotic_invader
							}
							5 = {
								religion = halfling_pantheon
								culture = angel
								set_graphical_culture = angel
							}
							5 = {
								religion = dwarven_pantheon
								culture = angel
								set_graphical_culture = angel
							}
							5 = {
								religion = gnome_pantheon
								culture = angel
								set_graphical_culture = angel
							}
							5 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = ubtao_worship
								culture = angel
								set_graphical_culture = angel
							}
							5 = {
								religion = elven_pantheon
								culture = celestial_eladrin
								set_graphical_culture = celestial_eladrin
								set_character_flag = chaotic_invader
							}
							5 = {
								religion = sylvan
								culture = celestial_eladrin
								set_graphical_culture = celestial_eladrin
								set_character_flag = chaotic_invader
							}
							5 = {
								religion = eilistraee
								culture = celestial_eladrin
								set_graphical_culture = celestial_eladrin
								set_character_flag = chaotic_invader
							}
							5 = {
								religion = bahamut
								culture = asura
								set_graphical_culture = asura
							}
							5 = {
								religion = adama
								culture = moonmaiden
								set_graphical_culture = moonmaiden
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = ten_thousand_gods
								culture = asura
								set_graphical_culture = asura
								set_character_flag = chaotic_invader
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = qisma
								culture = asura
								set_graphical_culture = asura
								set_character_flag = chaotic_invader
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = muhjari
								culture = asura
								set_graphical_culture = asura
								set_character_flag = chaotic_invader
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = kahin
								culture = asura
								set_graphical_culture = asura
								set_character_flag = chaotic_invader
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = padhran
								culture = moonmaiden
								set_graphical_culture = moonmaiden
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = the_path
								culture = moonmaiden
								set_graphical_culture = moonmaiden
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = chung_tao
								culture = moonmaiden
								set_graphical_culture = moonmaiden
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = nine_travelers
								culture = moonmaiden
								set_graphical_culture = moonmaiden
							}
						}
					}
					10 = { #mortal
						random_list = { #religion
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = triadic
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = solar
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = joyful
							}
							5 = {
								religion = halfling_pantheon
							}
							5 = {
								religion = dwarven_pantheon
							}
							5 = {
								religion = gnome_pantheon
							}
							5 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											OR = {
												region = kara_tur_region
												region = zakhara_region
											}
										}
									}
								}
								religion = ubtao_worship
							}
							5 = {
								religion = elven_pantheon
							}
							5 = {
								religion = sylvan
							}
							5 = {
								religion = eilistraee
							}
							5 = {
								religion = bahamut
							}
							5 = {
								religion = adama
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = ten_thousand_gods
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = qisma
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = muhjari
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = zakhara_region
											}
										}
									}
								}
								religion = kahin
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = padhran
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = the_path
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = chung_tao
							}
							10 = {
								modifier = {
									factor = 0
									event_target:target_ruler = {
										capital_scope = {
											NOT = {
												region = kara_tur_region
											}
										}
									}
								}
								religion = nine_travelers
							}
						}
						trigger_switch = { #culture, gfx
							on_trigger = religion
							halfling_pantheon = {
								remove_all_race_traits = yes
								add_trait = creature_halfling
								random_list = {
									10 = {
										culture = lightfoot
										set_graphical_culture = lightfoot
									}
									15 = {
										culture = strongheart
										set_graphical_culture = strongheart
									}
									5 = {
										culture = ghostwise
										set_graphical_culture = ghostwise
									}
								}
							}
							dwarven_pantheon = {
								remove_all_race_traits = yes
								add_trait = creature_dwarf
								random_list = {
									10 = {
										culture = gold_dwarf
										set_graphical_culture = gold_dwarf
									}
									10 = {
										culture = shield_dwarf
										set_graphical_culture = shield_dwarf
									}
									10 = {
										culture = wild_dwarf
										set_graphical_culture = wild_dwarf
									}
								}
							}
							gnome_pantheon = {
								remove_all_race_traits = yes
								add_trait = creature_gnome
								random_list = {
									10 = {
										culture = gnome
										set_graphical_culture = gnome
									}
									10 = {
										culture = forest_gnome
										set_graphical_culture = forest_gnome
									}
									10 = {
										culture = lantanna
										set_graphical_culture = lantanna
									}
									5 = {
										culture = svirfneblin
										set_graphical_culture = svirfneblin
									}
								}
							}
							elven_pantheon = {
								remove_all_race_traits = yes
								add_trait = creature_elf
								random_list = {
									10 = {
										culture = moon_elf
										set_graphical_culture = moon_elf
									}
									10 = {
										culture = sun_elf
										set_graphical_culture = sun_elf
									}
									5 = {
										culture = snow_elf
										set_graphical_culture = snow_elf
									}
									5 = {
										culture = avariel
										set_graphical_culture = avariel
									}
								}
							}
							sylvan = {
								remove_all_race_traits = yes
								add_trait = creature_elf
								random_list = {
									10 = {
										culture = green_elf
										set_graphical_culture = green_elf
									}
									10 = {
										culture = wood_elf
										set_graphical_culture = wood_elf
									}
									5 = {
										culture = lythari
										set_graphical_culture = lythari
									}
								}
							}
							eilistraee = {
								remove_all_race_traits = yes
								add_trait = creature_drow
								random_list = {
									10 = {
										culture = drow
										set_graphical_culture = drow
									}
									10 = {
										culture = lorendrow
										set_graphical_culture = lorendrow
									}
									10 = {
										culture = aevendrow
										set_graphical_culture = aevendrow
									}
								}
							}
							bahamut = {
								remove_all_race_traits = yes
								add_trait = creature_dragonborn
								random_list = {
									10 = {
										culture = dragonborn
										set_graphical_culture = dragonborn
									}
									10 = {
										culture = vayemniri
										set_graphical_culture = vayemniri
									}
									10 = {
										culture = thymari
										set_graphical_culture = thymari
									}
								}
							}
						}
						random_list = { #class
							20 = { add_trait = expert_paladin }
							15 = { add_trait = expert_fighter }
							10 = { add_trait = expert_bard }
							10 = { add_trait = expert_cleric }
							10 = { add_trait = expert_ranger }
							10 = { add_trait = expert_monk }
							10 = { add_trait = expert_barbarian }
							5 = { add_trait = expert_rogue }
							5 = { add_trait = expert_sorcerer add_trait = origin_divine_soul }
							5 = { add_trait = expert_wizard }
							5 = { add_trait = expert_warlock add_trait = warlock_celestial }
							5 = { add_trait = expert_psion add_trait = psi_potential }
							5 = { add_trait = expert_druid }
						}
					}
					1 = { # Scro against elves, don't care if good or bad
						modifier = {
							factor = 0
							NOT = {
								event_target:target_ruler = {
									OR = {
										culture_group = high_elf_group
										culture_group = sylvan_elf_group
										culture_group = dark_elf_group
										culture_group = eladrin_group
									}
								}
							}
						}
						remove_trait = holy_warrior
						remove_trait = zealous
						add_trait = diligent
						random_list = {
							1 = {
								add_trait = logistics_expert
							}
							1 = {
								add_trait = master_of_flame
							}
							1 = {
								add_trait = sapper
							}
							1 = {
								add_trait = levy_coordinator
							}
						}
						remove_all_race_traits = yes
						add_trait = creature_orc
						set_graphical_culture = scro
						culture = scro
						religion = orc_pantheon # Doesn't fit, but eh
						random_list = { #class
							5 = { add_trait = expert_paladin }
							25 = { add_trait = expert_fighter }
							5 = { add_trait = expert_bard }
							10 = { add_trait = expert_cleric }
							10 = { add_trait = expert_ranger }
							10 = { add_trait = expert_monk }
							5 = { add_trait = expert_rogue }
							5 = { add_trait = expert_sorcerer add_trait = origin_storm }
							5 = { add_trait = expert_wizard }
							5 = { add_trait = expert_warlock add_trait = warlock_elemental }
							5 = { add_trait = expert_psion add_trait = psi_potential }
						}
					}
				}
				character_event = { id = frxp.1 }
				character_event = { id = ALWAR.3 }
			}
		}
		else = {
			random_list = {
				#Scro
				1 = {
					modifier = {
						factor = 0
						NOT = {
							event_target:target_ruler = {
								OR = {
									culture_group = high_elf_group
									culture_group = sylvan_elf_group
									culture_group = dark_elf_group
									culture_group = eladrin_group
								}
							}
						}
					}
					create_character = { #Scro Commander
						culture = scro
						religion = orc_pantheon
						random_traits = yes
						female = random
						attributes = {
							diplomacy = 8
							martial = 10
							stewardship = 6
							intrigue = 8
							learning = 6
						}
						trait = brilliant_strategist
						trait = diligent
						trait = brave
					}
					new_character = {
						wealth = 1000
						save_event_target_as = invader_char
						remove_trait = weak
						remove_trait = delicate
						remove_trait = soft
						remove_trait = imbecile
						remove_trait = idiot
						remove_trait = slow
						remove_trait = clubfooted
						remove_trait = craven
						remove_trait = cynical
						random_list = {
							1 = {
								add_trait = logistics_expert
							}
							1 = {
								add_trait = master_of_flame
							}
							1 = {
								add_trait = sapper
							}
							1 = {
								add_trait = levy_coordinator
							}
						}
						random_list = { #class
							5 = { add_trait = expert_paladin }
							25 = { add_trait = expert_fighter }
							5 = { add_trait = expert_bard }
							10 = { add_trait = expert_cleric }
							10 = { add_trait = expert_ranger }
							10 = { add_trait = expert_monk }
							5 = { add_trait = expert_rogue }
							5 = { add_trait = expert_sorcerer add_trait = origin_storm }
							5 = { add_trait = expert_wizard }
							5 = { add_trait = expert_warlock add_trait = warlock_elemental }
							5 = { add_trait = expert_psion add_trait = psi_potential }
						}
						random_list = { # nickname
							20 = {}
							5 = { give_nickname = nick_the_sword_from_space }
							5 = { give_nickname = nick_the_falling_star }
							5 = { give_nickname = nick_the_avenger }
						}
						character_event = { id = frxp.1 }
						character_event = { id = ALWAR.3 }
						break = yes
					}
				}
				#Archdevils
				10 = { #Dispater
					modifier = { has_global_flag = dispater_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Dispater"
						dynasty = 12854 # of Dis
						culture = baatezu
						religion = infernal
						dna = "cgmmdqgdddf"
						attributes = {
							learning = 14
							intrigue = 14
							martial = 10
							diplomacy = 11
							stewardship = 11
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = patient
						trait = paranoid
						trait = ambitious
						trait = diligent
						trait = cruel
						trait = expert_paladin
						trait = master_sorcerer
						trait = expert_fighter
						trait = brilliant_strategist
						trait = architect
						trait = defensive_leader
						trait = unyielding_leader
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Mammon
					modifier = { has_global_flag = mammon_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Mammon"
						dynasty = 12856 # of Minauros
						culture = baatezu
						religion = infernal
						dna = "djamahhecbq"
						attributes = {
							learning = 14
							intrigue = 18
							martial = 11
							diplomacy = 7
							stewardship = 10
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = greedy
						trait = lustful
						trait = ambitious
						trait = deceitful
						trait = cruel
						trait = expert_fighter
						trait = master_sorcerer
						trait = expert_rogue
						trait = schemer
						trait = midas_touched
						trait = narrow_flank_leader
						trait = trickster
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				5 = { #Belial
					modifier = { has_global_flag = belial_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Belial"
						dynasty = 12857 # of Phlegethos
						culture = baatezu
						religion = infernal
						dna = "dihgchbbkj"
						attributes = {
							learning = 18
							intrigue = 14
							martial = 8
							diplomacy = 12
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = tough
						trait = genius
						trait = fair
						trait = lustful
						trait = deceitful
						trait = ambitious
						trait = erudite
						trait = cruel
						trait = expert_fighter
						trait = master_sorcerer
						trait = journeyman_shadow
						trait = elusive_shadow
						trait = seducer
						trait = trickster
						trait = experimenter
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				5 = { #Fierna
					modifier = { has_global_flag = fierna_spawned factor = 0 }
					create_character = {
						random_traits = no
						female = yes
						name = "Fierna"
						dynasty = 12857 # of Phlegethos
						culture = baatezu
						religion = infernal
						dna = "daabgikaaar"
						attributes = {
							learning = 14
							intrigue = 15
							martial = 8
							diplomacy = 15
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = tough
						trait = brilliant
						trait = beautiful
						trait = lustful
						trait = deceitful
						trait = ambitious
						trait = slothful
						trait = cruel
						trait = journeyman_fighter
						trait = master_sorcerer
						trait = expert_shadow
						trait = elusive_shadow
						trait = seductress
						trait = trickster
						trait = experimenter
						age = 1000
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Baalzebul
					modifier = { has_global_flag = baalzebul_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Baalzebul"
						dynasty = 12858 # of Maladomini
						culture = baatezu
						religion = infernal
						dna = "dchdlzmcabj"
						attributes = {
							learning = 14
							intrigue = 18
							martial = 12
							diplomacy = 10
							stewardship = 6
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = unsightly
						trait = envious
						trait = brave
						trait = ambitious
						trait = deceitful
						trait = cruel
						trait = renowned_fighter
						trait = master_sorcerer
						trait = expert_shadow
						trait = schemer
						trait = elusive_shadow
						trait = experimenter
						trait = unyielding_leader
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Geryon
					modifier = { has_global_flag = geryon_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Geryon"
						dynasty = 12862 # of Stygia
						culture = baatezu
						religion = infernal
						dna = "bfahgecacaj"
						attributes = {
							learning = 14
							intrigue = 8
							martial = 18
							diplomacy = 10
							stewardship = 10
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = brilliant
						trait = fair
						trait = brave
						trait = envious
						trait = humble
						trait = wroth
						trait = cruel
						trait = master_barbarian
						trait = master_sorcerer
						trait = brilliant_strategist
						trait = hunter
						trait = holy_warrior
						trait = experimenter
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Mephistopheles
					modifier = { has_global_flag = mephistopheles_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Mephistopheles"
						dynasty = 12851 # of Cania
						culture = baatezu
						religion = infernal
						dna = "bamgdgmddar"
						attributes = {
							learning = 16
							intrigue = 16
							martial = 11
							diplomacy = 11
							stewardship = 6
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = wroth
						trait = gregarious
						trait = ambitious
						trait = deceitful
						trait = cruel
						trait = renowned_fighter
						trait = master_sorcerer
						trait = expert_wizard
						trait = wiz_evocation
						trait = elusive_shadow
						trait = impaler
						trait = aggressive_leader
						trait = winter_soldier
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				#Demon Lords
				10 = { #Demogorgon
					modifier = { has_global_flag = demogorgon_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Demogorgon"
						dynasty = 12855 # of the Gaping Maw
						culture = tanarri
						religion = abyssal_cult
						dna = "dlidhclcacz"
						attributes = {
							learning = 16
							intrigue = 14
							martial = 16
							diplomacy = 6
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = lunatic
						trait = envious
						trait = paranoid
						trait = arbitrary
						trait = deceitful
						trait = cruel
						trait = renowned_barbarian
						trait = master_rogue #can use all magic items like a rogue
						trait = master_sorcerer
						trait = elusive_shadow
						trait = impaler
						trait = trickster
						trait = aggressive_leader
						trait = patron_demogorgon
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Orcus
					modifier = { has_global_flag = orcus_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Orcus"
						dynasty = 12859 # of Thanatos
						culture = tanarri
						religion = abyssal_cult
						dna = "ceflkmicaax"
						attributes = {
							learning = 18
							intrigue = 12
							martial = 16
							diplomacy = 6
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = undead
						trait = wroth
						trait = ambitious
						trait = arbitrary
						trait = gluttonous
						trait = cruel
						trait = renowned_barbarian
						trait = master_sorcerer
						trait = expert_wizard
						trait = wiz_necromancy
						trait = brilliant_strategist
						trait = impaler
						trait = experimenter
						trait = aggressive_leader
						trait = patron_orcus
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Graz'zt
					modifier = { has_global_flag = grazzt_spawned factor = 0 }
					modifier = { c_1015 = { is_alive = yes } factor = 0 }
					create_character = {
						random_traits = no
						name = "Graz'zt"
						dynasty = 4958 # Azzagrat
						culture = tanarri
						religion = abyssal_cult
						dna = "blkjcjcdadw"
						attributes = {
							diplomacy = 15
							martial = 8
							stewardship = 8
							intrigue = 15
							learning = 14
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = bisexual
						trait = genius
						trait = tough
						trait = fair
						trait = renowned_fighter
						trait = master_sorcerer
						trait = expert_wizard
						trait = wiz_enchantment
						trait = patient
						trait = ambitious
						trait = lustful
						trait = cruel
						trait = grey_eminence
						trait = seducer
						trait = hedonist
						trait = inspiring_leader
						trait = flanker
						trait = patron_grazzt
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Pazuzu
					modifier = { has_global_flag = pazuzu_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Pazuzu"
						dynasty = 12860 # of Pazunia
						culture = tanarri
						religion = abyssal_cult
						dna = "aafaaajbbah"
						attributes = {
							learning = 14
							intrigue = 14
							martial = 10
							diplomacy = 14
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = greedy
						trait = patient
						trait = gregarious
						trait = deceitful
						trait = cruel
						trait = master_ranger #connected to elemental air and flying beasts
						trait = master_sorcerer
						trait = expert_shadow
						trait = elusive_shadow
						trait = socializer
						trait = light_foot_leader
						trait = trickster
						trait = patron_pazuzu
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Yeenoghu
					modifier = { has_global_flag = yeenoghu_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Yeenoghu"
						dynasty = 12861 # of the Seeping Woods
						culture = tanarri
						religion = abyssal_cult
						dna = "phfeeqabaai"
						attributes = {
							learning = 14
							intrigue = 12
							martial = 16
							diplomacy = 10
							stewardship = 8
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = wroth
						trait = brave
						trait = arbitrary
						trait = stubborn
						trait = cruel
						trait = master_barbarian
						trait = master_sorcerer
						trait = brilliant_strategist
						trait = hunter
						trait = light_foot_leader
						trait = aggressive_leader
						trait = patron_yeenoghu
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
				10 = { #Baphomet
					modifier = { has_global_flag = baphomet_spawned factor = 0 }
					create_character = {
						random_traits = no
						name = "Baphomet"
						dynasty = 12863 # of the Endless Maze
						culture = tanarri
						religion = abyssal_cult
						dna = "bfmiabbnaam"
						attributes = {
							learning = 12
							intrigue = 12
							martial = 18
							diplomacy = 8
							stewardship = 10
						}
						trait = creature_fiend
						trait = greater_fiend
						trait = archfiend
						trait = strong
						trait = genius
						trait = wroth
						trait = brave
						trait = arbitrary
						trait = gluttonous
						trait = cruel
						trait = master_barbarian
						trait = master_sorcerer
						trait = brilliant_strategist
						trait = hunter
						trait = narrow_flank_leader
						trait = aggressive_leader
						trait = patron_baphomet
						age = 1370
						immortal_age = 30
						flag = ai_flag_refuse_conversion
					}
				}
			}
			new_character = {
				wealth = 1000
				save_event_target_as = invader_char
				remove_trait = weak
				remove_trait = delicate
				remove_trait = soft
				remove_trait = imbecile
				remove_trait = idiot
				remove_trait = slow
				remove_trait = craven
				remove_trait = kind
				remove_trait = charitable
				remove_trait = cynical
				character_event = { id = frxp.1 }
				character_event = { id = ALWAR.3 }
				trigger_switch = { # chaotic_invader flag & bloodline
					on_trigger = culture
					tanarri = {
						set_character_flag = chaotic_invader
						create_bloodline = {
							type = demon_lord_bloodline
						}
					}
					baatezu = {
						create_bloodline = {
							type = mephisto_bloodline
						}
					}
				}
				trigger_switch = { #spawn flags
					on_trigger = dynasty
					12854 = {
						set_global_flag = dispater_spawned
						set_graphical_culture = cambion
						give_nickname = nick_the_iron_duke
					}
					12856 = {
						set_global_flag = mammon_spawned
						set_graphical_culture = yugoloth
						give_nickname = nick_the_lord_of_avarice
					}
					12857 = {
						if = {
							limit = {
								is_female = yes
							}
							set_graphical_culture = succubus
							set_global_flag = fierna_spawned
							give_nickname = nick_the_fiery_lady
						}
						else = {
							set_graphical_culture = cambion
							set_global_flag = belial_spawned
							give_nickname = nick_the_lord_of_pain
						}
					}
					12858 = {
						set_global_flag = baalzebul_spawned
						set_graphical_culture = nalfeshnee
						give_nickname = nick_lord_of_the_flies
					}
					12862 = {
						set_global_flag = geryon_spawned
						set_graphical_culture = lamia
						give_nickname = nick_the_trifold_duke
					}
					12855 = {
						set_global_flag = demogorgon_spawned
						set_graphical_culture = nalfeshnee
						give_nickname = nick_the_sibilant_beast
					}
					12859 = {
						set_global_flag = orcus_spawned
						set_graphical_culture = baatezu
						give_nickname = nick_prince_of_the_undead
					}
					4958 = {
						set_global_flag = grazzt_spawned
						set_graphical_culture = dark_elf
						give_nickname = nick_the_dark_prince
					}
					12860 = {
						set_global_flag = pazuzu_spawned
						set_graphical_culture = aarakocra
						give_nickname = nick_daotfw
					}
					12861 = {
						set_global_flag = yeenoghu_spawned
						set_graphical_culture = gnoll
						give_nickname = nick_ruler_of_ruin
					}
					12863 = {
						set_global_flag = baphomet_spawned
						set_graphical_culture = minotaur
						give_nickname = nick_the_horned_king
					}
					12851 = {
						set_global_flag = mephistopheles_spawned
						set_graphical_culture = baatezu
						give_nickname = nick_duke_of_brimstone
					}
				}
			}
		}
	}
}
#third event: invader is given a temporary title and troops.
character_event = {
	id = ALWAR.3
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		create_title = {
			tier = DUKE
			landless = yes
			temporary = yes
			culture = ROOT
			name = "CLAIMANT_ADVENTURE"
			holder = ROOT
			adventurer = yes
		}
		set_character_flag = duchy_adventurer
		if = { #good invader
			limit = {
				event_target:invader_char = {
					is_evil_religion = no
				}
			}
			spawn_unit = {
				province = event_target:invasion_province
				home = event_target:invasion_province
				owner = THIS
				leader = THIS
				match_character = event_target:target_ruler
				match_mult = 0.1
				match_min = 500
				#earmark = decadence_revolters
				reinforces = yes
				reinforce_rate_multiplier = 0.25
				merge = yes
				attrition = 0
			}
			spawn_fleet = {
				province = closest # closest sea zone
				owner = THIS
				disband_on_peace = yes
				troops = {
					galleys = { 400 400 }
				}
				earmark = decadence_revolters
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 20
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.1
					match_min = 500
					#earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 22
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.1
					match_min = 500
					#earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 24
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.1
					match_min = 500
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 30
				attributes = {
					martial = 9
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.1
					match_min = 500
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 33
				attributes = {
					martial = 9
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.1
					match_min = 500
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
		}
		else_if = { #evil invaders
			limit = {
				event_target:invader_char = {
					is_evil_religion = yes
				}
			}
			spawn_unit = {
				province = event_target:invasion_province
				home = event_target:invasion_province
				owner = THIS
				leader = THIS
				match_character = event_target:target_ruler
				match_mult = 0.2
				match_min = 4600
				#earmark = decadence_revolters
				reinforces = yes
				reinforce_rate_multiplier = 0.25
				attrition = 0
				merge = yes
			}
			spawn_fleet = {
				province = closest # closest sea zone
				owner = THIS
				disband_on_peace = yes
				troops = {
					galleys = { 400 400 }
				}
				earmark = decadence_revolters
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 20
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					#earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 22
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					#earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 24
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 30
				attributes = {
					martial = 9
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 30
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = NONE
				religion = ROOT
				culture = ROOT
				female = no
				age = 33
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
			}
			new_character = {
				spawn_unit = {
					province = event_target:invasion_province
					home = event_target:invasion_province
					owner = PREV
					match_character = event_target:target_ruler
					match_mult = 0.2
					match_min = 4600
					earmark = decadence_revolters
					reinforces = yes
					reinforce_rate_multiplier = 0.25
					attrition = 0
					merge = yes
				}
			}
		}
		narrative_event = { id = ALWAR.4 days = 1 }
	}
}
#fourth event: a major narrative event warning of a potential invasion
narrative_event = {
	id = ALWAR.4
	title = EVTNAME_ALWAR_4
	portrait = event_target:target_ruler
	hide_new = yes
	show_root = yes
	major = yes

	picture = { #angel
		trigger = {
			event_target:invader_char = { culture = angel }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		picture = GFX_evt_angels_2
	}
	picture = { #tanarri
		trigger = {
			event_target:invader_char = { culture = tanarri }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		picture = GFX_evt_demons_1
	}
	picture = { #baatezu
		trigger = {
			event_target:invader_char = { culture = baatezu }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		picture = GFX_evt_devils_1
	}
	picture = { #scro
		trigger = { event_target:invader_char = { culture = scro } }
		picture = GFX_evt_orcs
	}
	picture = { # giants in grey
		trigger = {
			OR = {
				event_target:invader_char = { culture = angel }
				event_target:invader_char = { culture = tanarri }
				event_target:invader_char = { culture = baatezu }
			}
			event_target:target_ruler = {
				OR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		picture = GFX_evt_giants_in_grey
	}
	picture = { #mortal crusader, update trigger when more invaders are added
		trigger = {
			event_target:invader_char = {
				NOR = {
					culture = angel
					culture = tanarri
					culture = baatezu
					culture = scro
				}
			}
		}
		picture = GFX_evt_mounted_knights_hf
	}

	is_triggered_only = yes

	major_trigger = {
		ai = no
	}

	desc = { #angel
		trigger = {
			event_target:invader_char = { culture = angel }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		text = EVTDESC_ALWAR_4_1
	}
	desc = { #tanarri
		trigger = {
			event_target:invader_char = { culture = tanarri }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		text = EVTDESC_ALWAR_4_2
	}
	desc = { #baatezu
		trigger = {
			event_target:invader_char = { culture = baatezu }
			event_target:target_ruler = {
				NOR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		text = EVTDESC_ALWAR_4_3
	}
	desc = { # giants in grey, for all outsider attacks on Shou Lung
		trigger = {
			OR = {
				event_target:invader_char = { culture = angel }
				event_target:invader_char = { culture = tanarri }
				event_target:invader_char = { culture = baatezu }
			}
			event_target:target_ruler = {
				OR = {
					has_landed_title = e_shou_lung_west_governor
					primary_title = {
						has_title_flag = pretender_shou_lung_empire
					}
				}
			}
		}
		text = EVTDESC_ALWAR_4_1_SHOU
	}
	desc = { #scro
		trigger = { event_target:invader_char = { culture = scro } }
		text = EVTDESC_ALWAR_4_4
	}
	desc = { #mortal crusader, update trigger when more invaders are added
		trigger = {
			event_target:invader_char = {
				NOR = {
					culture = angel
					culture = tanarri
					culture = baatezu
					culture = scro
				}
			}
		}
		text = EVTDESC_ALWAR_4_0
	}

	option = {
		name = EVTOPTA_ALWAR_4
		narrative_event = { id = ALWAR.5 days = 120 random = 30 }
	}
}
#fifth event: war is declared on target. Both invader and target make their automatic call to arms.
narrative_event = {
	id = ALWAR.5
	title = EVTNAME_ALWAR_5
	portrait = event_target:target_ruler
	hide_new = yes
	show_root = yes
	major = yes

	trigger = {
		OR = {
			NOT = { has_global_flag = recent_align_war }
			had_global_flag = {
				flag = recent_align_war
				years >= 50
			}
		}
	}

	picture = { #angel
		trigger = { event_target:invader_char = { culture = angel } }
		picture = GFX_evt_angels_2
	}
	picture = { #tanarri
		trigger = { event_target:invader_char = { culture = tanarri } }
		picture = GFX_evt_demons_1
	}
	picture = { #baatezu
		trigger = { event_target:invader_char = { culture = baatezu } }
		picture = GFX_evt_devils_1
	}
	picture = { #scro
		trigger = { event_target:invader_char = { culture = scro } }
		picture = GFX_evt_orcs
	}
	picture = { #mortal crusader, update condition when more invaders are added
		trigger = {
			event_target:invader_char = {
				NOR = {
					culture = angel
					culture = tanarri
					culture = baatezu
					culture = scro
				}
			}
		}
		picture = GFX_evt_mounted_knights_hf
	}

	is_triggered_only = yes

	major_trigger = {
		ai = no
	}

	desc = {
		trigger = {
			event_target:target_ruler = {
				is_evil_religion = yes
			}
		}
		text = EVTDESC_ALWAR_5_A
	}
	desc = {
		trigger = {
			event_target:target_ruler = {
				is_evil_religion = no
			}
		}
		text = EVTDESC_ALWAR_5_B
	}

	immediate = {
		event_target:invader_char = {
			war = {
				target = event_target:target_ruler
				casus_belli = great_align_conflict
			}
			character_event = { id = ALWAR.10 days = 1 }
		}
		event_target:target_ruler = {
			character_event = { id = ALWAR.10 days = 1 }
		}
		set_global_flag = recent_align_war
	}

	option = {
		name = EVTOPTA_ALWAR_5
	}
}

#Call to arms event
character_event = {
	id = ALWAR.10
	desc = EVTDESC_ALWAR_10
	picture = GFX_evt_large_army

	is_triggered_only = yes

	trigger = {
		any_war = {
			using_cb = great_align_conflict
		}
		OR = {
			is_primary_war_attacker = yes
			is_primary_war_defender = yes
		}
	}

	option = {
		name = EVTOPTA_ALWAR_10
		any_independent_ruler = {
			if = {
				limit = {
					ROOT = {
						olrox_is_good_religion_trigger = yes
					}
					distance_from_realm = {
						who = event_target:target_ruler
						value < 500
					}
					NOR = {
						has_character_modifier = refused_align_war
						war_with = ROOT
						war_with = event_target:target_ruler
						mercenary = yes
						holy_order = yes
					}
					is_landed = yes
					olrox_is_good_religion_trigger = yes
				}
				letter_event = {
					id = ALWAR.11
					days = 7
					random = 21
					tooltip = EVTTOOLTIP100161
				}
			}
			else_if = {
				limit = {
					ROOT = {
						is_evil_religion = no
						olrox_is_good_religion_trigger = no
					}
					distance_from_realm = {
						who = event_target:target_ruler
						value < 500
					}
					NOR = {
						has_character_modifier = refused_align_war
						war_with = ROOT
						war_with = event_target:target_ruler
						mercenary = yes
						holy_order = yes
					}
					is_landed = yes
					is_evil_religion = no
					religion_group = ROOT
				}
				letter_event = {
					id = ALWAR.11
					days = 7
					random = 21
					tooltip = EVTTOOLTIP100161
				}
			}
			else_if = {
				limit = {
					ROOT = {
						is_evil_religion = yes
					}
					distance_from_realm = {
						who = event_target:target_ruler
						value < 500
					}
					NOR = {
						has_character_modifier = refused_align_war
						war_with = ROOT
						war_with = event_target:target_ruler
						mercenary = yes
						holy_order = yes
					}
					is_landed = yes
					is_evil_religion = yes
					religion = ROOT
				}
				letter_event = {
					id = ALWAR.11
					days = 7
					random = 21
					tooltip = EVTTOOLTIP100161
				}
			}
		}
		any_current_enemy = { #try to white peace with other enemies
			if = {
				limit = {
					NOT = { has_character_flag = duchy_adventurer }
					ROOT = {
						NOT = { character = event_target:invader_char }
					}
				}
				letter_event = {
					id = ALWAR.12
					days = 5
				}
			}
		}
		character_event = { id = ALWAR.10 months = 6 } #repeat event if great_align_conflict ongoing
	}
	option = {
		name = EVTOPTB_ALWAR_10
		ai_chance = {
			factor = 0
		}
		prestige = 30
		character_event = { id = ALWAR.10 months = 12 } #repeat event if great_align_conflict ongoing
	}
}
#Asked to join align war
letter_event = {
	id = ALWAR.11
	desc = EVTDESC_ALWAR_11

	is_triggered_only = yes

	trigger = {
		NOT = { has_character_modifier = refused_align_war }
	}

	option = {
		name = EVTOPTA_ALWAR_11
		FROM = {
			any_war = {
				limit = {
					using_cb = great_align_conflict
				}
				ROOT = {
					if = {
						limit = {
							FROM = { is_primary_war_defender = yes }
						}
						join_defender_wars = PREV
					}
					if = {
						limit = {
							FROM = {
								is_primary_war_attacker = yes
								has_character_flag = duchy_adventurer
							}
						}
						join_attacker_wars = PREV
					}
				}
			}
			opinion = {
				modifier = opinion_grateful
				who = ROOT
				years = 5
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					is_married = FROM
					is_parent_of = FROM
					is_child_of = FROM
				}
			}
			modifier = {
				factor = 5
				is_friend = FROM
			}
			modifier = {
				factor = 0.2
				is_rival = FROM
			}
			modifier = {
				factor = 4
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					has_character_flag = duchy_adventurer
					olrox_is_good_religion_trigger = yes
				}
			}
			modifier = {
				factor = 1.4
				FROM = {
					culture = ROOT
				}
			}
			modifier = {
				factor = 1.4
				FROM = {
					religion = ROOT
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					NOT = { culture = ROOT }
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					NOT = { religion = ROOT }
				}
			}
			modifier = {
				factor = 0.8
				FROM = {
					NOT = { culture_group = ROOT }
				}
			}
			modifier = {
				factor = 0.8
				FROM = {
					NOT = { religion_group = ROOT }
				}
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  20 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  40 }
			}
			modifier = {
				factor = 1.3
				opinion = { who = FROM value =  60 }
			}
			modifier = {
				factor = 1.3
				opinion = { who = FROM value =  80 }
			}
			modifier = {
				factor = 1.3
				opinion = { who = FROM value =  100 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value =  0 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 0.7
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 0.7
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 0.7
				NOT = { opinion = { who = FROM value =  -99 } }
			}
		}
	}
	option = {
		name = EVTOPTB_ALWAR_11
		tooltip = {
			reverse_opinion = {
				modifier = opinion_very_disappointed
				who = FROM
				years = 5
			}
		}
		add_character_modifier = {
			modifier = refused_align_war
			hidden = yes
			duration = 1000
		}
		ai_chance = {
			factor = 1
		}
	}
}
#Asked to white peace
letter_event = {
	id = ALWAR.12
	desc = EVTDESC_ALWAR_12

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ALWAR_12
		any_war = {
      limit = {
        AND = {
          attacker = {
            character = ROOT
						is_primary_war_attacker = yes
          }
          defender = {
            character = FROM
						is_primary_war_defender = yes
          }
        }
      }
      end_war = whitepeace
		}
	}
	option = {
		name = EVTOPTB_ALWAR_12
		tooltip = {
			reverse_opinion = {
				modifier = opinion_very_disappointed
				who = FROM
				years = 5
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}
