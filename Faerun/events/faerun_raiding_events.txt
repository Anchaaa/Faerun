namespace = RAID

#Pick raiding target
character_event = {
	id = RAID.1
	desc = EVTDESC_RAID_1
	picture = GFX_evt_northlander_raid

	is_triggered_only = yes

	immediate = {
		random_playable_ruler = {
			limit = {
				higher_real_tier_than = BARON
				any_demesne_title = {
					real_tier = COUNT
				}
				NOT = { is_vassal_or_below_of = ROOT }
				distance_from_realm = {
					who = ROOT
					value < 500
				}
				NOR = {
					has_character_flag = being_raided_flag
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					any_demesne_province = {
						has_province_modifier = raid_looted_mod
					}
					reverse_has_truce = ROOT
				}
			}
			save_event_target_as = raid_candidate_1
			set_character_flag = being_raided_flag
		}
		random_playable_ruler = {
			limit = {
				higher_real_tier_than = BARON
				any_demesne_title = {
					real_tier = COUNT
				}
				NOT = { is_vassal_or_below_of = ROOT }
				distance_from_realm = {
					who = ROOT
					value < 500
				}
				NOR = {
					has_character_flag = being_raided_flag
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					any_demesne_province = {
						has_province_modifier = raid_looted_mod
					}
					reverse_has_truce = ROOT
				}
			}
			save_event_target_as = raid_candidate_2
			set_character_flag = being_raided_flag
		}
		random_playable_ruler = {
			limit = {
				higher_real_tier_than = BARON
				any_demesne_title = {
					real_tier = COUNT
				}
				NOT = { is_vassal_or_below_of = ROOT }
				distance_from_realm = {
					who = ROOT
					value < 500
				}
				NOR = {
					has_character_flag = being_raided_flag
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					any_demesne_province = {
						has_province_modifier = raid_looted_mod
					}
					reverse_has_truce = ROOT
				}
			}
			save_event_target_as = raid_candidate_3
			set_character_flag = being_raided_flag
		}
		random_playable_ruler = {
			limit = {
				higher_real_tier_than = BARON
				any_demesne_title = {
					real_tier = COUNT
				}
				NOT = { is_vassal_or_below_of = ROOT }
				distance_from_realm = {
					who = ROOT
					value < 500
				}
				NOR = {
					has_character_flag = being_raided_flag
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					any_demesne_province = {
						has_province_modifier = raid_looted_mod
					}
					reverse_has_truce = ROOT
				}
			}
			save_event_target_as = raid_candidate_4
			set_character_flag = being_raided_flag
		}
	}

	option = {
		name = EVTOPTA_RAID_1
		trigger = { event_target:raid_candidate_1 = { always = yes } }
		event_target:raid_candidate_1 = {
			save_event_target_as = raid_target
		}
		hidden_tooltip = {
			event_target:raid_candidate_2 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_3 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_4 = {
				clr_character_flag = being_raided_flag
			}
		}
		character_event = { id = RAID.2 }
	}
	option = {
		name = EVTOPTB_RAID_1
		trigger = { event_target:raid_candidate_2 = { always = yes } }
		event_target:raid_candidate_2 = {
			save_event_target_as = raid_target
		}
		hidden_tooltip = {
			event_target:raid_candidate_1 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_3 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_4 = {
				clr_character_flag = being_raided_flag
			}
		}
		character_event = { id = RAID.2 }
	}
	option = {
		name = EVTOPTC_RAID_1
		trigger = { event_target:raid_candidate_3 = { always = yes } }
		event_target:raid_candidate_3 = {
			save_event_target_as = raid_target
		}
		hidden_tooltip = {
			event_target:raid_candidate_1 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_2 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_4 = {
				clr_character_flag = being_raided_flag
			}
		}
		character_event = { id = RAID.2 }
	}
	option = {
		name = EVTOPTD_RAID_1
		trigger = { event_target:raid_candidate_4 = { always = yes } }
		event_target:raid_candidate_4 = {
			save_event_target_as = raid_target
		}
		hidden_tooltip = {
			event_target:raid_candidate_1 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_2 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_3 = {
				clr_character_flag = being_raided_flag
			}
		}
		character_event = { id = RAID.2 }
	}
	option = {
		name = EVTOPTE_RAID_1
		ai_chance = {
			factor = 0.1
		}
		hidden_tooltip = {
			event_target:raid_candidate_1 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_2 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_3 = {
				clr_character_flag = being_raided_flag
			}
			event_target:raid_candidate_4 = {
				clr_character_flag = being_raided_flag
			}
		}
		scaled_prestige = {
			value = 1
			min = 10
			max = 200
		}
		clr_character_flag = going_raiding
	}
}
#Asks ruler if they want to lead raid
character_event = {
	id = RAID.2
	desc = EVTDESC_RAID_2
	picture = GFX_evt_adventurers_3

	is_triggered_only = yes

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				has_minor_title = title_commander
				NOT = { has_character_flag = raider_candidate }
				NOT = { is_rival = ROOT }
			}
			set_character_flag = raider_candidate
			save_event_target_as = raider_candidate_1
		}
		random_courtier_or_vassal = {
			limit = {
				has_minor_title = title_commander
				NOT = { has_character_flag = raider_candidate }
				NOT = { is_rival = ROOT }
			}
			set_character_flag = raider_candidate
			save_event_target_as = raider_candidate_2
		}
		random_courtier_or_vassal = {
			limit = {
				has_minor_title = title_commander
				NOT = { has_character_flag = raider_candidate }
				NOT = { is_rival = ROOT }
			}
			set_character_flag = raider_candidate
			save_event_target_as = raider_candidate_3
		}
	}

	option = {
		name = EVTOPTA_RAID_2
		trigger = { event_target:raider_candidate_1 = { always = yes } }
		ai_chance = {
			factor = 1
		}
		event_target:raider_candidate_1 = {
			save_event_target_as = raider_leader
			add_trait = travelling
			clr_character_flag = raider_candidate
		}
		hidden_tooltip = {
			event_target:raider_candidate_2 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_3 = {
				clr_character_flag = raider_candidate
			}
		}
		event_target:raid_target = {
			character_event = { id = RAID.3 } #Check Defense
			reverse_unsafe_war = {
				target = ROOT
				casus_belli = auto_invalid_war_cb
			}
		}
	}
	option = {
		name = EVTOPTB_RAID_2
		trigger = { event_target:raider_candidate_2 = { always = yes } }
		ai_chance = {
			factor = 1
		}
		event_target:raider_candidate_2 = {
			save_event_target_as = raider_leader
			add_trait = travelling
			clr_character_flag = raider_candidate
		}
		hidden_tooltip = {
			event_target:raider_candidate_1 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_3 = {
				clr_character_flag = raider_candidate
			}
		}
		event_target:raid_target = {
			character_event = { id = RAID.3 } #Check Defense
			reverse_unsafe_war = {
				target = ROOT
				casus_belli = auto_invalid_war_cb
			}
		}
	}
	option = {
		name = EVTOPTC_RAID_2
		trigger = { event_target:raider_candidate_3 = { always = yes } }
		ai_chance = {
			factor = 1
		}
		event_target:raider_candidate_3 = {
			save_event_target_as = raider_leader
			add_trait = travelling
			clr_character_flag = raider_candidate
		}
		hidden_tooltip = {
			event_target:raider_candidate_1 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_2 = {
				clr_character_flag = raider_candidate
			}
		}
		event_target:raid_target = {
			character_event = { id = RAID.3 } #Check Defense
			reverse_unsafe_war = {
				target = ROOT
				casus_belli = auto_invalid_war_cb
			}
		}
	}
	option = {
		name = EVTOPTD_RAID_2
		trigger = {
			is_adult = yes
			NOT = { trait = in_hiding }
			is_incapable = no
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { has_character_flag = do_not_disturb }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 0.2
				trait = craven
			}
			modifier = {
				factor = 0.1
				immortal = yes
			}
			modifier = {
				factor = 0
				trait = avatar
			}
			modifier = {
				factor = 0
				combat_rating <= 0
			}
			modifier = {
				factor = 0.25
				combat_rating <= 15
			}
			modifier = {
				factor = 0.5
				combat_rating <= 30
			}
			modifier = {
				factor = 0.75
				combat_rating <= 45
			}
			modifier = {
				factor = 1.5
				combat_rating >= 75
			}
		}
		save_event_target_as = raider_leader
		add_trait = travelling
		hidden_tooltip = {
			event_target:raider_candidate_1 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_2 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_3 = {
				clr_character_flag = raider_candidate
			}
		}
		event_target:raid_target = {
			character_event = { id = RAID.3 } #Check Defense
			reverse_unsafe_war = {
				target = ROOT
				casus_belli = auto_invalid_war_cb
			}
		}
	}
	option = {
		name = EVTOPTE_RAID_2
		ai_chance = {
			factor = 0.2
		}
		hidden_tooltip = {
			event_target:raid_target = {
				clr_character_flag = being_raided_flag
			}
			event_target:raider_candidate_1 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_2 = {
				clr_character_flag = raider_candidate
			}
			event_target:raider_candidate_3 = {
				clr_character_flag = raider_candidate
			}
		}
		scaled_prestige = {
			value = 1
			min = 10
			max = 200
		}
		clr_character_flag = going_raiding
	}
}
#Check raiding target defense & determine raided province
character_event = {
	id = RAID.3
	desc = EVTDESC_RAID_3
	picture = GFX_evt_war_planning
	portrait = event_target:raider_leader

	is_triggered_only = yes

	immediate = {
		random_demesne_province = {
			save_event_target_as = province_raid_target
		}
	}

	option = { #defend from raiders
		name = EVTOPTA_RAID_3
		ai_chance = {
			factor = 3
			modifier = {
				factor = 2
				wealth > 200
			}
			modifier = {
				factor = 2
				wealth > 300
			}
			modifier = {
				factor = 2
				wealth > 400
			}
		}
		if = {
			limit  = {
				event_target:province_raid_target = {
					has_province_modifier = repel_raiders_mod
				}
			}
			event_target:province_raid_target = {
				add_province_modifier = {
					name = repel_raiders_mod
					duration = 365
				}
			}
		}
		else = {
			scaled_wealth = {
				value = -0.25
				min = -5
				max = -200
			}
			event_target:province_raid_target = {
				add_province_modifier = {
					name = repel_raiders_mod
					duration = 365
				}
			}
		}
		FROM = {
			character_event = { id = RAID.4 } #Event Tombola
		}
	}
	option = { #no defense
		name = EVTOPTB_RAID_3
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1.5
				wealth < 100
			}
			modifier = {
				factor = 2
				wealth < 50
			}
			modifier = {
				factor = 2
				wealth < 0
			}
			modifier = {
				factor = 0
				event_target:province_raid_target = {
					has_province_modifier = repel_raiders_mod
				}
			}
		}
		scaled_prestige = {
			value = -0.5
			min = -10
			max = -200
		}
		FROM = {
			character_event = { id = RAID.4 } #Event Tombola
		}
	}
}
#Raiding events tombola
character_event = {
	id = RAID.4
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = { #first random event
			10 = { #Hostile Patrol
				modifier = {
					event_target:province_raid_target = {
						NOT = { has_province_modifier = repel_raiders_mod }
					}
					factor = 0
				}
				character_event = { id = RAID.10 days = 30 }
			}
			10 = { #Take Courtier Prisoner
				modifier = {
					event_target:province_raid_target = {
						has_province_modifier = repel_raiders_mod
					}
					factor = 0
				}
				character_event = { id = RAID.11 days = 30 }
			}
			2 = { #DnD loot
				character_event = { id = RAID.12 days = 30 }
			}
			3 = { #Strange Chest
				character_event = { id = RAID.13 days = 30 }
				character_event = { id = RAID.14 days = 30 }
				character_event = { id = RAID.15 days = 30 }
			}
			5 = { #Gaining Thralls
				character_event = { id = RAID.16 days = 30 }
			}
			10 = { #Rounded up cattle
				character_event = { id = RAID.17 days = 30 }
			}
			10 = { #Random Monsters
				character_event = { id = RAID.18 days = 30 }
			}
			5 = { #Bad weather
				character_event = { id = RAID.19 days = 30 }
			}
			10 = { #Mercenary thugs
				character_event = { id = RAID.20 days = 30 }
			}
			5 = { #Gain Cruel / Lose Kind
				character_event = { id = RAID.21 days = 30 }
			}
			5 = { #Gain Brave / Lose Craven
				character_event = { id = RAID.22 days = 30 }
			}
			10 = { #New Rival
				character_event = { id = RAID.23 days = 30 }
			}
			10 = { #New Comrade
				character_event = { id = RAID.24 days = 30 }
			}
			10 = { #Raiders Squabbling
				character_event = { id = RAID.25 days = 30 }
			}
			5 = { #Influx of Loot
				character_event = { id = RAID.26 days = 30 }
			}
		}
		random_list = { #second random event
			10 = { #Hostile Patrol
				modifier = {
					event_target:province_raid_target = {
						NOT = { has_province_modifier = repel_raiders_mod }
					}
					factor = 0
				}
				character_event = { id = RAID.10 days = 60 }
			}
			10 = { #Take Courtier Prisoner
				modifier = {
					event_target:province_raid_target = {
						has_province_modifier = repel_raiders_mod
					}
					factor = 0
				}
				character_event = { id = RAID.11 days = 60 }
			}
			2 = { #DnD loot
				character_event = { id = RAID.12 days = 60 }
			}
			3 = { #Strange Chest
				character_event = { id = RAID.13 days = 60 }
				character_event = { id = RAID.14 days = 60 }
				character_event = { id = RAID.15 days = 60 }
			}
			5 = { #Gaining Thralls
				character_event = { id = RAID.16 days = 60 }
			}
			10 = { #Rounded up cattle
				character_event = { id = RAID.17 days = 60 }
			}
			10 = { #Random Monsters
				character_event = { id = RAID.18 days = 60 }
			}
			5 = { #bad weather
				character_event = { id = RAID.19 days = 60 }
			}
			10 = { #mercenary thugs
				character_event = { id = RAID.20 days = 60 }
			}
			5 = { #Gain Cruel / Lose Kind
				character_event = { id = RAID.21 days = 60 }
			}
			5 = { #Gain Brave / Lose Craven
				character_event = { id = RAID.22 days = 60 }
			}
			10 = { #New Rival
				character_event = { id = RAID.23 days = 60 }
			}
			10 = { #New Comrade
				character_event = { id = RAID.24 days = 60 }
			}
			10 = { #Raiders Squabbling
				character_event = { id = RAID.25 days = 60 }
			}
			5 = { #Influx of Loot
				character_event = { id = RAID.26 days = 60 }
			}
		}
		if = { #Guaranteed Patrol event
			limit = {
				event_target:province_raid_target = {
					has_province_modifier = repel_raiders_mod
				}
			}
			character_event = { id = RAID.10 days = 90 }
		}
		if = { #extra events for province 3-4 holdings
			limit = {
				event_target:province_raid_target = { num_of_settlements = 3 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 5 } }
			}
			random_list = { #third random event
				10 = { #Hostile Patrol
					modifier = {
						event_target:province_raid_target = {
							NOT = { has_province_modifier = repel_raiders_mod }
						}
						factor = 0
					}
					character_event = { id = RAID.10 days = 120 }
				}
				10 = { #Take Courtier Prisoner
					modifier = {
						event_target:province_raid_target = {
							has_province_modifier = repel_raiders_mod
						}
						factor = 0
					}
					character_event = { id = RAID.11 days = 120 }
				}
				2 = { #DnD loot
					character_event = { id = RAID.12 days = 120 }
				}
				3 = { #Strange Chest
					character_event = { id = RAID.13 days = 120 }
					character_event = { id = RAID.14 days = 120 }
					character_event = { id = RAID.15 days = 120 }
				}
				5 = { #Gaining Thralls
					character_event = { id = RAID.16 days = 120 }
				}
				10 = { #Rounded up cattle
					character_event = { id = RAID.17 days = 120 }
				}
				10 = { #Random Monsters
					character_event = { id = RAID.18 days = 120 }
				}
				5 = { #bad weather
					character_event = { id = RAID.19 days = 120 }
				}
				10 = { #mercenary thugs
					character_event = { id = RAID.20 days = 120 }
				}
				5 = { #Gain Cruel / Lose Kind
					character_event = { id = RAID.21 days = 120 }
				}
				5 = { #Gain Brave / Lose Craven
					character_event = { id = RAID.22 days = 120 }
				}
				10 = { #New Rival
					character_event = { id = RAID.23 days = 120 }
				}
				10 = { #New Comrade
					character_event = { id = RAID.24 days = 120 }
				}
				10 = { #Raiders Squabbling
					character_event = { id = RAID.25 days = 120 }
				}
				5 = { #Influx of Loot
					character_event = { id = RAID.26 days = 120 }
				}
			}
			random_list = { #fourth random event
				10 = { #Hostile Patrol
					modifier = {
						event_target:province_raid_target = {
							NOT = { has_province_modifier = repel_raiders_mod }
						}
						factor = 0
					}
					character_event = { id = RAID.10 days = 150 }
				}
				10 = { #Take Courtier Prisoner
					modifier = {
						event_target:province_raid_target = {
							has_province_modifier = repel_raiders_mod
						}
						factor = 0
					}
					character_event = { id = RAID.11 days = 150 }
				}
				2 = { #DnD loot
					character_event = { id = RAID.12 days = 150 }
				}
				3 = { #Strange Chest
					character_event = { id = RAID.13 days = 150 }
					character_event = { id = RAID.14 days = 150 }
					character_event = { id = RAID.15 days = 150 }
				}
				5 = { #Gaining Thralls
					character_event = { id = RAID.16 days = 150 }
				}
				10 = { #Rounded up cattle
					character_event = { id = RAID.17 days = 150 }
				}
				10 = { #Random Monsters
					character_event = { id = RAID.18 days = 150 }
				}
				5 = { #bad weather
					character_event = { id = RAID.19 days = 150 }
				}
				10 = { #mercenary thugs
					character_event = { id = RAID.20 days = 150 }
				}
				5 = { #Gain Cruel / Lose Kind
					character_event = { id = RAID.21 days = 150 }
				}
				5 = { #Gain Brave / Lose Craven
					character_event = { id = RAID.22 days = 150 }
				}
				10 = { #New Rival
					character_event = { id = RAID.23 days = 150 }
				}
				10 = { #New Comrade
					character_event = { id = RAID.24 days = 150 }
				}
				10 = { #Raiders Squabbling
					character_event = { id = RAID.25 days = 150 }
				}
				5 = { #Influx of Loot
					character_event = { id = RAID.26 days = 150 }
				}
			}
			if = { #Guaranteed Patrol event
				limit = {
					event_target:province_raid_target = {
						has_province_modifier = repel_raiders_mod
					}
				}
				character_event = { id = RAID.10 days = 180 }
			}
		}
		if = { #extra events for province 5-7 holdings
			limit = {
				event_target:province_raid_target = { num_of_settlements = 5 }
			}
			random_list = { #fifth random event
				10 = { #Hostile Patrol
					modifier = {
						event_target:province_raid_target = {
							NOT = { has_province_modifier = repel_raiders_mod }
						}
						factor = 0
					}
					character_event = { id = RAID.10 days = 210 }
				}
				10 = { #Take Courtier Prisoner
					modifier = {
						event_target:province_raid_target = {
							has_province_modifier = repel_raiders_mod
						}
						factor = 0
					}
					character_event = { id = RAID.11 days = 210 }
				}
				2 = { #DnD loot
					character_event = { id = RAID.12 days = 210 }
				}
				3 = { #Strange Chest
					character_event = { id = RAID.13 days = 210 }
					character_event = { id = RAID.14 days = 210 }
					character_event = { id = RAID.15 days = 210 }
				}
				5 = { #Gaining Thralls
					character_event = { id = RAID.16 days = 210 }
				}
				10 = { #Rounded up cattle
					character_event = { id = RAID.17 days = 210 }
				}
				10 = { #Random Monsters
					character_event = { id = RAID.18 days = 210 }
				}
				5 = { #bad weather
					character_event = { id = RAID.19 days = 210 }
				}
				10 = { #mercenary thugs
					character_event = { id = RAID.20 days = 210 }
				}
				5 = { #Gain Cruel / Lose Kind
					character_event = { id = RAID.21 days = 210 }
				}
				5 = { #Gain Brave / Lose Craven
					character_event = { id = RAID.22 days = 210 }
				}
				10 = { #New Rival
					character_event = { id = RAID.23 days = 210 }
				}
				10 = { #New Comrade
					character_event = { id = RAID.24 days = 210 }
				}
				10 = { #Raiders Squabbling
					character_event = { id = RAID.25 days = 210 }
				}
				5 = { #Influx of Loot
					character_event = { id = RAID.26 days = 210 }
				}
			}
			random_list = { #sixth random event
				10 = { #Hostile Patrol
					modifier = {
						event_target:province_raid_target = {
							NOT = { has_province_modifier = repel_raiders_mod }
						}
						factor = 0
					}
					character_event = { id = RAID.10 days = 240 }
				}
				10 = { #Take Courtier Prisoner
					modifier = {
						event_target:province_raid_target = {
							has_province_modifier = repel_raiders_mod
						}
						factor = 0
					}
					character_event = { id = RAID.11 days = 240 }
				}
				2 = { #DnD loot
					character_event = { id = RAID.12 days = 240 }
				}
				3 = { #Strange Chest
					character_event = { id = RAID.13 days = 240 }
					character_event = { id = RAID.14 days = 240 }
					character_event = { id = RAID.15 days = 240 }
				}
				5 = { #Gaining Thralls
					character_event = { id = RAID.16 days = 240 }
				}
				10 = { #Rounded up cattle
					character_event = { id = RAID.17 days = 240 }
				}
				10 = { #Random Monsters
					character_event = { id = RAID.18 days = 240 }
				}
				5 = { #bad weather
					character_event = { id = RAID.19 days = 240 }
				}
				10 = { #mercenary thugs
					character_event = { id = RAID.20 days = 240 }
				}
				5 = { #Gain Cruel / Lose Kind
					character_event = { id = RAID.21 days = 240 }
				}
				5 = { #Gain Brave / Lose Craven
					character_event = { id = RAID.22 days = 240 }
				}
				10 = { #New Rival
					character_event = { id = RAID.23 days = 240 }
				}
				10 = { #New Comrade
					character_event = { id = RAID.24 days = 240 }
				}
				10 = { #Raiders Squabbling
					character_event = { id = RAID.25 days = 240 }
				}
				5 = { #Influx of Loot
					character_event = { id = RAID.26 days = 240 }
				}
			}
			if = { #Guaranteed Patrol event
				limit = {
					event_target:province_raid_target = {
						has_province_modifier = repel_raiders_mod
					}
				}
				character_event = { id = RAID.10 days = 270 }
			}
		}
		if = { #ending for province 1-2 holdings
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 3 } }
			}
			character_event = { id = RAID.50 days = 100 } #raid succeed
			character_event = { id = RAID.51 days = 100 } #failed raid
			event_target:raider_leader = {
				character_event = { id = RAID.101 days = 105 } #emergency cleanup
			}
			event_target:raid_target = {
				character_event = { id = RAID.101 days = 105 } #emergency cleanup
			}
		}
		if = { #ending for province 3-4 holdings
			limit = {
				event_target:province_raid_target = { num_of_settlements = 3 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 5 } }
			}
			character_event = { id = RAID.50 days = 190 } #raid succeed
			character_event = { id = RAID.51 days = 190 } #failed raid
			event_target:raider_leader = {
				character_event = { id = RAID.101 days = 195 } #emergency cleanup
			}
			event_target:raid_target = {
				character_event = { id = RAID.101 days = 195 } #emergency cleanup
			}
		}
		if = {  #ending for province 5-7 holdings
			limit = {
				event_target:province_raid_target = { num_of_settlements = 5 }
			}
			character_event = { id = RAID.50 days = 280 } #raid succeed
			character_event = { id = RAID.51 days = 280 } #failed raid
			event_target:raider_leader = {
				character_event = { id = RAID.101 days = 285 } #emergency cleanup
			}
			event_target:raid_target = {
				character_event = { id = RAID.101 days = 285 } #emergency cleanup
			}
		}
	}
}

###Random Events###

### Hostile Patrol ###
character_event = {
	id = RAID.10
	desc = EVTDESC_RAID_10
	picture = GFX_evt_bandits
	portrait = event_target:patrol_leader

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		event_target:province_raid_target = {
			owner = {
				create_random_soldier = {
					random_traits = yes
					attributes = {
						martial = 10
					}
					#culture = event_target:raid_target
					#religion = event_target:raid_target
				}
				new_character = {
					save_event_target_as = patrol_leader
					save_event_target_as = combatant_2
					remove_trait = weak
					remove_trait = delicate
					remove_trait = soft
					remove_trait = imbecile
					remove_trait = idiot
					remove_trait = slow
					remove_trait = craven
					random_list = { #assign class
						10 = {
							add_trait = trained_fighter
						}
						5 = {
							add_trait = journeyman_fighter
						}
						2 = {
							add_trait = expert_fighter
						}
						5 = {
							add_trait = trained_paladin
						}
						2 = {
							add_trait = journeyman_paladin
						}
						1 = {
							add_trait = expert_paladin
						}
						5 = {
							add_trait = trained_ranger
						}
						2 = {
							add_trait = journeyman_ranger
						}
						1 = {
							add_trait = expert_ranger
						}
						5 = {
							add_trait = trained_barbarian
						}
						2 = {
							add_trait = journeyman_barbarian
						}
						1 = {
							add_trait = expert_barbarian
						}
					}
					character_event = { id = frxp.1 }
				}
			}
		}
	}

	option = { #Try to sneak
		name = EVTOPTA_RAID_10
		ai_chance = {
			factor = 2
		}
		random_list = {
			40 = {
				modifier = { event_target:raider_leader = { intrigue = 12 } factor = 1.2 }
				modifier = { event_target:raider_leader = { intrigue = 14 } factor = 1.2 }
				modifier = { event_target:raider_leader = { intrigue = 16 } factor = 1.2 }
				modifier = { event_target:raider_leader = { intrigue = 18 } factor = 1.2 }
				modifier = { event_target:raider_leader = { intrigue = 20 } factor = 1.3 }
				modifier = { event_target:raider_leader = { intrigue = 22 } factor = 1.3 }
				modifier = { event_target:raider_leader = { intrigue = 26 } factor = 1.3 }
				modifier = { event_target:raider_leader = { intrigue = 30 } factor = 1.4 }
				modifier = { event_target:raider_leader = { intrigue = 35 } factor = 1.4 }
				modifier = { event_target:raider_leader = { intrigue = 40 } factor = 1.5 }
				modifier = { event_target:raider_leader = { intrigue = 50 } factor = 3 }
				modifier = {
					event_target:raider_leader = {
						OR = {
							z_rogue = yes
							z_shadow = yes
						}
					}
					factor = 5
				}
				custom_tooltip = { text = adv_sneaks_past_tt }
				event_target:patrol_leader = { character_event = { id = ADVN.101 } } #culled
			}
			60 = {
				modifier = { event_target:raider_leader = { intrigue < 8 } factor = 1.2 }
				modifier = { event_target:raider_leader = { intrigue < 4 } factor = 1.3 }
				modifier = { event_target:raider_leader = { intrigue < 2 } factor = 1.4 }
				custom_tooltip = { text = adv_random_monster_tt }
				event_target:raider_leader = {
					save_event_target_as = combatant_1
					character_event = { id = ADVN.100 }
				}
			}
		}
	}
	option = { #Fight
		name = EVTOPTB_RAID_10
		ai_chance = {
			factor = 0
		}
		event_target:raider_leader = {
			save_event_target_as = combatant_1
			if = {
				limit = { trait = craven }
				random = {
					chance = 20
					remove_trait = craven
				}
			}
			character_event = { id = ADVN.100 }
		}
	}
	option = { #Retreat and fail raid
		name = EVTOPTC_RAID_10
		ai_chance = {
			factor = 1
		}
		event_target:patrol_leader = { character_event = { id = ADVN.101 } } #culled
		character_event = { id = RAID.100 } #Retreat from raid
	}

	after = {
		if = {
			limit = {
				event_target:raider_leader = { is_alive = no }
			}
			character_event = { id = RAID.51 } #Failed raid event
		}
	}
}
### Take Courtier Prisoner ###
character_event = {
	id = RAID.11
	desc = EVTDESC_RAID_11
	picture = GFX_evt_prisoner_hf
	portrait = event_target:captured_courtier

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		event_target:province_raid_target = {
			owner = {
				random_courtier = {
					limit = {
						prisoner = no
						is_ruler = no
					}
					save_event_target_as = captured_courtier
				}
			}
		}
	}

	option = {
		name = EVTOPTA_RAID_11
		event_target:captured_courtier = {
			imprison = ROOT
			liege = {
				character_event = { id = RAID.53 }
			}
		}
	}
}
### DnD loot ###
character_event = {
	id = RAID.12
	desc = EVTDESC_RAID_12
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
		NOT = { has_character_flag = raid_dnd_loot }
	}

	option = {
		name = EVTOPTA_RAID_12
		event_target:raider_leader = {
			random_magic_item_effect = yes
			new_artifact = {
				set_creation_date = 1.1.1
			}
		}
		set_character_flag = raid_dnd_loot
	}
}
### Strange Chest Found ###
character_event = {
	id = RAID.13
	desc = EVTDESC_TOG_3301
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_artifact = strange_chest
			has_character_flag = found_chest
			has_character_flag = raided_chest_flag
		}
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	option = {
		name = EVTOPTA_TOG_3301
		custom_tooltip = { text = found_chest }
		add_artifact = strange_chest
		set_character_flag = found_chest
		set_character_flag = raided_chest_flag
	}
}
### Strange Chest Key ###
character_event = {
	id = RAID.14
	desc = EVTDESC_TOG_3302
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	trigger = {
		has_artifact = strange_chest
		has_character_flag = found_chest
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
		NOT = { has_character_flag = raided_chest_flag }
	}

	option = {
		name = EVTOPTA_TOG_3302
		custom_tooltip = {
			text = opens_chest
			hidden_tooltip = {
				random_list = {
					39 = { character_event = { id = TOG.3306 } }
					55 = { character_event = { id = TOG.3307 } }
					1 = { character_event = { id = TOG.3308 } }
					5 = { character_event = { id = TOG.3309 } }
				}
			}
		}
		set_character_flag = raided_chest_flag
	}
}
### Strange Chest Key for relative ###
character_event = {
	id = RAID.15
	desc = EVTDESC_TOG_3303
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	trigger = {
		has_artifact = strange_chest
		NOT = {
			has_character_flag = found_chest
			any_dynasty_member = {
				has_character_flag = found_chest
			}
		}
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
		NOT = { has_character_flag = raided_chest_flag }
	}

	option = {
		name = EVTOPTA_TOG_3303
		custom_tooltip = {
			text = opens_chest
			hidden_tooltip = {
				random_list = {
					39 = { character_event = { id = TOG.3306 } }
					55 = { character_event = { id = TOG.3307 } }
					1 = { character_event = { id = TOG.3308 } }
					5 = { character_event = { id = TOG.3309 } }
				}
			}
		}
		set_character_flag = raided_chest_flag
	}
}
### Gaining Thralls ###
character_event = {
	id = RAID.16
	desc = EVTDESC_RAID_16
	picture = {
		trigger = { is_female = no }
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = {
		trigger = { is_female = yes }
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	#Sacrifice to improve MA.
	#Sell for money.
	#Put to use (stacking capital building modifier/increasing revolt risk)

	option = {
		name = EVTOPTAHF23207
		trigger = {
			OR = {
				has_religion_feature = religion_ritual_sacrifice
				religion = toteteohuan
				has_religion_feature = religion_feature_toteteohuan
				has_religion_feature = religion_feature_orc_evil
			}
			 event_target:province_raid_target = { NOT = { religion = ROOT } } #Only if province is of some other religion.
		}
		hidden_tooltip = { event_target:province_raid_target = { owner = { character_event = { id = HF.23208 } } } } #Notify owner
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			piety = 150
			religion_authority = {
				modifier = great_sacrifice_positive
				years = 150
			}
			hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
			}
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			piety = 100
			religion_authority = {
				modifier = great_sacrifice_positive
				years = 100
			}
			hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 1 }
				bloodthirsty_tiered_traits_effect = yes
			}
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			piety = 50
			religion_authority = {
				modifier = great_sacrifice_positive
				years = 50
			}
			hidden_tooltip = {
				bloodthirsty_tiered_traits_effect = yes
			}
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			piety = 25
			religion_authority = {
				modifier = great_sacrifice_positive
				years = 25
			}
		}
	}
	option = {
		name = EVTOPTBHF23207
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			wealth = 300
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			wealth = 200
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			wealth = 100
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			wealth = 50
		}
	}
	option = {
		name = EVTOPTCHF23207
		trigger = { is_ruler = yes higher_tier_than = BARON }
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			capital_scope = { show_scope_change = no add_lots_thralls_capital_effect = yes }
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 3 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			capital_scope = { show_scope_change = no add_some_thralls_capital_effect = yes }
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 3 } }
			}
			capital_scope = { show_scope_change = no add_few_thralls_capital_effect = yes }
		}
	}
}
### Rounded up cattle ###
character_event = {
	id = RAID.17
	desc = EVTDESC_RAID_17
	picture = {
		trigger = { is_female = no }
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = {
		trigger = { is_female = yes }
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	#Sacrifice to the gods.
	#Sell for money.
	#Share with troops.

	option = {
		name = EVTOPTAHF23209
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			piety = 100
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			piety = 75
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			piety = 50
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			piety = 25
		}
	}
	option = {
		name = EVTOPTBHF23209
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			wealth = 100
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			wealth = 75
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			wealth = 50
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			wealth = 25
		}
	}
	option = {
		name = EVTOPTCHF23209
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			prestige = 150
			add_character_modifier = { modifier = pillagers_morale stacking = yes years = 10 }
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			prestige = 100
			add_character_modifier = { modifier = pillagers_morale stacking = yes years = 5 }
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			prestige = 75
			add_character_modifier = { modifier = pillagers_morale stacking = yes years = 5 }
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			prestige = 50
			add_character_modifier = { modifier = pillagers_morale stacking = yes years = 5 }
		}
	}
}
### Random Monsters ###
character_event = {
	id = RAID.18
	desc = EVTDESC_RAID_18
	picture = GFX_evt_carnage_1
	portrait = event_target:combatant_2

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		hidden_tooltip = {
			create_random_soldier = {
				random_traits = yes
				culture = monster
				religion = monster_pantheon
				trait = creature_monster
				dynasty = none
				employer = d_red_spears
			}
			new_character = {
				save_event_target_as = combatant_2
				character_event = { id = ADVN.101 days = 5 }
				remove_trait = weak
				remove_trait = delicate
				remove_trait = soft
				remove_trait = imbecile
				remove_trait = idiot
				remove_trait = slow
			}
		}
	}
	option = {
		name = EVTOPTA_RAID_18
		event_target:raider_leader = {
			save_event_target_as = combatant_1
			character_event = { id = ADVN.100 }
		}
	}
	after = {
		if = {
			limit = {
				event_target:raider_leader = { is_alive = no }
			}
			character_event = { id = RAID.51} #Failed raid event
		}
	}
}
### Bad Weather ###
character_event = {
	id = RAID.19
	desc = EVTDESC_RAID_19
	picture = GFX_evt_norse_tempest

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	option = {
		name = EVTOPTA_RAID_19
		random_list = {
			40 = {
				modifier = { event_target:raider_leader = { martial = 12 } factor = 1.2 }
				modifier = { event_target:raider_leader = { martial = 14 } factor = 1.2 }
				modifier = { event_target:raider_leader = { martial = 16 } factor = 1.2 }
				modifier = { event_target:raider_leader = { martial = 18 } factor = 1.2 }
				modifier = { event_target:raider_leader = { martial = 20 } factor = 1.3 }
				modifier = { event_target:raider_leader = { martial = 22 } factor = 1.3 }
				modifier = { event_target:raider_leader = { martial = 26 } factor = 1.3 }
				modifier = { event_target:raider_leader = { martial = 30 } factor = 1.4 }
				modifier = { event_target:raider_leader = { martial = 35 } factor = 1.4 }
				modifier = { event_target:raider_leader = { martial = 40 } factor = 1.5 }
				modifier = { event_target:raider_leader = { martial = 50 } factor = 3 }
				modifier = {
					event_target:raider_leader = {
						OR = {
							z_ranger = yes
							z_druid = yes
							z_barbarian = yes
						}
					}
					factor = 5
				}
				custom_tooltip = { text = adv_success_shelter_tt }
			}
			60 = {
				modifier = { event_target:raider_leader = { martial < 8 } factor = 1.2 }
				modifier = { event_target:raider_leader = { martial < 4 } factor = 1.3 }
				modifier = { event_target:raider_leader = { martial < 2 } factor = 1.4 }
				modifier = {
					event_target:raider_leader = {
						OR = {
							trait = expert_ranger
							trait = master_ranger
							trait = renowned_ranger
							trait = legendary_ranger
						}
					}
					factor = 0.5
				}
				random_list = {
					40 = {
						event_target:raider_leader = { give_ill_effect = yes }
					}
					30 = {
						event_target:raider_leader = { give_pneumonic_effect = yes }
					}
					30 = {
						event_target:raider_leader = { death = { death_reason = death_missing } }
					}
				}
			}
		}
	}
	option = { #Retreat and fail raid
		name = EVTOPTC_RAID_10
		character_event = { id = RAID.100 } #Retreat from raid
	}

	after = {
		if = {
			limit = {
				event_target:raider_leader = { is_alive = no }
			}
			character_event = { id = RAID.51 } #Failed raid event
		}
	}
}
### Mercenary Thugs ###
character_event = {
	id = RAID.20
	desc = EVTDESC_RAID_20
	picture = GFX_evt_bandits
	portrait = event_target:merc_boss

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		event_target:province_raid_target = {
			owner = {
				create_random_soldier = {
					random_traits = yes
					attributes = {
						martial = 10
					}
				}
				new_character = {
					save_event_target_as = merc_boss
					save_event_target_as = combatant_2
					remove_trait = weak
					remove_trait = delicate
					remove_trait = soft
					remove_trait = imbecile
					remove_trait = idiot
					remove_trait = slow
					remove_trait = craven
					remove_trait = kind
					random_list = { #assign class
						10 = {
							add_trait = trained_fighter
						}
						5 = {
							add_trait = journeyman_fighter
						}
						2 = {
							add_trait = expert_fighter
						}
						5 = {
							add_trait = trained_ranger
						}
						2 = {
							add_trait = journeyman_ranger
						}
						1 = {
							add_trait = expert_ranger
						}
						5 = {
							add_trait = trained_barbarian
						}
						2 = {
							add_trait = journeyman_barbarian
						}
						1 = {
							add_trait = expert_barbarian
						}
					}
					character_event = { id = frxp.1 }
				}
			}
		}
	}

	option = { #Try to reason
		name = EVTOPTA_RAID_20
		random_list = {
			40 = {
				modifier = { event_target:raider_leader = { diplomacy = 12 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 14 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 16 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 18 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 20 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 22 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 26 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 30 } factor = 1.4 }
				modifier = { event_target:raider_leader = { diplomacy = 35 } factor = 1.4 }
				modifier = { event_target:raider_leader = { diplomacy = 40 } factor = 1.5 }
				modifier = { event_target:raider_leader = { diplomacy = 50 } factor = 3 }
				modifier = {
					event_target:raider_leader = {
						z_fighter = yes
					}
					factor = 3
				}
				event_target:merc_boss = { character_event = { id = ADVN.101 } } #culled
			}
			60 = {
				modifier = { event_target:raider_leader = { diplomacy < 8 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy < 4 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy < 2 } factor = 1.4 }
				custom_tooltip = { text = adv_a_battle_tt }
				event_target:raider_leader = {
					save_event_target_as = combatant_1
					character_event = { id = ADVN.100 }
				}
			}
		}
	}
	option = { #Fight
		name = EVTOPTB_RAID_20
		ai_chance = {
			factor = 0
		}
		event_target:raider_leader = {
			save_event_target_as = combatant_1
			character_event = { id = ADVN.100 }
		}
	}

	after = {
		if = {
			limit = {
				event_target:raider_leader = { is_alive = no }
			}
			character_event = { id = RAID.51 } #Failed raid event
		}
	}
}
### Gain Cruel / Lose Kind ###
character_event = {
	id = RAID.21
	is_triggered_only = yes
	desc = EVTDESC_RAID_21
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_war

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			is_alive = yes
			always = yes
			NOT = { trait = cruel }
		}
	}

	option = {
		name = EVTOPTA_RAID_21
		event_target:raider_leader = {
			if = {
				limit = {
					NOT = { trait = kind }
				}
				add_trait = cruel
			}
			else_if = {
				limit = {
					trait = kind
				}
				remove_trait = kind
				add_trait = stressed
			}
		}
	}
}
### Gain Brave / Lose Coward ###
character_event = {
	id = RAID.22
	is_triggered_only = yes
	desc = EVTDESC_RAID_22
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_war

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			is_alive = yes
			always = yes
			NOT = { trait = brave }
		}
	}

	option = {
		name = EVTOPTA_RAID_22
		event_target:raider_leader = {
			if = {
				limit = {
					NOT = { trait = craven }
				}
				add_trait = brave
			}
			else_if = {
				limit = {
					trait = craven
				}
				remove_trait = craven
				add_trait = stressed
			}
		}
	}
}
### New Rival ###
character_event = {
	id = RAID.23
	desc = EVTDESC_RAID_23
	picture = GFX_evt_rival_rulers
	portrait = event_target:new_rival_courtier

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		event_target:province_raid_target = {
			owner = {
				random_courtier = {
					limit = {
						NOT = { is_rival = event_target:raider_leader }
						is_adult = yes
					}
					save_event_target_as = new_rival_courtier
				}
			}
		}
	}

	option = {
		name = EVTOPTA_RAID_23
		event_target:new_rival_courtier = {
			add_rival = event_target:raider_leader
		}
	}
}
### New Comrade ###
character_event = {
	id = RAID.24
	desc = EVTDESC_RAID_24
	picture = GFX_evt_camaraderie
	portrait = event_target:new_friend_courtier

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	immediate = {
		ROOT = {
			create_random_soldier = {
				random_traits = yes
				attributes = {
					martial = 10
				}
			}
			new_character = {
				save_event_target_as = new_friend_courtier
				remove_trait = weak
				remove_trait = delicate
				remove_trait = soft
				remove_trait = imbecile
				remove_trait = idiot
				remove_trait = slow
				remove_trait = craven
				remove_trait = kind
				random_list = { #assign class
					10 = {
						add_trait = trained_fighter
					}
					5 = {
						add_trait = journeyman_fighter
					}
					2 = {
						add_trait = expert_fighter
					}
					5 = {
						add_trait = trained_ranger
					}
					2 = {
						add_trait = journeyman_ranger
					}
					1 = {
						add_trait = expert_ranger
					}
					5 = {
						add_trait = trained_barbarian
					}
					2 = {
						add_trait = journeyman_barbarian
					}
					1 = {
						add_trait = expert_barbarian
					}
				}
				character_event = { id = frxp.1 }
			}
		}
	}

	option = {
		name = EVTOPTA_RAID_24
		event_target:new_friend_courtier = {
			add_friend = event_target:raider_leader
		}
		if = {
			limit = { trait = stressed }
			random = {
				chance = 30
				remove_trait = stressed
			}
		}
	}
	option = {
		name = EVTOPTB_RAID_24
		prestige = 10
		capital_scope = {
			add_province_modifier = {
				name = war_knowledge
				years = 1
			}
		}
		if = {
			limit = {
				trait = slothful
				NOT = { trait = stressed }
			}
			random = {
				chance = 30
				remove_trait = slothful
			}
			random = {
				chance = 30
				add_trait = stressed
			}
		}
		hidden_effect = { event_target:new_friend_courtier = { leave_court_and_die_effect = yes } }
	}
}
### Raiders Squabbling ###
character_event = {
	id = RAID.25
	desc = EVTDESC_RAID_25
	picture = GFX_evt_duel_scene

	only_playable = yes

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	option = { #Try to reason
		name = EVTOPTA_RAID_25
		random_list = {
			50 = {
				modifier = { event_target:raider_leader = { diplomacy = 12 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 14 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 16 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 18 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy = 20 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 22 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 26 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy = 30 } factor = 1.4 }
				modifier = { event_target:raider_leader = { diplomacy = 35 } factor = 1.4 }
				modifier = { event_target:raider_leader = { diplomacy = 40 } factor = 1.5 }
				modifier = { event_target:raider_leader = { diplomacy = 50 } factor = 3 }
				custom_tooltip = { text = raiders_cowed_tt }
				prestige = 50
			}
			50 = {
				modifier = { event_target:raider_leader = { diplomacy < 8 } factor = 1.2 }
				modifier = { event_target:raider_leader = { diplomacy < 4 } factor = 1.3 }
				modifier = { event_target:raider_leader = { diplomacy < 2 } factor = 1.4 }
				custom_tooltip = { text = raid_failed_tt }
				character_event = { id = RAID.100 } #Retreat from raid
			}
		}
	}
	option = { #Teach them a lesson
		name = EVTOPTB_RAID_25
		random_list = {
			50 = {
				modifier = { event_target:raider_leader = { combat_rating = 40 } factor = 1.2 }
				modifier = { event_target:raider_leader = { combat_rating = 50 } factor = 1.2 }
				modifier = { event_target:raider_leader = { combat_rating = 60 } factor = 1.2 }
				modifier = { event_target:raider_leader = { combat_rating = 70 } factor = 1.3 }
				modifier = { event_target:raider_leader = { combat_rating = 80 } factor = 1.3 }
				modifier = { event_target:raider_leader = { combat_rating = 90 } factor = 1.3 }
				modifier = { event_target:raider_leader = { combat_rating = 100 } factor = 1.3 }
				modifier = { event_target:raider_leader = { combat_rating = 120 } factor = 1.4 }
				modifier = { event_target:raider_leader = { combat_rating = 140 } factor = 1.4 }
				modifier = { event_target:raider_leader = { combat_rating = 160 } factor = 1.5 }
				modifier = { event_target:raider_leader = { combat_rating = 200 } factor = 3 }
				custom_tooltip = { text = raiders_cowed_tt }
				prestige = 100
			}
			50 = {
				modifier = { event_target:raider_leader = { combat_rating < 30 } factor = 1.2 }
				modifier = { event_target:raider_leader = { combat_rating < 15 } factor = 1.3 }
				modifier = { event_target:raider_leader = { combat_rating < 0 } factor = 1.4 }
				custom_tooltip = { text = raid_failed_tt }
				character_event = { id = RAID.100 } #Retreat from raid
				random_list = {
					80 = {
						add_character_modifier = {
							name = beaten_up
							days = 180
						}
					}
					15 = {
						add_trait = wounded
					}
					5 = {
						add_maimed_trait_effect = yes
					}
				}
			}
		}
	}
}
### Influx of Loot ###
character_event = {
	id = RAID.26
	desc = TOG.3404.d
	picture = GFX_evt_northlander_raid
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		NOT = {
			capital_scope = {
				has_province_modifier = loot_prosperity_boost
			}
		}
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	option = {
		name = EXCELLENT
		capital_scope = {
			add_province_modifier = {
				name = loot_prosperity_boost
				duration = 1825
			}
			hidden_tooltip = {
				change_variable = { which = prosperity_value value = 12 }
			}
		}
	}
}

#Raid Succeed
character_event = {
	id = RAID.50
	desc = EVTDESC_RAID_50
	picture = GFX_evt_vikings_arriving_oldgods

	is_triggered_only = yes

	trigger = {
		has_character_flag = going_raiding
		event_target:raider_leader = {
			always = yes
			is_alive = yes
		}
	}

	option = {
		name = EVTOPTA_RAID_50
		clr_character_flag = going_raiding
		clr_character_flag = raid_dnd_loot
		clr_character_flag = raided_chest_flag
		if = {
			limit = {
				has_quest = quest_go_raiding
				society_member_of = elder_concord
			}
			character_event = { id = ELDC.1008 days = 1 }
		}
		else_if = {
			limit = {
				has_quest = quest_go_raiding
				is_member_of_any_warrior_lodge_trigger = yes
			}
			character_event = { id = HF.25514 days = 1 }
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 6 }
			}
			wealth = 150
			prestige = 150
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 4 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
			}
			wealth = 125
			prestige = 125
		}
		if = {
			limit = {
				event_target:province_raid_target = { num_of_settlements = 2 }
				event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
			}
			wealth = 100
			prestige = 100
		}
		if = {
			limit = {
				event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
			}
			wealth = 75
			prestige = 75
		}
		event_target:raider_leader = {
			if = {
				limit = {
					event_target:province_raid_target = { num_of_settlements = 6 }
				}
				wealth = 60
				prestige = 60
				hidden_tooltip = {
					change_variable = { which = viking_raids value = 12 }
				}
			}
			if = {
				limit = {
					event_target:province_raid_target = { num_of_settlements = 4 }
					event_target:province_raid_target = { NOT = { num_of_settlements = 6 } }
				}
				wealth = 50
				prestige = 50
				hidden_tooltip = {
					change_variable = { which = viking_raids value = 9 }
				}
			}
			if = {
				limit = {
					event_target:province_raid_target = { num_of_settlements = 2 }
					event_target:province_raid_target = { NOT = { num_of_settlements = 4 } }
				}
				wealth = 40
				prestige = 40
				hidden_tooltip = {
					change_variable = { which = viking_raids value = 5 }
				}
			}
			if = {
				limit = {
					event_target:province_raid_target = { NOT = { num_of_settlements = 2 } }
				}
				wealth = 30
				prestige = 30
				hidden_tooltip = {
					change_variable = { which = viking_raids value = 2 }
				}
			}
			remove_trait = travelling
			character_event = { id = TGF.3320 } #viking/pirate trait & viking_raids variable set
			character_event = { id = TGF.3321 } #ravager trait
			character_event = { id = TGF.3322 } #seaking trait
			character_event = { id = HF.23212 } #Earned Seaking Bloodline
		}
		event_target:province_raid_target = {
			owner = {
				character_event = { id = RAID.52 } #owner of looted province is warned
			}
		}
		event_target:raid_target = {
			clr_character_flag = being_raided_flag
		}
	}
}
#Failed Raid
character_event = {
	id = RAID.51
	desc = EVTDESC_RAID_51
	picture = GFX_evt_died_battle

	is_triggered_only = yes

	trigger = {
		event_target:raider_leader = { is_alive = no }
	}

	option = {
		name = EVTOPTA_RAID_51
		event_target:raider_leader = {
			remove_trait = travelling
		}
		hidden_tooltip = {
			clr_character_flag = going_raiding
			clr_character_flag = raid_dnd_loot
			clr_character_flag = raided_chest_flag
			event_target:raid_target = {
				clr_character_flag = being_raided_flag
			}
		}
		event_target:province_raid_target = {
			owner = {
				character_event = { id = RAID.54 } #owner of looted province is warned
			}
		}
	}
}
#Owner of looted province is warned
character_event = {
	id = RAID.52
	desc = EVTDESC_RAID_52
	picture = GFX_evt_vikings_arriving_oldgods
	portrait = event_target:raider_leader

	is_triggered_only = yes

	option = {
		name = EVTOPTA_RAID_52
		event_target:province_raid_target = {
			add_province_modifier = {
				name = raid_looted_mod
				duration = 1825
			}
		}
	}
}
#Liege of captured prisoner is warned
character_event = {
	id = RAID.53
	desc = EVTDESC_RAID_53
	picture = GFX_evt_prisoner_hf
	portrait = event_target:captured_courtier

	is_triggered_only = yes

	option = {
		name = EVTOPTA_RAID_53
	}
}
#Owner of target province is warned raiders are leaving
character_event = {
	id = RAID.54
	desc = EVTDESC_RAID_54
	picture = GFX_evt_battle
	portrait = event_target:raider_leader

	is_triggered_only = yes

	option = {
		name = EVTOPTA_RAID_54
		if = {
			limit = {
				event_target:patrol_leader = { is_alive = yes }
			}
			event_target:patrol_leader = {
				random_magic_item_effect = yes
				new_artifact = {
					set_creation_date = 1.1.1
				}
				wealth = 50
				prestige = 100
			}
		}
	}
}

###Maint Events###

#Retreat from raid
character_event = {
	id = RAID.100
	desc = EVTDESC_RAID_100
	picture = GFX_evt_died_battle

	is_triggered_only = yes

	option = {
		name = EVTOPTA_RAID_100
		event_target:raider_leader = {
			remove_trait = travelling
		}
		hidden_tooltip = {
			clr_character_flag = going_raiding
			clr_character_flag = raid_dnd_loot
			clr_character_flag = raided_chest_flag
			event_target:raid_target = {
				clr_character_flag = being_raided_flag
			}
		}
		event_target:province_raid_target = {
			owner = {
				character_event = { id = RAID.54 } #owner of looted province is warned
			}
		}
	}
}
#Emergency cleanup
character_event = {
	id = RAID.101
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = raid_dnd_loot
		clr_character_flag = raided_chest_flag
		event_target:raider_leader = {
			remove_trait = travelling
		}
		event_target:raid_target = {
			clr_character_flag = being_raided_flag
		}
	}
}

#WIP
#society raiding missions compatibility
