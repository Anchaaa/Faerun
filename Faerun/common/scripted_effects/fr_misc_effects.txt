barb_legend_raise_tier = {
	if = {
		limit = {
			has_character_modifier = barbarian_legend_0
		}
		add_character_modifier = {
			name = barbarian_legend_1
			duration = -1
		}
		remove_character_modifier = barbarian_legend_0
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_1
		}
		add_character_modifier = {
			name = barbarian_legend_2
			duration = -1
		}
		remove_character_modifier = barbarian_legend_1
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_2
		}
		add_character_modifier = {
			name = barbarian_legend_3
			duration = -1
		}
		remove_character_modifier = barbarian_legend_2
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_3
		}
		add_character_modifier = {
			name = barbarian_legend_4
			duration = -1
		}
		remove_character_modifier = barbarian_legend_3
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_4
		}
		add_character_modifier = {
			name = barbarian_legend_5
			duration = -1
		}
		remove_character_modifier = barbarian_legend_4
	}
}

barb_legend_lower_tier = {
	if = {
		limit = {
			has_character_modifier = barbarian_legend_0
		}
		set_character_flag = barb_legend_fail
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_1
		}
		add_character_modifier = {
			name = barbarian_legend_0
			duration = -1
		}
		remove_character_modifier = barbarian_legend_1
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_2
		}
		add_character_modifier = {
			name = barbarian_legend_1
			duration = -1
		}
		remove_character_modifier = barbarian_legend_2
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_3
		}
		add_character_modifier = {
			name = barbarian_legend_2
			duration = -1
		}
		remove_character_modifier = barbarian_legend_3
	}
	else_if = {
		limit = {
			has_character_modifier = barbarian_legend_4
		}
		add_character_modifier = {
			name = barbarian_legend_3
			duration = -1
		}
		remove_character_modifier = barbarian_legend_4
	}
}

small_psi_stress = {
	if = {
		limit = {
			has_character_flag = recentpsi
			NOT = { # this means that block fires if the flag has been on for less than the determined time
				had_character_flag = {
					flag = recentpsi
					months = 2 # might bump to 3
				}
			}
		}
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		random_list = {
			1 = {
				set_character_flag = psiupgrade
				med_psi_stress = yes
			}
			3 = {
				if = {
					limit = {
						NOR = {
							has_character_modifier = small_psi_stress
							has_character_modifier = medium_psi_stress
							has_character_modifier = big_psi_stress
						}
					}
					add_character_modifier = {
						name = small_psi_stress
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_character_modifier = big_psi_stress
					}
					random = {
						chance = 20
						modifier = {
							factor = 0.8
							trait = journeyman_psion
						}
						modifier = {
							factor = 0.75
							trait = expert_psion
						}
						modifier = {
							factor = 0.7
							trait = master_psion
						}
						modifier = {
							factor = 0.6
							trait = renowned_psion
						}
						modifier = {
							factor = 0.5
							trait = legendary_psion
						}
						remove_character_modifier = big_psi_stress
						add_trait = stressed
					}
				}
				else_if = {
					limit = {
						has_character_modifier = medium_psi_stress
					}
					random = {
						chance = 35
						modifier = {
							factor = 0.8
							trait = journeyman_psion
						}
						modifier = {
							factor = 0.75
							trait = expert_psion
						}
						modifier = {
							factor = 0.7
							trait = master_psion
						}
						modifier = {
							factor = 0.6
							trait = renowned_psion
						}
						modifier = {
							factor = 0.5
							trait = legendary_psion
						}
						remove_character_modifier = medium_psi_stress
						add_character_modifier = {
							name = big_psi_stress
							duration = -1
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = small_psi_stress
					}
					random = {
						chance = 50
						modifier = {
							factor = 0.8
							trait = journeyman_psion
						}
						modifier = {
							factor = 0.75
							trait = expert_psion
						}
						modifier = {
							factor = 0.7
							trait = master_psion
						}
						modifier = {
							factor = 0.6
							trait = renowned_psion
						}
						modifier = {
							factor = 0.5
							trait = legendary_psion
						}
						remove_character_modifier = small_psi_stress
						add_character_modifier = {
							name = medium_psi_stress
							duration = -1
						}
					}
				}
			}
		}
	}
	else = {
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		if = {
			limit = {
				NOR = {
					has_character_modifier = small_psi_stress
					has_character_modifier = medium_psi_stress
					has_character_modifier = big_psi_stress
				}
			}
			add_character_modifier = {
				name = small_psi_stress
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_character_modifier = big_psi_stress
			}
			random = {
				chance = 20
				modifier = {
					factor = 0.8
					trait = journeyman_psion
				}
				modifier = {
					factor = 0.75
					trait = expert_psion
				}
				modifier = {
					factor = 0.7
					trait = master_psion
				}
				modifier = {
					factor = 0.6
					trait = renowned_psion
				}
				modifier = {
					factor = 0.5
					trait = legendary_psion
				}
				remove_character_modifier = big_psi_stress
				add_trait = stressed
			}
		}
		else_if = {
			limit = {
				has_character_modifier = medium_psi_stress
			}
			random = {
				chance = 35
				modifier = {
					factor = 0.8
					trait = journeyman_psion
				}
				modifier = {
					factor = 0.75
					trait = expert_psion
				}
				modifier = {
					factor = 0.7
					trait = master_psion
				}
				modifier = {
					factor = 0.6
					trait = renowned_psion
				}
				modifier = {
					factor = 0.5
					trait = legendary_psion
				}
				remove_character_modifier = medium_psi_stress
				add_character_modifier = {
					name = big_psi_stress
					duration = -1
				}
			}
		}
		else_if = {
			limit = {
				has_character_modifier = small_psi_stress
			}
			random = {
				chance = 50
				modifier = {
					factor = 0.8
					trait = journeyman_psion
				}
				modifier = {
					factor = 0.75
					trait = expert_psion
				}
				modifier = {
					factor = 0.7
					trait = master_psion
				}
				modifier = {
					factor = 0.6
					trait = renowned_psion
				}
				modifier = {
					factor = 0.5
					trait = legendary_psion
				}
				remove_character_modifier = small_psi_stress
				add_character_modifier = {
					name = medium_psi_stress
					duration = -1
				}
			}
		}
	}
}

med_psi_stress = {
	if = {
		limit = {
			NOT = { has_character_flag = psiupgrade }
			has_character_flag = recentpsi
			NOT = { # this means that block fires if the flag has been on for less than the determined time
				had_character_flag = {
					flag = recentpsi
					months = 2 # might bump to 3
				}
			}
		}
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		random_list = {
			1 = {
				big_psi_stress = yes
			}
			3 = {
				if = {
					limit = {
						NOR = {
							has_character_modifier = small_psi_stress
							has_character_modifier = medium_psi_stress
							has_character_modifier = big_psi_stress
						}
					}
					add_character_modifier = {
						name = medium_psi_stress
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_character_modifier = big_psi_stress
					}
					random = {
						chance = 70
						modifier = {
							factor = 0.8
							trait = journeyman_psion
						}
						modifier = {
							factor = 0.75
							trait = expert_psion
						}
						modifier = {
							factor = 0.7
							trait = master_psion
						}
						modifier = {
							factor = 0.6
							trait = renowned_psion
						}
						modifier = {
							factor = 0.5
							trait = legendary_psion
						}
						remove_character_modifier = big_psi_stress
						add_trait = stressed
					}
				}
				else_if = {
					limit = {
						has_character_modifier = medium_psi_stress
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0.8
								trait = journeyman_psion
							}
							modifier = {
								factor = 0.75
								trait = expert_psion
							}
							modifier = {
								factor = 0.7
								trait = master_psion
							}
							modifier = {
								factor = 0.6
								trait = renowned_psion
							}
							modifier = {
								factor = 0.5
								trait = legendary_psion
							}
							remove_character_modifier = medium_psi_stress
						add_character_modifier = {
							name = big_psi_stress
							duration = -1
						}
						}
						2 = {
							
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = small_psi_stress
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0.8
								trait = journeyman_psion
							}
							modifier = {
								factor = 0.75
								trait = expert_psion
							}
							modifier = {
								factor = 0.7
								trait = master_psion
							}
							modifier = {
								factor = 0.6
								trait = renowned_psion
							}
							modifier = {
								factor = 0.5
								trait = legendary_psion
							}
							remove_character_modifier = small_psi_stress
							add_character_modifier = {
								name = big_psi_stress
								duration = -1
							}
						}
						10 = {
							remove_character_modifier = small_psi_stress
							add_character_modifier = {
								name = medium_psi_stress
								duration = -1
							}
						}
					}
				}
			}
		}
	}
	else = {
		clr_character_flag = psiupgrade
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		if = {
			limit = {
				NOR = {
					has_character_modifier = small_psi_stress
					has_character_modifier = medium_psi_stress
					has_character_modifier = big_psi_stress
				}
			}
			add_character_modifier = {
				name = medium_psi_stress
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_character_modifier = big_psi_stress
			}
			random = {
				chance = 70
				modifier = {
					factor = 0.8
					trait = journeyman_psion
				}
				modifier = {
					factor = 0.75
					trait = expert_psion
				}
				modifier = {
					factor = 0.7
					trait = master_psion
				}
				modifier = {
					factor = 0.6
					trait = renowned_psion
				}
				modifier = {
					factor = 0.5
					trait = legendary_psion
				}
				remove_character_modifier = big_psi_stress
				add_trait = stressed
			}
		}
		else_if = {
			limit = {
				has_character_modifier = medium_psi_stress
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0.8
						trait = journeyman_psion
					}
					modifier = {
						factor = 0.75
						trait = expert_psion
					}
					modifier = {
						factor = 0.7
						trait = master_psion
					}
					modifier = {
						factor = 0.6
						trait = renowned_psion
					}
					modifier = {
						factor = 0.5
						trait = legendary_psion
					}
					remove_character_modifier = medium_psi_stress
				add_character_modifier = {
					name = big_psi_stress
					duration = -1
				}
				}
				2 = {
					
				}
			}
		}
		else_if = {
			limit = {
				has_character_modifier = small_psi_stress
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0.8
						trait = journeyman_psion
					}
					modifier = {
						factor = 0.75
						trait = expert_psion
					}
					modifier = {
						factor = 0.7
						trait = master_psion
					}
					modifier = {
						factor = 0.6
						trait = renowned_psion
					}
					modifier = {
						factor = 0.5
						trait = legendary_psion
					}
					remove_character_modifier = small_psi_stress
					add_character_modifier = {
						name = big_psi_stress
						duration = -1
					}
				}
				10 = {
					remove_character_modifier = small_psi_stress
					add_character_modifier = {
						name = medium_psi_stress
						duration = -1
					}
				}
			}
		}
	}
}

big_psi_stress = {
	if = {
		limit = {
			NOT = { has_character_flag = psiupgrade }
			has_character_flag = recentpsi
			NOT = { # this means that block fires if the flag has been on for less than the determined time
				had_character_flag = {
					flag = recentpsi
					months = 2 # might bump to 3
				}
			}
		}
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		random_list = {
			1 = {
				remove_character_modifier = big_psi_stress
				add_trait = stressed
			}
			3 = {
				if = {
					limit = {
						NOR = {
							has_character_modifier = small_psi_stress
							has_character_modifier = medium_psi_stress
							has_character_modifier = big_psi_stress
						}
					}
					add_character_modifier = {
						name = big_psi_stress
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_character_modifier = big_psi_stress
					}
					remove_character_modifier = big_psi_stress
					add_trait = stressed
				}
				else_if = {
					limit = {
						has_character_modifier = medium_psi_stress
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0.8
								trait = journeyman_psion
							}
							modifier = {
								factor = 0.75
								trait = expert_psion
							}
							modifier = {
								factor = 0.7
								trait = master_psion
							}
							modifier = {
								factor = 0.6
								trait = renowned_psion
							}
							modifier = {
								factor = 0.5
								trait = legendary_psion
							}
							remove_character_modifier = medium_psi_stress
							add_trait = stressed
						}
						2 = {
							remove_character_modifier = medium_psi_stress
							add_character_modifier = {
								name = big_psi_stress
								duration = -1
							}
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = small_psi_stress
					}
					random_list = {
						33 = {
							modifier = {
								factor = 0.8
								trait = journeyman_psion
							}
							modifier = {
								factor = 0.75
								trait = expert_psion
							}
							modifier = {
								factor = 0.7
								trait = master_psion
							}
							modifier = {
								factor = 0.6
								trait = renowned_psion
							}
							modifier = {
								factor = 0.5
								trait = legendary_psion
							}
							remove_character_modifier = small_psi_stress
							add_trait = stressed
						}
						100 = {
							remove_character_modifier = small_psi_stress
							add_character_modifier = {
								name = big_psi_stress
								duration = -1
							}
						}
					}
				}
			}
		}
	}
	else = {
		clr_character_flag = psiupgrade
		clr_character_flag = recentpsi
		set_character_flag = recentpsi
		if = {
			limit = {
				NOR = {
					has_character_modifier = small_psi_stress
					has_character_modifier = medium_psi_stress
					has_character_modifier = big_psi_stress
				}
			}
			add_character_modifier = {
				name = big_psi_stress
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_character_modifier = big_psi_stress
			}
			remove_character_modifier = big_psi_stress
			add_trait = stressed
		}
		else_if = {
			limit = {
				has_character_modifier = medium_psi_stress
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0.8
						trait = journeyman_psion
					}
					modifier = {
						factor = 0.75
						trait = expert_psion
					}
					modifier = {
						factor = 0.7
						trait = master_psion
					}
					modifier = {
						factor = 0.6
						trait = renowned_psion
					}
					modifier = {
						factor = 0.5
						trait = legendary_psion
					}
					remove_character_modifier = medium_psi_stress
					add_trait = stressed
				}
				2 = {
					remove_character_modifier = medium_psi_stress
					add_character_modifier = {
						name = big_psi_stress
						duration = -1
					}
				}
			}
		}
		else_if = {
			limit = {
				has_character_modifier = small_psi_stress
			}
			random_list = {
				33 = {
					modifier = {
						factor = 0.8
						trait = journeyman_psion
					}
					modifier = {
						factor = 0.75
						trait = expert_psion
					}
					modifier = {
						factor = 0.7
						trait = master_psion
					}
					modifier = {
						factor = 0.6
						trait = renowned_psion
					}
					modifier = {
						factor = 0.5
						trait = legendary_psion
					}
					remove_character_modifier = small_psi_stress
					add_trait = stressed
				}
				100 = {
					remove_character_modifier = small_psi_stress
					add_character_modifier = {
						name = big_psi_stress
						duration = -1
					}
				}
			}
		}
	}
}