#This whole file is dedicated to this one effect

#It *has* to be within a mother_even_if_dead or father_even_if_dead scope.

#The point of it is to give a child (PREV) the graphical culture of their parent.

#Can't use graphical_culture = PREV because it actually uses the graphics of the actual culture (rather than the ethnicity) of the parent. So a Hadhar-cultured dwarf parent who would be targeted by graphical_culture = PREV would result in a human-portrait child. Which is a no-no.

tb_graph_culture_racial = {
	gfx_culture_scope = {
		PREVPREV = {
			set_graphical_culture = PREV
		}
	}
}

# Turn a character undead and change to the matching undead graphical culture.
turn_undead_effect = {
	add_trait = undead

	hidden_effect = {
		if = {
			limit = {
				OR = {
					trait = creature_human
					trait = creature_aasimar
					trait = creature_tiefling
					trait = creature_half_giant
					trait = creature_genasi
					trait = creature_gith
					trait = creature_gnome
					trait = creature_halfling
					trait = creature_centaur
					trait = creature_wemic
				}
			}
			set_graphical_culture = undead_human
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_goblin
					trait = creature_hobgoblin
					trait = creature_bugbear
					trait = creature_gnoll
					trait = creature_half_gnoll
					trait = creature_orc
					trait = creature_half_orc
					trait = creature_tanarukk
					trait = creature_kobold
					trait = creature_lizardfolk
					trait = creature_saurial
					trait = creature_sahuagin
					trait = creature_malenti
					trait = creature_dragonborn
				}
			}
			set_graphical_culture = undead_creature
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_malison
					trait = creature_pureblood
				}
			}
			set_graphical_culture = cambion
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_dwarf
					trait = creature_half_dwarf
				}
			}
			set_graphical_culture = dwarfvampire
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_elf
					trait = creature_sea_elf
					trait = creature_eladrin
					trait = creature_feyri
					trait = creature_drow
					trait = creature_half_elf
				}
			}
			set_graphical_culture = undeadelf
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_naga
					trait = creature_abomination
					trait = creature_sarrukh
				}
			}
			set_graphical_culture = bone_naga
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_ogre
					trait = creature_half_ogre
					trait = creature_ogrillon
				}
			}
			set_graphical_culture = undeadogre
		}
		else_if = {
			limit = {
				trait = creature_dragon
			}
			set_graphical_culture = dracolich
		}
	}
}

# Turn a character into a lich and change to the matching undead graphical culture.
turn_lich_effect = {
	add_artifact = lich_phylactery_artf

	hidden_effect = {
		if = {
			limit = {
				NOR = {
					trait = lich
					trait = archlich
					trait = lich_baelnorn
				} 
			}
			add_trait = lich
		}

		if = {
			limit = {
				OR = {
					trait = creature_human
					trait = creature_elf
					trait = creature_eladrin
					trait = creature_feyri
					trait = creature_drow
					trait = creature_half_elf
					trait = creature_aasimar
					trait = creature_tiefling
					trait = creature_half_giant
					trait = creature_genasi
					trait = creature_gith
					trait = creature_gnome
					trait = creature_halfling
					trait = creature_centaur
					trait = creature_wemic
				}
			}
			set_graphical_culture = lich
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_goblin
					trait = creature_hobgoblin
					trait = creature_bugbear
					trait = creature_gnoll
					trait = creature_half_gnoll
					trait = creature_orc
					trait = creature_half_orc
					trait = creature_tanarukk
					trait = creature_kobold
					trait = creature_lizardfolk
					trait = creature_saurial
					trait = creature_sahuagin
					trait = creature_malenti
					trait = creature_dragonborn
				}
			}
			set_graphical_culture = undead_creature
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_malison
					trait = creature_pureblood
				}
			}
			set_graphical_culture = cambion
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_dwarf
					trait = creature_half_dwarf
				}
			}
			set_graphical_culture = dwarfvampire
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_naga
					trait = creature_abomination
					trait = creature_sarrukh
				}
			}
			set_graphical_culture = bone_naga
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_ogre
					trait = creature_half_ogre
					trait = creature_ogrillon
				}
			}
			set_graphical_culture = undeadogre
		}
		else_if = {
			limit = {
				trait = creature_dragon
			}
			set_graphical_culture = dracolich
		}
	}
}

# Turn a character into a vampire and change to the matching undead graphical culture.
turn_vampire_effect = {
	hidden_effect = {
		if = {
			limit = {
				NOR = {
					trait = vampire
					trait = vampire_spawn
				}
			}
			add_trait = vampire
		}

		if = {
			limit = {
				OR = {
					trait = creature_human
					trait = creature_aasimar
					trait = creature_tiefling
					trait = creature_half_giant
					trait = creature_genasi
					trait = creature_gith
					trait = creature_gnome
					trait = creature_halfling
					trait = creature_centaur
					trait = creature_wemic
				}
			}
			set_graphical_culture = vampire
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_malison
					trait = creature_pureblood
				}
			}
			set_graphical_culture = cambion
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_dwarf
					trait = creature_half_dwarf
				}
			}
			set_graphical_culture = dwarfvampire
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_elf
					trait = creature_sea_elf
					trait = creature_eladrin
					trait = creature_feyri
					trait = creature_drow
					trait = creature_half_elf
				}
			}
			set_graphical_culture = undeadelf
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_naga
					trait = creature_abomination
					trait = creature_sarrukh
				}
			}
			set_graphical_culture = bone_naga
		}
		else_if = {
			limit = {
				OR = {
					trait = creature_ogre
					trait = creature_half_ogre
					trait = creature_ogrillon
				}
			}
			set_graphical_culture = undeadogre
		}
	}
}
