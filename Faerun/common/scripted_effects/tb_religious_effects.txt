spawn_good_helm_commander_effect = {
	if = {
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = yes
			attributes = {
				diplomacy = 2
				learning = 2
				stewardship = 2
				intrigue = 2
				martial = 8
			}
		}
	}
	if = {
		limit = { has_religion_feature = religion_patriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = no
			attributes = {
				diplomacy = 2
				learning = 2
				stewardship = 2
				intrigue = 2
				martial = 8
			}
		}
	}
	if = {
		limit = {
			AND = {
				NOT = { has_religion_feature = religion_matriarchal }
				NOT = { has_religion_feature = religion_patriarchal }
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = 50
			attributes = {
				diplomacy = 2
				learning = 2
				stewardship = 2
				intrigue = 2
				martial = 8
			}
		}
	}
	new_character = {
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull

		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		add_trait = patron_helm
		
		random_list = {
			1 = {
				add_Trait = defensive_leader
			}
			1 = {
				add_trait = organizer
			}
		}

		random_list = { # Flavor Randomization
			35 = {
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = {
				add_trait = shrewd
			}
			3 = {
				add_trait = giant
			}
		}
		random_list = { # Class assignment
			20 = {
				# No class
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = fighter
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = trained_fighter
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = paladin
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = trained_paladin
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_great_helm_commander_effect = {
	if = {
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = yes
			attributes = {
				diplomacy = 3
				learning = 3
				stewardship = 3
				intrigue = 3
				martial = 9
			}
		}
	}
	if = {
		limit = { has_religion_feature = religion_patriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = no
			attributes = {
				diplomacy = 3
				learning = 3
				stewardship = 3
				intrigue = 3
				martial = 9
			}
		}
	}
	if = {
		limit = {
			AND = {
				NOT = { has_religion_feature = religion_matriarchal }
				NOT = { has_religion_feature = religion_patriarchal }
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = 50
			attributes = {
				diplomacy = 3
				learning = 3
				stewardship = 3
				intrigue = 3
				martial = 9
			}
		}
	}
	new_character = {
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven

		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar

		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		remove_trait = brilliant_strategist
		
		add_trait = patron_helm

		random_list = {
			5 = { add_trait = misguided_warrior }
			10 = { add_trait = tough_soldier }
			20 = { add_trait = skilled_tactician }
			30 = { add_trait = brilliant_strategist }
		}

		random_list = { # Flavor Randomization
			35 = {
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = {
				add_trait = shrewd
			}
			1 = {
				add_trait = giant
			}
		}
		random_list = {
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = narrow_flank_leader
			}
		}
		random_list = { # Class assignment
			20 = {
				# No class
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = trained_fighter
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = journeyman_fighter
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = trained_paladin
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = journeyman_paladin
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_fantastic_helm_commander_effect = {

	if = {
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	if = {
		limit = { has_religion_feature = religion_patriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	if = {
		limit = {
			AND = {
				NOT = { has_religion_feature = religion_matriarchal }
				NOT = { has_religion_feature = religion_patriarchal }
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = 50
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	new_character = {
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid

		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar

		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician

		add_trait = brilliant_strategist
		add_trait = patron_helm

		random_list = {
			20 = {
				add_trait = robust
			}
			10 = {
				add_trait = strong
			}
			5 = {
				health = 1
			}
		}

		random_list = {
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = unyielding_leader
			}
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
		}

		random_list = { # Flavor Randomization
			20 = {
				add_trait = giant
				add_trait = robust
				add_trait = hunter
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = giant
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_cyclops
			}
			20 = {
				add_trait = holy_warrior
				add_trait = scarred
				change_martial = 3
				give_nickname = nick_the_hammer
			}
			20 = {
				add_trait = brave
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_fearless
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				add_trait = unyielding_leader
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_defender
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = shrewd
				add_trait = brave
				change_martial = 2
				give_nickname = nick_the_brave
			}
			20 = {
				add_trait = robust
				add_trait = strategist
				change_martial = 1
				give_nickname = nick_the_strong
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_noble
			}
			20 = {
				add_trait = blinded
				add_trait = strategist
				add_trait = genius
				change_martial = 4
				give_nickname = nick_the_blind
			}
			20 = {
				remove_trait = humble
				add_trait = proud
				add_trait = duelist
				change_martial = 2
				give_nickname = nick_the_proud
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_hunter
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_of_a_thousand_faces
			}
			20 = {
				add_trait = genius
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_bear
			}
			20 = {
				add_trait = trusting
				add_trait = quick
				change_martial = 4
				give_nickname = nick_the_loyal
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_boar
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_the_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_bold
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_quarreller
			}
			20 = {
				add_trait = shrewd
				add_trait = cavalry_leader
				change_martial = 2
				give_nickname = nick_the_wolf
			}
		}
		random_list = { # Class assignment
			20 = {
				# No class
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = journeyman_fighter
			}
			35 = {
				modifier = {
					factor = 0.14
					liege = {
						NOR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = expert_fighter
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = journeyman_paladin
			}
			5 = {
				modifier = {
					factor = 7
					liege = {
						OR = {
							government = theocracy_government
							government = divine_feudal_government
						}
					}
				}
				add_trait = expert_paladin
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}