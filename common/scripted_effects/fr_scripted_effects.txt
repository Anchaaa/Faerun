#Used in different sutiation, there conditions on effect. Flag has precedence over religion.
add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect = { 
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
    					OR = {
    						has_character_flag = character_was_good_human_pantheon
							#other religions go here too
    					}
    				}
    				religion = good_human_pantheon
    			}
    			has_character_flag = character_was_good_human_pantheon
			}
    	}
    	set_secret_religion = good_human_pantheon	
    	clr_character_flag = character_was_good_human_pantheon
		break = yes
    }
}

add_religion_char_flag_effect = { 
	if = {
    	limit = { religion = good_human_pantheon }
    	set_character_flag = character_was_good_human_pantheon
    }
}

clr_religion_char_flag_effect = { 
    clr_character_flag = character_was_good_human_pantheon
}

event_target_old_religion_from_flag_effect = { 
	if = {
    	limit = { has_character_flag = character_was_good_human_pantheon }
    	random_character = {
    		limit = { religion = good_human_pantheon }
    		save_event_target_as = old_religion
    	}
    }
}

flip_secret_religious_community_provinces = { 
	trigger_switch = {
		on_trigger = society_member_of
		secret_religious_society_good_human_pantheon = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_good_human_pantheon_community
					}
					religion = good_human_pantheon
					remove_province_modifier = secret_good_human_pantheon_community
				}
			}
		}  
	}
}